/* IiifViewer; Copyright (C) 2014 - Klokan Technologies GmbH; Powered by OpenLayers 3 */
(function() {var k,aa=aa||{},u=this;function x(a){return void 0!==a}function ba(){}
function ca(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function da(a){return"array"==ca(a)}function ea(a){var b=ca(a);return"array"==b||"object"==b&&"number"==typeof a.length}function C(a){return"string"==typeof a}function H(a){return"number"==typeof a}function fa(a){return"function"==ca(a)}function ga(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function I(a){return a[ha]||(a[ha]=++ia)}var ha="closure_uid_"+(1E9*Math.random()>>>0),ia=0;
function ja(a,b,c){return a.call.apply(a.bind,arguments)}function ka(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function J(a,b,c){J=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ja:ka;return J.apply(null,arguments)}
function la(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var ma=Date.now||function(){return+new Date};function na(a,b){var c=a.split("."),d=u;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&x(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function K(a,b){function c(){}c.prototype=b.prototype;a.G=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Gk=function(a,c,f){for(var g=Array(arguments.length-2),h=2;h<arguments.length;h++)g[h-2]=arguments[h];return b.prototype[c].apply(a,g)}};var oa;var pa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function qa(a){if(!ra.test(a))return a;-1!=a.indexOf("\x26")&&(a=a.replace(sa,"\x26amp;"));-1!=a.indexOf("\x3c")&&(a=a.replace(ta,"\x26lt;"));-1!=a.indexOf("\x3e")&&(a=a.replace(ua,"\x26gt;"));-1!=a.indexOf('"')&&(a=a.replace(va,"\x26quot;"));-1!=a.indexOf("'")&&(a=a.replace(wa,"\x26#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(xa,"\x26#0;"));return a}
var sa=/&/g,ta=/</g,ua=/>/g,va=/"/g,wa=/'/g,xa=/\x00/g,ra=/[\x00&<>"']/;function ya(a,b){return a<b?-1:a>b?1:0};var za=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(C(a))return C(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Aa=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=C(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ba=Array.prototype.filter?function(a,b,c){return Array.prototype.filter.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=C(a)?a.split(""):a,h=0;h<d;h++)if(h in g){var l=g[h];b.call(c,l,h,a)&&(e[f++]=l)}return e},Ea=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=C(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e};
function Fa(a){var b;a:{b=Ga;for(var c=a.length,d=C(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:C(a)?a.charAt(b):a[b]}function Ha(a,b){var c=za(a,b),d;(d=0<=c)&&Array.prototype.splice.call(a,c,1);return d}function Ia(a){return Array.prototype.concat.apply(Array.prototype,arguments)}function Ja(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function Ka(a,b,c,d){Array.prototype.splice.apply(a,La(arguments,1))}function La(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Ma(a,b){a.sort(b||Na)}function Oa(a){for(var b=Pa,c=0;c<a.length;c++)a[c]={index:c,value:a[c]};var d=b||Na;Ma(a,function(a,b){return d(a.value,b.value)||a.index-b.index});for(c=0;c<a.length;c++)a[c]=a[c].value}
function Qa(a,b){if(!ea(a)||!ea(b)||a.length!=b.length)return!1;for(var c=a.length,d=Ra,e=0;e<c;e++)if(!d(a[e],b[e]))return!1;return!0}function Na(a,b){return a>b?1:a<b?-1:0}function Ra(a,b){return a===b};function Sa(){0!=Ta&&(Ua[I(this)]=this);this.Lb=this.Lb;this.Bb=this.Bb}var Ta=0,Ua={};Sa.prototype.Lb=!1;Sa.prototype.ze=function(){if(!this.Lb&&(this.Lb=!0,this.f(),0!=Ta)){var a=I(this);delete Ua[a]}};function Va(a,b){var c=la(Xa,b);a.Lb?c.call(void 0):(a.Bb||(a.Bb=[]),a.Bb.push(x(void 0)?J(c,void 0):c))}Sa.prototype.f=function(){if(this.Bb)for(;this.Bb.length;)this.Bb.shift()()};function Xa(a){a&&"function"==typeof a.ze&&a.ze()};var Ya;a:{var Za=u.navigator;if(Za){var $a=Za.userAgent;if($a){Ya=$a;break a}}Ya=""}function M(a){return-1!=Ya.indexOf(a)};function ab(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function bb(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return!0;return!1}function cb(a){var b=0,c;for(c in a)b++;return b}function db(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function eb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function fb(a,b){return null!==a&&b in a}function gb(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return c}function hb(a){for(var b in a)return!1;return!0}
function ib(a){for(var b in a)delete a[b]}function jb(a){var b={},c;for(c in a)b[c]=a[c];return b}var kb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<kb.length;f++)c=kb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var nb=M("Opera")||M("OPR"),N=M("Trident")||M("MSIE"),ob=M("Edge"),pb=M("Gecko")&&!(-1!=Ya.toLowerCase().indexOf("webkit")&&!M("Edge"))&&!(M("Trident")||M("MSIE"))&&!M("Edge"),R=-1!=Ya.toLowerCase().indexOf("webkit")&&!M("Edge"),qb=M("Macintosh"),rb=M("Windows"),sb=M("Linux")||M("CrOS");function tb(){var a=Ya;if(pb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(ob)return/Edge\/([\d\.]+)/.exec(a);if(N)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(R)return/WebKit\/(\S+)/.exec(a)}
function ub(){var a=u.document;return a?a.documentMode:void 0}var vb=function(){if(nb&&u.opera){var a;var b=u.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=tb())&&(a=b?b[1]:"");return N&&(b=ub(),b>parseFloat(a))?String(b):a}(),wb={};
function S(a){var b;if(!(b=wb[a])){b=0;for(var c=pa(String(vb)).split("."),d=pa(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",l=RegExp("(\\d*)(\\D*)","g"),m=RegExp("(\\d*)(\\D*)","g");do{var n=l.exec(g)||["","",""],p=m.exec(h)||["","",""];if(0==n[0].length&&0==p[0].length)break;b=ya(0==n[1].length?0:parseInt(n[1],10),0==p[1].length?0:parseInt(p[1],10))||ya(0==n[2].length,0==p[2].length)||ya(n[2],p[2])}while(0==b)}b=wb[a]=0<=b}return b}
var xb=u.document,yb=xb&&N?ub()||("CSS1Compat"==xb.compatMode?parseInt(vb,10):5):void 0;var zb=!N||9<=yb,Ab=!N||9<=yb,Bb=N&&!S("9");!R||S("528");pb&&S("1.9b")||N&&S("8")||nb&&S("9.5")||R&&S("528");pb&&!S("8")||N&&S("9");function U(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.Db=!1;this.Kg=!0}U.prototype.stopPropagation=function(){this.Db=!0};U.prototype.preventDefault=function(){this.defaultPrevented=!0;this.Kg=!1};function Cb(a){a.stopPropagation()}function Db(a){a.preventDefault()};var Eb=N?"focusout":"DOMFocusOut";function Fb(a){Fb[" "](a);return a}Fb[" "]=ba;function Gb(a,b){U.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.Kd=!1;this.s=null;if(a){var c=this.type=a.type,d=a.changedTouches?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=b;var e=a.relatedTarget;if(e){if(pb){var f;a:{try{Fb(e.nodeName);
f=!0;break a}catch(g){}f=!1}f||(e=null)}}else"mouseover"==c?e=a.fromElement:"mouseout"==c&&(e=a.toElement);this.relatedTarget=e;null===d?(this.offsetX=R||void 0!==a.offsetX?a.offsetX:a.layerX,this.offsetY=R||void 0!==a.offsetY?a.offsetY:a.layerY,this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=
d.screenX||0,this.screenY=d.screenY||0);this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Kd=qb?a.metaKey:a.ctrlKey;this.state=a.state;this.s=a;a.defaultPrevented&&this.preventDefault()}}K(Gb,U);var Hb=[1,4,2];function Ib(a){return(zb?0==a.s.button:"click"==a.type?!0:!!(a.s.button&Hb[0]))&&!(R&&qb&&a.ctrlKey)}
Gb.prototype.stopPropagation=function(){Gb.G.stopPropagation.call(this);this.s.stopPropagation?this.s.stopPropagation():this.s.cancelBubble=!0};Gb.prototype.preventDefault=function(){Gb.G.preventDefault.call(this);var a=this.s;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Bb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Jb="closure_listenable_"+(1E6*Math.random()|0);function Kb(a){return!(!a||!a[Jb])}var Lb=0;function Mb(a,b,c,d,e){this.listener=a;this.Nd=null;this.src=b;this.type=c;this.qc=!!d;this.md=e;this.key=++Lb;this.hc=this.Xc=!1}function Nb(a){a.hc=!0;a.listener=null;a.Nd=null;a.src=null;a.md=null};function Ob(a){this.src=a;this.R={};this.Uc=0}Ob.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.R[f];a||(a=this.R[f]=[],this.Uc++);var g=Pb(a,b,d,e);-1<g?(b=a[g],c||(b.Xc=!1)):(b=new Mb(b,this.src,f,!!d,e),b.Xc=c,a.push(b));return b};Ob.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.R))return!1;var e=this.R[a];b=Pb(e,b,c,d);return-1<b?(Nb(e[b]),Array.prototype.splice.call(e,b,1),0==e.length&&(delete this.R[a],this.Uc--),!0):!1};
function Qb(a,b){var c=b.type;if(!(c in a.R))return!1;var d=Ha(a.R[c],b);d&&(Nb(b),0==a.R[c].length&&(delete a.R[c],a.Uc--));return d}Ob.prototype.Fe=function(a,b,c,d){a=this.R[a.toString()];var e=-1;a&&(e=Pb(a,b,c,d));return-1<e?a[e]:null};Ob.prototype.hasListener=function(a,b){var c=x(a),d=c?a.toString():"",e=x(b);return bb(this.R,function(a){for(var g=0;g<a.length;++g)if(!(c&&a[g].type!=d||e&&a[g].qc!=b))return!0;return!1})};
function Pb(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.hc&&f.listener==b&&f.qc==!!c&&f.md==d)return e}return-1};var Rb="closure_lm_"+(1E6*Math.random()|0),Sb={},Tb=0;function V(a,b,c,d,e){if(da(b)){for(var f=0;f<b.length;f++)V(a,b[f],c,d,e);return null}c=Ub(c);return Kb(a)?Vb(a,b,c,d,e):Wb(a,b,c,!1,d,e)}
function Wb(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=!!e,h=Xb(a);h||(a[Rb]=h=new Ob(a));c=h.add(b,c,d,e,f);if(c.Nd)return c;d=Yb();c.Nd=d;d.src=a;d.listener=c;if(a.addEventListener)a.addEventListener(b.toString(),d,g);else if(a.attachEvent)a.attachEvent(Zb(b.toString()),d);else throw Error("addEventListener and attachEvent are unavailable.");Tb++;return c}
function Yb(){var a=$b,b=Ab?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function ac(a,b,c,d,e){if(da(b)){for(var f=0;f<b.length;f++)ac(a,b[f],c,d,e);return null}c=Ub(c);return Kb(a)?a.Ca.add(String(b),c,!0,d,e):Wb(a,b,c,!0,d,e)}function bc(a,b,c,d,e){if(da(b))for(var f=0;f<b.length;f++)bc(a,b[f],c,d,e);else c=Ub(c),Kb(a)?a.Ca.remove(String(b),c,d,e):a&&(a=Xb(a))&&(b=a.Fe(b,c,!!d,e))&&W(b)}
function W(a){if(H(a)||!a||a.hc)return!1;var b=a.src;if(Kb(b))return Qb(b.Ca,a);var c=a.type,d=a.Nd;b.removeEventListener?b.removeEventListener(c,d,a.qc):b.detachEvent&&b.detachEvent(Zb(c),d);Tb--;(c=Xb(b))?(Qb(c,a),0==c.Uc&&(c.src=null,b[Rb]=null)):Nb(a);return!0}function Zb(a){return a in Sb?Sb[a]:Sb[a]="on"+a}function cc(a,b,c,d){var e=!0;if(a=Xb(a))if(b=a.R[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.qc==c&&!f.hc&&(f=dc(f,d),e=e&&!1!==f)}return e}
function dc(a,b){var c=a.listener,d=a.md||a.src;a.Xc&&W(a);return c.call(d,b)}
function $b(a,b){if(a.hc)return!0;if(!Ab){var c;if(!(c=b))a:{c=["window","event"];for(var d=u,e;e=c.shift();)if(null!=d[e])d=d[e];else{c=null;break a}c=d}e=c;c=new Gb(e,this);d=!0;if(!(0>e.keyCode||void 0!=e.returnValue)){a:{var f=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(l){f=!0}if(f||void 0==e.returnValue)e.returnValue=!0}e=[];for(f=c.currentTarget;f;f=f.parentNode)e.push(f);for(var f=a.type,g=e.length-1;!c.Db&&0<=g;g--){c.currentTarget=e[g];var h=cc(e[g],f,!0,c),d=d&&h}for(g=0;!c.Db&&g<
e.length;g++)c.currentTarget=e[g],h=cc(e[g],f,!1,c),d=d&&h}return d}return dc(a,new Gb(b,this))}function Xb(a){a=a[Rb];return a instanceof Ob?a:null}var ec="__closure_events_fn_"+(1E9*Math.random()>>>0);function Ub(a){if(fa(a))return a;a[ec]||(a[ec]=function(b){return a.handleEvent(b)});return a[ec]};function fc(a){return function(){return a}}var gc=fc(!1),hc=fc(!0);function ic(a){var b;b=b||0;return function(){return a.apply(this,Array.prototype.slice.call(arguments,0,b))}}function jc(a){var b=arguments,c=b.length;return function(){for(var a=0;a<c;a++)if(!b[a].apply(this,arguments))return!1;return!0}};function kc(a,b,c){Sa.call(this);this.Fa=null;this.wf=!1;this.Qi=a;this.Ei=c;this.La=b||window;this.ke=J(this.Bh,this)}K(kc,Sa);k=kc.prototype;k.start=function(){this.stop();this.wf=!1;var a=lc(this),b=mc(this);a&&!b&&this.La.mozRequestAnimationFrame?(this.Fa=V(this.La,"MozBeforePaint",this.ke),this.La.mozRequestAnimationFrame(null),this.wf=!0):this.Fa=a&&b?a.call(this.La,this.ke):this.La.setTimeout(ic(this.ke),20)};
k.stop=function(){if(this.Le()){var a=lc(this),b=mc(this);a&&!b&&this.La.mozRequestAnimationFrame?W(this.Fa):a&&b?b.call(this.La,this.Fa):this.La.clearTimeout(this.Fa)}this.Fa=null};k.Le=function(){return null!=this.Fa};k.Bh=function(){this.wf&&this.Fa&&W(this.Fa);this.Fa=null;this.Qi.call(this.Ei,ma())};k.f=function(){this.stop();kc.G.f.call(this)};
function lc(a){a=a.La;return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||null}function mc(a){a=a.La;return a.cancelAnimationFrame||a.cancelRequestAnimationFrame||a.webkitCancelRequestAnimationFrame||a.mozCancelRequestAnimationFrame||a.oCancelRequestAnimationFrame||a.msCancelRequestAnimationFrame||null};var nc;
function oc(){var a=u.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!M("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=J(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!M("Trident")&&!M("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(x(c.next)){c=c.next;var a=c.Jf;c.Jf=null;a()}};return function(a){d.next={Jf:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){u.setTimeout(a,0)}};function pc(a){if(a.ka&&"function"==typeof a.ka)return a.ka();if(C(a))return a.split("");if(ea(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return db(a)}
function qc(a,b,c){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,c);else if(ea(a)||C(a))Aa(a,b,c);else{var d;if(a.pa&&"function"==typeof a.pa)d=a.pa();else if(a.ka&&"function"==typeof a.ka)d=void 0;else if(ea(a)||C(a)){d=[];for(var e=a.length,f=0;f<e;f++)d.push(f)}else d=eb(a);for(var e=pc(a),f=e.length,g=0;g<f;g++)b.call(c,e[g],d&&d[g],a)}};function sc(a,b){var c=a%b;return 0>c*b?c+b:c};function tc(a,b){this.a={};this.P=[];this.g=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}k=tc.prototype;k.yc=function(){return this.g};k.ka=function(){uc(this);for(var a=[],b=0;b<this.P.length;b++)a.push(this.a[this.P[b]]);return a};k.pa=function(){uc(this);return this.P.concat()};k.Aa=function(a){return vc(this.a,a)};k.rd=function(){return 0==this.g};
k.clear=function(){this.a={};this.g=this.P.length=0};k.remove=function(a){return vc(this.a,a)?(delete this.a[a],this.g--,this.P.length>2*this.g&&uc(this),!0):!1};function uc(a){if(a.g!=a.P.length){for(var b=0,c=0;b<a.P.length;){var d=a.P[b];vc(a.a,d)&&(a.P[c++]=d);b++}a.P.length=c}if(a.g!=a.P.length){for(var e={},c=b=0;b<a.P.length;)d=a.P[b],vc(e,d)||(a.P[c++]=d,e[d]=1),b++;a.P.length=c}}k.get=function(a,b){return vc(this.a,a)?this.a[a]:b};
k.set=function(a,b){vc(this.a,a)||(this.g++,this.P.push(a));this.a[a]=b};k.addAll=function(a){var b;a instanceof tc?(b=a.pa(),a=a.ka()):(b=eb(a),a=db(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};k.forEach=function(a,b){for(var c=this.pa(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};k.clone=function(){return new tc(this)};function vc(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function wc(){this.Cg=ma()}new wc;wc.prototype.set=function(a){this.Cg=a};wc.prototype.reset=function(){this.set(ma())};wc.prototype.get=function(){return this.Cg};var xc=!N||9<=yb;!pb&&!N||N&&9<=yb||pb&&S("1.9.1");N&&S("9");function yc(a,b){this.x=x(a)?a:0;this.y=x(b)?b:0}k=yc.prototype;k.clone=function(){return new yc(this.x,this.y)};k.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};k.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};k.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};k.translate=function(a,b){a instanceof yc?(this.x+=a.x,this.y+=a.y):(this.x+=a,H(b)&&(this.y+=b));return this};
k.scale=function(a,b){var c=H(b)?b:a;this.x*=a;this.y*=c;return this};function zc(a,b){this.width=a;this.height=b}k=zc.prototype;k.clone=function(){return new zc(this.width,this.height)};k.sh=function(){return this.width*this.height};k.rd=function(){return!this.sh()};k.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};k.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};k.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
k.scale=function(a,b){var c=H(b)?b:a;this.width*=a;this.height*=c;return this};function Ac(a){var b=document;return C(a)?b.getElementById(a):a}function Bc(a,b){ab(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:Cc.hasOwnProperty(d)?a.setAttribute(Cc[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}
var Cc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Dc(a){a=a.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new zc(a.clientWidth,a.clientHeight)}
function Ec(a,b,c){var d=arguments,e=document,f=d[0],g=d[1];if(!xc&&g&&(g.name||g.type)){f=["\x3c",f];g.name&&f.push(' name\x3d"',qa(g.name),'"');if(g.type){f.push(' type\x3d"',qa(g.type),'"');var h={};lb(h,g);delete h.type;g=h}f.push("\x3e");f=f.join("")}f=e.createElement(f);g&&(C(g)?f.className=g:da(g)?f.className=g.join(" "):Bc(f,g));2<d.length&&Fc(e,f,d,2);return f}
function Fc(a,b,c,d){function e(c){c&&b.appendChild(C(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var f=c[d];!ea(f)||ga(f)&&0<f.nodeType?e(f):Aa(Gc(f)?Ja(f):f,e)}}function Hc(a,b,c){a.insertBefore(b,a.childNodes[c]||null)}function Ic(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}
function Jc(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Kc(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function Gc(a){if(a&&"number"==typeof a.length){if(ga(a))return"function"==typeof a.item||"string"==typeof a.item;if(fa(a))return"function"==typeof a.item}return!1}function Lc(a){this.Be=a||u.document||document}k=Lc.prototype;
k.Nc=Bc;k.createElement=function(a){return this.Be.createElement(a)};k.createTextNode=function(a){return this.Be.createTextNode(String(a))};k.appendChild=function(a,b){a.appendChild(b)};k.append=function(a,b){Fc(Kc(a),a,arguments,1)};k.canHaveChildren=function(a){if(1!=a.nodeType)return!1;switch(a.tagName){case "APPLET":case "AREA":case "BASE":case "BR":case "COL":case "COMMAND":case "EMBED":case "FRAME":case "HR":case "IMG":case "INPUT":case "IFRAME":case "ISINDEX":case "KEYGEN":case "LINK":case "NOFRAMES":case "NOSCRIPT":case "META":case "OBJECT":case "PARAM":case "SCRIPT":case "SOURCE":case "STYLE":case "TRACK":case "WBR":return!1}return!0};
k.removeNode=Ic;k.contains=Jc;function X(){Sa.call(this);this.Ca=new Ob(this);this.ph=this;this.cf=null}K(X,Sa);X.prototype[Jb]=!0;k=X.prototype;k.addEventListener=function(a,b,c,d){V(this,a,b,c,d)};k.removeEventListener=function(a,b,c,d){bc(this,a,b,c,d)};
k.dispatchEvent=function(a){var b,c=this.cf;if(c)for(b=[];c;c=c.cf)b.push(c);var c=this.ph,d=a.type||a;if(C(a))a=new U(a,c);else if(a instanceof U)a.target=a.target||c;else{var e=a;a=new U(d,c);lb(a,e)}var e=!0,f;if(b)for(var g=b.length-1;!a.Db&&0<=g;g--)f=a.currentTarget=b[g],e=Mc(f,d,!0,a)&&e;a.Db||(f=a.currentTarget=c,e=Mc(f,d,!0,a)&&e,a.Db||(e=Mc(f,d,!1,a)&&e));if(b)for(g=0;!a.Db&&g<b.length;g++)f=a.currentTarget=b[g],e=Mc(f,d,!1,a)&&e;return e};
k.f=function(){X.G.f.call(this);if(this.Ca){var a=this.Ca,b=0,c;for(c in a.R){for(var d=a.R[c],e=0;e<d.length;e++)++b,Nb(d[e]);delete a.R[c];a.Uc--}}this.cf=null};function Vb(a,b,c,d,e){return a.Ca.add(String(b),c,!1,d,e)}function Mc(a,b,c,d){b=a.Ca.R[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.hc&&g.qc==c){var h=g.listener,l=g.md||g.src;g.Xc&&Qb(a.Ca,g);e=!1!==h.call(l,d)&&e}}return e&&0!=d.Kg}
k.Fe=function(a,b,c,d){return this.Ca.Fe(String(a),b,c,d)};k.hasListener=function(a,b){return this.Ca.hasListener(x(a)?String(a):void 0,b)};function Nc(a){X.call(this);this.ce=a||window;this.Ve=V(this.ce,"resize",this.ui,!1,this);this.Pc=Dc(this.ce||window)}K(Nc,X);Nc.prototype.zb=function(){return this.Pc?this.Pc.clone():null};Nc.prototype.f=function(){Nc.G.f.call(this);this.Ve&&(W(this.Ve),this.Ve=null);this.Pc=this.ce=null};Nc.prototype.ui=function(){var a=Dc(this.ce||window),b=this.Pc;a==b||a&&b&&a.width==b.width&&a.height==b.height||(this.Pc=a,this.dispatchEvent("resize"))};function Oc(a){if(a.classList)return a.classList;a=a.className;return C(a)&&a.match(/\S+/g)||[]}function Pc(a,b){var c;a.classList?c=a.classList.contains(b):(c=Oc(a),c=0<=za(c,b));return c}function Qc(a,b){a.classList?a.classList.add(b):Pc(a,b)||(a.className+=0<a.className.length?" "+b:b)}function Rc(a,b){a.classList?a.classList.remove(b):Pc(a,b)&&(a.className=Ba(Oc(a),function(a){return a!=b}).join(" "))};function Sc(a,b,c,d,e){if(!(N||ob||R&&S("525")))return!0;if(qb&&e)return Tc(a);if(e&&!d)return!1;H(b)&&(b=Uc(b));if(!c&&(17==b||18==b||qb&&91==b))return!1;if((R||ob)&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(N&&d&&b==a)return!1;switch(a){case 13:return!0;case 27:return!(R||ob)}return Tc(a)}
function Tc(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||(R||ob)&&0==a)return!0;switch(a){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function Uc(a){if(pb)a=Vc(a);else if(qb&&R)a:switch(a){case 93:a=91;break a}return a}
function Vc(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};function Wc(a,b){X.call(this);a&&Xc(this,a,b)}K(Wc,X);k=Wc.prototype;k.D=null;k.td=null;k.Ne=null;k.ud=null;k.ba=-1;k.fb=-1;k.he=!1;
var Yc={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Zc={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},$c=N||ob||R&&S("525"),ad=qb&&pb;k=Wc.prototype;
k.di=function(a){if(R||ob)if(17==this.ba&&!a.ctrlKey||18==this.ba&&!a.altKey||qb&&91==this.ba&&!a.metaKey)this.fb=this.ba=-1;-1==this.ba&&(a.ctrlKey&&17!=a.keyCode?this.ba=17:a.altKey&&18!=a.keyCode?this.ba=18:a.metaKey&&91!=a.keyCode&&(this.ba=91));$c&&!Sc(a.keyCode,this.ba,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.fb=Uc(a.keyCode),ad&&(this.he=a.altKey))};k.ei=function(a){this.fb=this.ba=-1;this.he=a.altKey};
k.handleEvent=function(a){var b=a.s,c,d,e=b.altKey;N&&"keypress"==a.type?(c=this.fb,d=13!=c&&27!=c?b.keyCode:0):(R||ob)&&"keypress"==a.type?(c=this.fb,d=0<=b.charCode&&63232>b.charCode&&Tc(c)?b.charCode:0):nb&&!R?(c=this.fb,d=Tc(c)?b.keyCode:0):(c=b.keyCode||this.fb,d=b.charCode||0,ad&&(e=this.he),qb&&63==d&&224==c&&(c=191));var f=c=Uc(c),g=b.keyIdentifier;c?63232<=c&&c in Yc?f=Yc[c]:25==c&&a.shiftKey&&(f=9):g&&g in Zc&&(f=Zc[g]);a=f==this.ba;this.ba=f;b=new bd(f,d,a,b);b.altKey=e;this.dispatchEvent(b)};
function Xc(a,b,c){a.ud&&a.detach();a.D=b;a.td=V(a.D,"keypress",a,c);a.Ne=V(a.D,"keydown",a.di,c,a);a.ud=V(a.D,"keyup",a.ei,c,a)}k.detach=function(){this.td&&(W(this.td),W(this.Ne),W(this.ud),this.ud=this.Ne=this.td=null);this.D=null;this.fb=this.ba=-1};k.f=function(){Wc.G.f.call(this);this.detach()};function bd(a,b,c,d){Gb.call(this,d);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}K(bd,Gb);function cd(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}k=cd.prototype;k.Rb=function(){return this.right-this.left};k.Pb=function(){return this.bottom-this.top};k.clone=function(){return new cd(this.top,this.right,this.bottom,this.left)};k.contains=function(a){return this&&a?a instanceof cd?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};
k.expand=function(a,b,c,d){ga(a)?(this.top-=a.top,this.right+=a.right,this.bottom+=a.bottom,this.left-=a.left):(this.top-=a,this.right+=b,this.bottom+=c,this.left-=d);return this};k.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};k.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};
k.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};k.translate=function(a,b){a instanceof yc?(this.left+=a.x,this.right+=a.x,this.top+=a.y,this.bottom+=a.y):(this.left+=a,this.right+=a,H(b)&&(this.top+=b,this.bottom+=b));return this};k.scale=function(a,b){var c=H(b)?b:a;this.left*=a;this.right*=a;this.top*=c;this.bottom*=c;return this};function dd(a,b){var c=Kc(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""}
function ed(a){if(1==a.nodeType){var b;a:{try{b=a.getBoundingClientRect()}catch(c){b={left:0,top:0,right:0,bottom:0};break a}N&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop)}return new yc(b.left,b.top)}b=a.changedTouches?a.changedTouches[0]:a;return new yc(b.clientX,b.clientY)}function fd(a,b){a.style.display=b?"":"none"}
function gd(a,b,c,d){if(/^\d+px?$/.test(b))return parseInt(b,10);var e=a.style[c],f=a.runtimeStyle[c];a.runtimeStyle[c]=a.currentStyle[c];a.style[c]=b;b=a.style[d];a.style[c]=e;a.runtimeStyle[c]=f;return b}function hd(a,b){var c=a.currentStyle?a.currentStyle[b]:null;return c?gd(a,c,"left","pixelLeft"):0}var id={thin:2,medium:4,thick:6};
function jd(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null;return c in id?id[c]:gd(a,c,"left","pixelLeft")};function kd(a,b){X.call(this);var c=this.D=a,c=ga(c)&&1==c.nodeType?this.D:this.D?this.D.body:null,d;if(d=!!c)d="rtl"==(dd(c,"direction")||(c.currentStyle?c.currentStyle.direction:null)||c.style&&c.style.direction);this.Ni=d;this.kg=V(this.D,pb?"DOMMouseScroll":"mousewheel",this,b)}K(kd,X);
kd.prototype.handleEvent=function(a){var b=0,c=0,d=0;a=a.s;if("mousewheel"==a.type){c=1;if(N||R&&(rb||S("532.0")))c=40;d=ld(-a.wheelDelta,c);x(a.wheelDeltaX)?(b=ld(-a.wheelDeltaX,c),c=ld(-a.wheelDeltaY,c)):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),x(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;H(this.lg)&&(b=Math.min(Math.max(b,-this.lg),this.lg));H(this.mg)&&(c=Math.min(Math.max(c,-this.mg),this.mg));this.Ni&&(b=-b);b=new md(d,a,b,c);this.dispatchEvent(b)};
function ld(a,b){return R&&(qb||sb)&&0!=a%b?a:a/b}kd.prototype.f=function(){kd.G.f.call(this);W(this.kg);this.kg=null};function md(a,b,c,d){Gb.call(this,b);this.type="mousewheel";this.detail=a;this.deltaX=c;this.deltaY=d}K(md,Gb);function nd(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}nd.prototype.BYTES_PER_ELEMENT=4;nd.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};nd.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(nd.BYTES_PER_ELEMENT=4,nd.prototype.BYTES_PER_ELEMENT=nd.prototype.BYTES_PER_ELEMENT,nd.prototype.set=nd.prototype.set,nd.prototype.toString=nd.prototype.toString,na("Float32Array",nd));function od(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}od.prototype.BYTES_PER_ELEMENT=8;od.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};od.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{od.BYTES_PER_ELEMENT=8}catch(a){}od.prototype.BYTES_PER_ELEMENT=od.prototype.BYTES_PER_ELEMENT;od.prototype.set=od.prototype.set;od.prototype.toString=od.prototype.toString;na("Float64Array",od)};function qd(){var a=Array(16);rd(a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return a}function rd(a,b,c,d,e,f,g,h,l,m,n,p,r,t,v,z,q){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=f;a[5]=g;a[6]=h;a[7]=l;a[8]=m;a[9]=n;a[10]=p;a[11]=r;a[12]=t;a[13]=v;a[14]=z;a[15]=q}function sd(a,b,c){var d=a[1]*b+a[5]*c+0*a[9]+a[13],e=a[2]*b+a[6]*c+0*a[10]+a[14],f=a[3]*b+a[7]*c+0*a[11]+a[15];a[12]=a[0]*b+a[4]*c+0*a[8]+a[12];a[13]=d;a[14]=e;a[15]=f}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);
new Float64Array(16);function td(){X.call(this);this.Wa=0}K(td,X);td.prototype.F=function(){++this.Wa;this.dispatchEvent("change")};function ud(a,b,c){V(a,"moveend",b,!1,c)};function vd(a,b,c){U.call(this,a);this.key=b;this.oldValue=c}K(vd,U);function Y(a){td.call(this);I(this);this.nc={};void 0!==a&&this.Nc(a)}K(Y,td);var wd={};function xd(a){return wd.hasOwnProperty(a)?wd[a]:wd[a]="change:"+a}Y.prototype.get=function(a){var b;this.nc.hasOwnProperty(a)&&(b=this.nc[a]);return b};Y.prototype.pa=function(){return Object.keys(this.nc)};
Y.prototype.set=function(a,b,c){c?this.nc[a]=b:(c=this.nc[a],this.nc[a]=b,b=xd(a),this.dispatchEvent(new vd(b,a,c)),this.dispatchEvent(new vd("propertychange",a,c)))};Y.prototype.Nc=function(a,b){for(var c in a)this.set(c,a[c],b)};function yd(a,b,c){U.call(this,a,c);this.element=b}K(yd,U);function zd(a){Y.call(this);this.ya=a?a:[];Ad(this)}K(zd,Y);k=zd.prototype;k.clear=function(){for(;0<this.get("length");)this.pop()};k.extend=function(a){var b,c;b=0;for(c=a.length;b<c;++b)this.push(a[b]);return this};k.forEach=function(a,b){this.ya.forEach(a,b)};k.item=function(a){return this.ya[a]};k.pop=function(){return Bd(this,this.get("length")-1)};
k.push=function(a){var b=this.ya.length;Ka(this.ya,b,0,a);Ad(this);this.dispatchEvent(new yd("add",a,this));return b};k.remove=function(a){var b=this.ya,c,d;c=0;for(d=b.length;c<d;++c)if(b[c]===a)return Bd(this,c)};function Bd(a,b){var c=a.ya[b];Array.prototype.splice.call(a.ya,b,1);Ad(a);a.dispatchEvent(new yd("remove",c,a));return c}function Ad(a){a.set("length",a.ya.length)};function Cd(){};function Dd(a,b){a[0]+=b[0];a[1]+=b[1]}function Ed(a,b){var c=Math.cos(b),d=Math.sin(b),e=a[1]*c+a[0]*d;a[0]=a[0]*c-a[1]*d;a[1]=e};function Fd(a,b,c){U.call(this,a);this.map=b;this.frameState=void 0!==c?c:null}K(Fd,U);function Gd(a,b,c){U.call(this,a);this.U=b;a=c?c:{};this.buttons=Hd(a);this.pressure=Id(a,this.buttons);this.bubbles="bubbles"in a?a.bubbles:!1;this.cancelable="cancelable"in a?a.cancelable:!1;this.view="view"in a?a.view:null;this.detail="detail"in a?a.detail:null;this.screenX="screenX"in a?a.screenX:0;this.screenY="screenY"in a?a.screenY:0;this.clientX="clientX"in a?a.clientX:0;this.clientY="clientY"in a?a.clientY:0;this.ctrlKey="ctrlKey"in a?a.ctrlKey:!1;this.altKey="altKey"in a?a.altKey:!1;this.shiftKey=
"shiftKey"in a?a.shiftKey:!1;this.metaKey="metaKey"in a?a.metaKey:!1;this.button="button"in a?a.button:0;this.relatedTarget="relatedTarget"in a?a.relatedTarget:null;this.pointerId="pointerId"in a?a.pointerId:0;this.width="width"in a?a.width:0;this.height="height"in a?a.height:0;this.tiltX="tiltX"in a?a.tiltX:0;this.tiltY="tiltY"in a?a.tiltY:0;this.pointerType="pointerType"in a?a.pointerType:"";this.hwTimestamp="hwTimestamp"in a?a.hwTimestamp:0;this.isPrimary="isPrimary"in a?a.isPrimary:!1;b.preventDefault&&
(this.preventDefault=function(){b.preventDefault()})}K(Gd,U);function Hd(a){if(a.buttons||Jd)a=a.buttons;else switch(a.which){case 1:a=1;break;case 2:a=4;break;case 3:a=2;break;default:a=0}return a}function Id(a,b){var c=0;return c=a.pressure?a.pressure:b?.5:0}var Jd=!1;try{Jd=1===(new MouseEvent("click",{buttons:1})).buttons}catch(a){};function Kd(a,b){var c=document.createElement("CANVAS");a&&(c.width=a);b&&(c.height=b);return c.getContext("2d")}
var Ld=function(){var a;return function(){if(void 0===a)if(u.getComputedStyle){var b=document.createElement("P"),c,d={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.appendChild(b);for(var e in d)e in b.style&&(b.style[e]="translate(1px,1px)",c=u.getComputedStyle(b).getPropertyValue(d[e]));Ic(b);a=c&&"none"!==c}else a=!1;return a}}(),Md=function(){var a;return function(){if(void 0===a)if(u.getComputedStyle){var b=
document.createElement("P"),c,d={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.appendChild(b);for(var e in d)e in b.style&&(b.style[e]="translate3d(1px,1px,1px)",c=u.getComputedStyle(b).getPropertyValue(d[e]));Ic(b);a=c&&"none"!==c}else a=!1;return a}}();
function Nd(a,b){var c=a.style;c.WebkitTransform=b;c.MozTransform=b;c.tk=b;c.msTransform=b;c.transform=b;N&&S("9.0")&&(a.style.transformOrigin="0 0")};var Od=u.devicePixelRatio||1,Pd=!1,Qd=function(){if(!("HTMLCanvasElement"in u))return!1;try{var a=Kd();return a?(void 0!==a.setLineDash&&(Pd=!0),!0):!1}catch(b){return!1}}(),Rd="ontouchstart"in u,Sd="PointerEvent"in u,Td=!!u.navigator.msPointerEnabled;function Ud(a,b){this.c=a;this.Ed=b};function Vd(a){Ud.call(this,a,{mousedown:this.dj,mousemove:this.ej,mouseup:this.hj,mouseover:this.gj,mouseout:this.fj});this.B=a.B;this.jg=[]}K(Vd,Ud);function Wd(a,b){for(var c=a.jg,d=b.clientX,e=b.clientY,f=0,g=c.length,h;f<g&&(h=c[f]);f++){var l=Math.abs(e-h[1]);if(25>=Math.abs(d-h[0])&&25>=l)return!0}return!1}function Xd(a){var b=Yd(a,a.s),c=b.preventDefault;b.preventDefault=function(){a.preventDefault();c()};b.pointerId=1;b.isPrimary=!0;b.pointerType="mouse";return b}k=Vd.prototype;
k.dj=function(a){if(!Wd(this,a)){(1).toString()in this.B&&this.cancel(a);var b=Xd(a);this.B[(1).toString()]=a;this.c.fireEvent(Zd,b,a)}};k.ej=function(a){if(!Wd(this,a)){var b=Xd(a);this.c.move(b,a)}};k.hj=function(a){if(!Wd(this,a)){var b=this.B[(1).toString()];b&&b.button===a.button&&(b=Xd(a),this.c.fireEvent($d,b,a),delete this.B[(1).toString()])}};k.gj=function(a){if(!Wd(this,a)){var b=Xd(a);ae(this.c,b,a)}};k.fj=function(a){if(!Wd(this,a)){var b=Xd(a);be(this.c,b,a)}};
k.cancel=function(a){var b=Xd(a);this.c.cancel(b,a);delete this.B[(1).toString()]};function ce(a){Ud.call(this,a,{MSPointerDown:this.mj,MSPointerMove:this.nj,MSPointerUp:this.qj,MSPointerOut:this.oj,MSPointerOver:this.pj,MSPointerCancel:this.lj,MSGotPointerCapture:this.jj,MSLostPointerCapture:this.kj});this.B=a.B;this.hh=["","unavailable","touch","pen","mouse"]}K(ce,Ud);function de(a,b){var c=b;H(b.s.pointerType)&&(c=Yd(b,b.s),c.pointerType=a.hh[b.s.pointerType]);return c}k=ce.prototype;k.mj=function(a){this.B[a.s.pointerId.toString()]=a;var b=de(this,a);this.c.fireEvent(Zd,b,a)};
k.nj=function(a){var b=de(this,a);this.c.move(b,a)};k.qj=function(a){var b=de(this,a);this.c.fireEvent($d,b,a);delete this.B[a.s.pointerId.toString()]};k.oj=function(a){var b=de(this,a);be(this.c,b,a)};k.pj=function(a){var b=de(this,a);ae(this.c,b,a)};k.lj=function(a){var b=de(this,a);this.c.cancel(b,a);delete this.B[a.s.pointerId.toString()]};k.kj=function(a){this.c.dispatchEvent(new Gd("lostpointercapture",a,a.s))};k.jj=function(a){this.c.dispatchEvent(new Gd("gotpointercapture",a,a.s))};function ee(a){Ud.call(this,a,{pointerdown:this.Cj,pointermove:this.Dj,pointerup:this.Gj,pointerout:this.Ej,pointerover:this.Fj,pointercancel:this.Bj,gotpointercapture:this.Xh,lostpointercapture:this.Yi})}K(ee,Ud);k=ee.prototype;k.Cj=function(a){fe(this.c,a)};k.Dj=function(a){fe(this.c,a)};k.Gj=function(a){fe(this.c,a)};k.Ej=function(a){fe(this.c,a)};k.Fj=function(a){fe(this.c,a)};k.Bj=function(a){fe(this.c,a)};k.Yi=function(a){fe(this.c,a)};k.Xh=function(a){fe(this.c,a)};function ge(a,b){Ud.call(this,a,{touchstart:this.ek,touchmove:this.dk,touchend:this.ck,touchcancel:this.bk});this.B=a.B;this.cj=b;this.wc=void 0;this.pe=0;this.Lc=void 0}K(ge,Ud);k=ge.prototype;k.Ig=function(){this.pe=0;this.Lc=void 0};
function he(a,b,c){b=Yd(b,c);b.pointerId=c.identifier+2;b.bubbles=!0;b.cancelable=!0;b.detail=a.pe;b.button=0;b.buttons=1;b.width=c.webkitRadiusX||c.radiusX||0;b.height=c.webkitRadiusY||c.radiusY||0;b.pressure=c.webkitForce||c.force||.5;b.isPrimary=a.wc===c.identifier;b.pointerType="touch";b.clientX=c.clientX;b.clientY=c.clientY;b.screenX=c.screenX;b.screenY=c.screenY;return b}
function ie(a,b,c){function d(){b.preventDefault()}var e=Array.prototype.slice.call(b.s.changedTouches),f=e.length,g,h;for(g=0;g<f;++g)h=he(a,b,e[g]),h.preventDefault=d,c.call(a,b,h)}
k.ek=function(a){var b=a.s.touches,c=eb(this.B),d=c.length;if(d>=b.length){var e=[],f,g,h;for(f=0;f<d;++f){g=c[f];h=this.B[g];var l;if(!(l=1==g))a:{l=b.length;for(var m=void 0,n=0;n<l;n++)if(m=b[n],m.identifier===g-2){l=!0;break a}l=!1}l||e.push(h.Cb)}for(f=0;f<e.length;++f)this.me(a,e[f])}b=cb(this.B);if(0===b||1===b&&fb(this.B,(1).toString()))this.wc=a.s.changedTouches[0].identifier,void 0!==this.Lc&&u.clearTimeout(this.Lc);je(this,a);this.pe++;ie(this,a,this.vj)};
k.vj=function(a,b){this.B[b.pointerId]={target:b.target,Cb:b,ug:b.target};var c=this.c;b.bubbles=!0;c.fireEvent(ke,b,a);c=this.c;b.bubbles=!1;c.fireEvent(le,b,a);this.c.fireEvent(Zd,b,a)};k.dk=function(a){a.preventDefault();ie(this,a,this.ij)};
k.ij=function(a,b){var c=this.B[b.pointerId];if(c){var d=c.Cb,e=c.ug;this.c.move(b,a);d&&e!==b.target&&(d.relatedTarget=b.target,b.relatedTarget=e,d.target=e,b.target?(be(this.c,d,a),ae(this.c,b,a)):(b.target=e,b.relatedTarget=null,this.me(a,b)));c.Cb=b;c.ug=b.target}};k.ck=function(a){je(this,a);ie(this,a,this.fk)};
k.fk=function(a,b){this.c.fireEvent($d,b,a);this.c.Cb(b,a);var c=this.c;b.bubbles=!1;c.fireEvent(me,b,a);delete this.B[b.pointerId];b.isPrimary&&(this.wc=void 0,this.Lc=u.setTimeout(J(this.Ig,this),200))};k.bk=function(a){ie(this,a,this.me)};k.me=function(a,b){this.c.cancel(b,a);this.c.Cb(b,a);var c=this.c;b.bubbles=!1;c.fireEvent(me,b,a);delete this.B[b.pointerId];b.isPrimary&&(this.wc=void 0,this.Lc=u.setTimeout(J(this.Ig,this),200))};
function je(a,b){var c=a.cj.jg,d=b.s.changedTouches[0];if(a.wc===d.identifier){var e=[d.clientX,d.clientY];c.push(e);u.setTimeout(function(){Ha(c,e)},2500)}};function ne(a){X.call(this);this.D=a;this.B={};this.Rf={};this.vc=[];Sd?oe(this,new ee(this)):Td?oe(this,new ce(this)):(a=new Vd(this),oe(this,a),Rd&&oe(this,new ge(this,a)));a=this.vc.length;for(var b,c=0;c<a;c++)b=this.vc[c],pe(this,Object.keys(b.Ed))}K(ne,X);function oe(a,b){var c=Object.keys(b.Ed);c&&(c.forEach(function(a){var c=b.Ed[a];c&&(this.Rf[a]=J(c,b))},a),a.vc.push(b))}k=ne.prototype;k.Qf=function(a){var b=this.Rf[a.type];b&&b(a)};
function pe(a,b){b.forEach(function(a){V(this.D,a,this.Qf,!1,this)},a)}function qe(a,b){b.forEach(function(a){bc(this.D,a,this.Qf,!1,this)},a)}function Yd(a,b){for(var c={},d,e=0,f=re.length;e<f;e++)d=re[e][0],c[d]=a[d]||b[d]||re[e][1];return c}k.move=function(a,b){this.fireEvent(se,a,b)};k.Cb=function(a,b){a.bubbles=!0;this.fireEvent(te,a,b)};k.cancel=function(a,b){this.fireEvent(ue,a,b)};function be(a,b,c){a.Cb(b,c);var d=b.relatedTarget;d&&Jc(b.target,d)||(b.bubbles=!1,a.fireEvent(me,b,c))}
function ae(a,b,c){b.bubbles=!0;a.fireEvent(ke,b,c);var d=b.relatedTarget;d&&Jc(b.target,d)||(b.bubbles=!1,a.fireEvent(le,b,c))}k.fireEvent=function(a,b,c){this.dispatchEvent(new Gd(a,c,b))};function fe(a,b){a.dispatchEvent(new Gd(b.type,b,b.s))}k.f=function(){for(var a=this.vc.length,b,c=0;c<a;c++)b=this.vc[c],qe(this,Object.keys(b.Ed));ne.G.f.call(this)};
var se="pointermove",Zd="pointerdown",$d="pointerup",ke="pointerover",te="pointerout",le="pointerenter",me="pointerleave",ue="pointercancel",re=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",
!1],["type",""],["target",null],["currentTarget",null],["which",0]];function ve(a,b,c,d,e){Fd.call(this,a,b,e);this.U=c;this.originalEvent=c.s;c=b.H;a=ed(this.originalEvent);c=ed(c);a=new yc(a.x-c.x,a.y-c.y);this.pixel=[a.x,a.y];this.coordinate=b.xc(this.pixel);this.dragging=void 0!==d?d:!1}K(ve,Fd);ve.prototype.preventDefault=function(){ve.G.preventDefault.call(this);this.U.preventDefault()};ve.prototype.stopPropagation=function(){ve.G.stopPropagation.call(this);this.U.stopPropagation()};function we(a,b,c,d,e){ve.call(this,a,b,c.U,d,e);this.xg=c}K(we,ve);
function xe(a){X.call(this);this.a=a;this.rc=0;this.$c=!1;this.bb=this.Ld=this.wb=null;a=this.a.H;this.Df=0;this.tf={};this.ec=new ne(a);this.ab=null;this.Ld=V(this.ec,Zd,this.pi,!1,this);this.ff=V(this.ec,se,this.Kj,!1,this)}K(xe,X);function ye(a,b){var c;c=new we(ze,a.a,b);a.dispatchEvent(c);0!==a.rc?(u.clearTimeout(a.rc),a.rc=0,c=new we(Ae,a.a,b),a.dispatchEvent(c)):a.rc=u.setTimeout(J(function(){this.rc=0;var a=new we(Be,this.a,b);this.dispatchEvent(a)},a),250)}
function Ce(a,b){b.type==De||b.type==Ee?delete a.tf[b.pointerId]:b.type==Fe&&(a.tf[b.pointerId]=!0);a.Df=cb(a.tf)}k=xe.prototype;k.Zf=function(a){Ce(this,a);var b=new we(De,this.a,a);this.dispatchEvent(b);!this.$c&&0===a.button&&ye(this,this.bb);0===this.Df&&(this.wb.forEach(W),this.wb=null,this.$c=!1,this.bb=null,Xa(this.ab),this.ab=null)};
k.pi=function(a){Ce(this,a);var b=new we(Fe,this.a,a);this.dispatchEvent(b);this.bb=a;this.wb||(this.ab=new ne(document),this.wb=[V(this.ab,Ge,this.ri,!1,this),V(this.ab,De,this.Zf,!1,this),V(this.ec,Ee,this.Zf,!1,this)])};k.ri=function(a){if(a.clientX!=this.bb.clientX||a.clientY!=this.bb.clientY){this.$c=!0;var b=new we(He,this.a,a,this.$c);this.dispatchEvent(b)}a.preventDefault()};k.Kj=function(a){this.dispatchEvent(new we(a.type,this.a,a,!(!this.bb||a.clientX==this.bb.clientX&&a.clientY==this.bb.clientY)))};
k.f=function(){this.ff&&(W(this.ff),this.ff=null);this.Ld&&(W(this.Ld),this.Ld=null);this.wb&&(this.wb.forEach(W),this.wb=null);this.ab&&(Xa(this.ab),this.ab=null);this.ec&&(Xa(this.ec),this.ec=null);xe.G.f.call(this)};var Be="singleclick",ze="click",Ae="dblclick",He="pointerdrag",Ge="pointermove",Fe="pointerdown",De="pointerup",Ee="pointercancel",Ie={Dk:Be,rk:ze,sk:Ae,wk:He,zk:Ge,vk:Fe,Ck:De,Bk:"pointerover",Ak:"pointerout",xk:"pointerenter",yk:"pointerleave",uk:Ee};function Je(a,b){if(da(a))return a;void 0===b?b=[a,a]:(b[0]=a,b[1]=a);return b};function Ke(a){for(var b=Le(),c=0,d=a.length;c<d;++c)Me(b,a[c]);return b}function Le(){return[Infinity,Infinity,-Infinity,-Infinity]}function Ne(a,b,c,d,e){return e?(e[0]=a,e[1]=b,e[2]=c,e[3]=d,e):[a,b,c,d]}function Oe(a,b,c,d){d=Ne(Infinity,Infinity,-Infinity,-Infinity,d);for(var e=0;e<b;e+=c){var f=d,g=a[e],h=a[e+1];f[0]=Math.min(f[0],g);f[1]=Math.min(f[1],h);f[2]=Math.max(f[2],g);f[3]=Math.max(f[3],h)}return d}
function Me(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[2]&&(a[2]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[3]&&(a[3]=b[1])}function Pe(a){var b=0;a[2]<a[0]||a[3]<a[1]||(b=Qe(a)*Re(a));return b}function Se(a){return[(a[0]+a[2])/2,(a[1]+a[3])/2]}
function Te(a,b,c,d){var e=b*d[0]/2,f=b*d[1]/2;b=Math.cos(c);d=Math.sin(c);e=[-e,-e,e,e];c=[-f,f,-f,f];for(var g,h,f=0;4>f;++f)g=e[f],h=c[f],e[f]=a[0]+g*b-h*d,c[f]=a[1]+g*d+h*b;a=Math.min.apply(null,e);b=Math.min.apply(null,c);e=Math.max.apply(null,e);c=Math.max.apply(null,c);return Ne(a,b,e,c,void 0)}function Re(a){return a[3]-a[1]}function Ue(a,b){var c=Le();Ve(a,b)&&(c[0]=a[0]>b[0]?a[0]:b[0],c[1]=a[1]>b[1]?a[1]:b[1],c[2]=a[2]<b[2]?a[2]:b[2],c[3]=a[3]<b[3]?a[3]:b[3]);return c}
function Xe(a){return[a[0],a[3]]}function Qe(a){return a[2]-a[0]}function Ve(a,b){return a[0]<=b[2]&&a[2]>=b[0]&&a[1]<=b[3]&&a[3]>=b[1]};function Ye(a,b,c){return Math.min(Math.max(a,b),c)}var Ze="cosh"in Math?Math.cosh:function(a){a=Math.exp(a);return(a+1/a)/2};function $e(a,b,c){return a+"/"+b+"/"+c}function af(a){return $e(a[0],a[1],a[2])};function bf(a,b,c,d){this.A=a;this.S=b;this.K=c;this.J=d}k=bf.prototype;k.contains=function(a){return this.tc(a[1],a[2])};k.tc=function(a,b){return this.A<=a&&a<=this.S&&this.K<=b&&b<=this.J};k.extend=function(a){a.A<this.A&&(this.A=a.A);a.S>this.S&&(this.S=a.S);a.K<this.K&&(this.K=a.K);a.J>this.J&&(this.J=a.J)};k.Pb=function(){return this.J-this.K+1};k.zb=function(){return[this.Rb(),this.Pb()]};k.Rb=function(){return this.S-this.A+1};/*

 Latitude/longitude spherical geodesy formulae taken from
 http://www.movable-type.co.uk/scripts/latlong.html
 Licensed under CC-BY-3.0.
*/
function cf(a){this.ef=a}function df(a,b){var c=a[1]*Math.PI/180,d=b[1]*Math.PI/180,e=(d-c)/2,f=(b[0]-a[0])*Math.PI/180/2,c=Math.sin(e)*Math.sin(e)+Math.sin(f)*Math.sin(f)*Math.cos(c)*Math.cos(d);return 2*ef.ef*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}
cf.prototype.offset=function(a,b,c){var d=a[1]*Math.PI/180;b/=this.ef;var e=Math.asin(Math.sin(d)*Math.cos(b)+Math.cos(d)*Math.sin(b)*Math.cos(c));return[180*(a[0]*Math.PI/180+Math.atan2(Math.sin(c)*Math.sin(b)*Math.cos(d),Math.cos(b)-Math.sin(d)*Math.sin(e)))/Math.PI,180*e/Math.PI]};var ef=new cf(6370997);var ff={};ff.degrees=2*Math.PI*ef.ef/360;ff.ft=.3048;ff.m=1;ff["us-ft"]=1200/3937;function gf(a){this.tb=a.code;this.nb=a.units;this.N=void 0!==a.extent?a.extent:null;this.jd=void 0!==a.global?a.global:!1;this.le=!(!this.jd||!this.N);this.Uh=void 0!==a.Qb?a.Qb:this.Vh;this.Pf=null}gf.prototype.j=function(){return this.N};
gf.prototype.Vh=function(a,b){if("degrees"==this.nb)return a;var c=hf(this,jf("EPSG:4326")),d=[b[0]-a/2,b[1],b[0]+a/2,b[1],b[0],b[1]-a/2,b[0],b[1]+a/2],d=c(d,d,2),c=(df(d.slice(0,2),d.slice(2,4))+df(d.slice(4,6),d.slice(6,8)))/2,d=ff[this.nb];void 0!==d&&(c/=d);return c};gf.prototype.Qb=function(a,b){return this.Uh(a,b)};var kf={},lf={};function mf(a){nf(a);a.forEach(function(b){a.forEach(function(a){b!==a&&of(b,a,pf)})})}function qf(a){kf[a.tb]=a;of(a,a,pf)}
function nf(a){var b=[];a.forEach(function(a){b.push(qf(a))})}function rf(a){return a?C(a)?jf(a):a:jf("EPSG:3857")}function of(a,b,c){a=a.tb;b=b.tb;fb(lf,a)||(lf[a]={});lf[a][b]=c}function jf(a){return a instanceof gf?a:C(a)?kf[a]:null}function sf(a,b){return a===b?!0:a.tb===b.tb?a.nb===b.nb:hf(a,b)===pf}function tf(a,b){var c=jf(a),d=jf(b);return hf(c,d)}function hf(a,b){var c=a.tb,d=b.tb,e;fb(lf,c)&&fb(lf[c],d)&&(e=lf[c][d]);void 0===e&&(e=uf);return e}
function uf(a,b){if(void 0!==b&&a!==b){for(var c=0,d=a.length;c<d;++c)b[c]=a[c];a=b}return a}function pf(a,b){var c;if(void 0!==b){c=0;for(var d=a.length;c<d;++c)b[c]=a[c];c=b}else c=a.slice();return c};function vf(a){Y.call(this);this.Ua=jf(a.projection);this.th=void 0!==a.Na?a.Na:null;this.Wi=a.ra;this.Uj=void 0!==a.state?a.state:"ready";this.lk=void 0!==a.Ib?a.Ib:!1}K(vf,Y);vf.prototype.I=function(){return this.Uj};function wf(a){Y.call(this);var b=jb(a);b.opacity=void 0!==a.opacity?a.opacity:1;b.visible=void 0!==a.visible?a.visible:!0;b.zIndex=void 0!==a.zIndex?a.zIndex:0;b.maxResolution=void 0!==a.Sa?a.Sa:Infinity;b.minResolution=void 0!==a.Ha?a.Ha:0;this.Nc(b)}K(wf,Y);function xf(a){var b=a.get("opacity"),c=a.Vf(),d=a.get("visible"),e=a.j(),f=a.get("zIndex"),g=a.get("maxResolution"),h=a.get("minResolution");return{xd:a,opacity:Ye(b,0,1),Ng:c,visible:d,Zi:!0,extent:e,zIndex:f,Sa:g,Ha:Math.max(h,0)}}
wf.prototype.j=function(){return this.get("extent")};function yf(a,b,c,d,e,f){U.call(this,a,b);this.vectorContext=c;this.frameState=d;this.context=e;this.glContext=f}K(yf,U);function zf(a){var b=jb(a);delete b.source;wf.call(this,b);this.Rd=this.Xe=this.We=null;a.map&&this.setMap(a.map);V(this,xd("source"),this.xi,!1,this);this.set("source",a.source?a.source:null)}K(zf,wf);k=zf.prototype;k.Ee=function(a){a=a?a:[];a.push(xf(this));return a};function Af(a){return a.get("source")||null}k.Vf=function(){var a=Af(this);return a?a.I():"undefined"};k.wi=function(){this.F()};
k.xi=function(){this.Rd&&(W(this.Rd),this.Rd=null);var a=Af(this);a&&(this.Rd=V(a,"change",this.wi,!1,this));this.F()};k.setMap=function(a){W(this.We);this.We=null;a||this.F();W(this.Xe);this.Xe=null;a&&(this.We=V(a,"precompose",function(a){var c=xf(this);c.Zi=!1;c.zIndex=Infinity;a.frameState.Ad.push(c);a.frameState.zd[I(this)]=c},!1,this),this.Xe=V(this,"change",a.render,!1,a),this.F())};function Bf(a,b){X.call(this);this.l=a;this.state=b}K(Bf,X);Bf.prototype.F=function(){this.dispatchEvent("change")};Bf.prototype.getKey=function(){return I(this).toString()};Bf.prototype.I=function(){return this.state};function Cf(){this.g=0;this.uc={};this.ma=this.ta=null}k=Cf.prototype;k.clear=function(){this.g=0;this.uc={};this.ma=this.ta=null};k.Aa=function(a){return this.uc.hasOwnProperty(a)};k.forEach=function(a,b){for(var c=this.ta;c;)a.call(b,c.mc,c.Pe,this),c=c.sa};k.get=function(a){a=this.uc[a];if(a===this.ma)return a.mc;a===this.ta?(this.ta=this.ta.sa,this.ta.ib=null):(a.sa.ib=a.ib,a.ib.sa=a.sa);a.sa=null;a.ib=this.ma;this.ma=this.ma.sa=a;return a.mc};k.yc=function(){return this.g};
k.pa=function(){var a=Array(this.g),b=0,c;for(c=this.ma;c;c=c.ib)a[b++]=c.Pe;return a};k.ka=function(){var a=Array(this.g),b=0,c;for(c=this.ma;c;c=c.ib)a[b++]=c.mc;return a};k.pop=function(){var a=this.ta;delete this.uc[a.Pe];a.sa&&(a.sa.ib=null);this.ta=a.sa;this.ta||(this.ma=null);--this.g;return a.mc};k.set=function(a,b){var c={Pe:a,sa:null,ib:this.ma,mc:b};this.ma?this.ma.sa=c:this.ta=c;this.ma=c;this.uc[a]=c;++this.g};function Df(a){Cf.call(this);this.Fi=void 0!==a?a:2048}K(Df,Cf);Df.prototype.sb=function(){return this.yc()>this.Fi};Df.prototype.Nb=function(a){for(var b,c;this.sb()&&!(b=this.ta.mc,c=b.l[0].toString(),c in a&&a[c].contains(b.l));)this.pop().ze()};function Ef(a,b,c){var d=a.length;if(a[0]<=b)return 0;if(!(b<=a[d-1]))if(0<c)for(c=1;c<d;++c){if(a[c]<b)return c-1}else if(0>c)for(c=1;c<d;++c){if(a[c]<=b)return c}else for(c=1;c<d;++c){if(a[c]==b)return c;if(a[c]<b)return a[c-1]-b<b-a[c]?c-1:c}return d-1};function Ff(a){this.Ta=void 0!==a.Ta?a.Ta:0;this.Pd=a.Fb;this.hb=this.Pd.length-1;this.dc=void 0!==a.origin?a.origin:null;this.Ye=null;void 0!==a.uj&&(this.Ye=a.uj);var b=a.extent;void 0===b||this.dc||this.Ye||(this.dc=Xe(b));this.rf=null;void 0!==a.ak&&(this.rf=a.ak);this.Ug=void 0!==a.Rc?a.Rc:this.rf?null:256;this.N=void 0!==b?b:null;this.Ob=null;void 0!==a.sizes?this.Ob=a.sizes.map(function(a){return new bf(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1))},this):b&&Gf(this,
b);this.Gb=[0,0]}var Hf=[0,0,0];function If(a,b,c,d,e){e=Jf(a,b,e);for(b=b[0]-1;b>=a.Ta;){if(c.call(null,b,Kf(a,e,b,d)))return!0;--b}return!1}Ff.prototype.j=function(){return this.N};Ff.prototype.Ac=function(a){return this.dc?this.dc:this.Ye[a]};Ff.prototype.h=function(a){return this.Pd[a]};function Lf(a,b,c,d){return b[0]<a.hb?(d=Jf(a,b,d),Kf(a,d,b[0]+1,c)):null}
function Mf(a,b,c,d){Nf(a,b[0],b[1],c,!1,Hf);var e=Hf[1],f=Hf[2];Nf(a,b[2],b[3],c,!0,Hf);a=Hf[1];b=Hf[2];void 0!==d?(d.A=e,d.S=a,d.K=f,d.J=b):d=new bf(e,a,f,b);return d}function Kf(a,b,c,d){c=a.h(c);return Mf(a,b,c,d)}function Of(a,b){var c=a.Ac(b[0]),d=a.h(b[0]),e=Je(Pf(a,b[0]),a.Gb);return[c[0]+(b[1]+.5)*e[0]*d,c[1]+(b[2]+.5)*e[1]*d]}function Jf(a,b,c){var d=a.Ac(b[0]),e=a.h(b[0]);a=Je(Pf(a,b[0]),a.Gb);var f=d[0]+b[1]*a[0]*e;b=d[1]+b[2]*a[1]*e;return Ne(f,b,f+a[0]*e,b+a[1]*e,c)}
function Nf(a,b,c,d,e,f){var g=Qf(a,d),h=d/a.h(g),l=a.Ac(g);a=Je(Pf(a,g),a.Gb);b=h*Math.floor((b-l[0])/d+(e?.5:0))/a[0];c=h*Math.floor((c-l[1])/d+(e?0:.5))/a[1];e?(b=Math.ceil(b)-1,c=Math.ceil(c)-1):(b=Math.floor(b),c=Math.floor(c));e=b;void 0!==f?(f[0]=g,f[1]=e,f[2]=c):f=[g,e,c];return f}function Rf(a,b,c){c=a.h(c);return Nf(a,b[0],b[1],c,!1,void 0)}function Pf(a,b){return a.Ug?a.Ug:a.rf[b]}function Qf(a,b){var c=Ef(a.Pd,b,0);return Ye(c,a.Ta,a.hb)}
function Gf(a,b){for(var c=a.Pd.length,d=Array(c),e=a.Ta;e<c;++e)d[e]=Kf(a,b,e);a.Ob=d}function Sf(a){var b=a.Pf;if(!b){for(var b=Tf(a),c=Re(b),d=Qe(b),e=Je(256),c=Math.max(d/e[0],c/e[1]),d=Array(43),e=0;43>e;++e)d[e]=c/Math.pow(2,e);b=new Ff({extent:b,origin:Xe(b),Fb:d,Rc:void 0});a.Pf=b}return b}function Tf(a){a=jf(a);var b=a.j();b||(a=180*ff.degrees/ff[a.nb],b=Ne(-a,-a,a,a));return b};function Uf(a){vf.call(this,{Na:a.Na,extent:a.extent,ra:a.ra,projection:a.projection,state:a.state,Ib:a.Ib});this.tj=void 0!==a.Fc?a.Fc:!1;this.Sg=void 0!==a.lc?a.lc:1;this.fa=void 0!==a.fa?a.fa:null;this.ea=new Df(a.Gf);this.Xg=[0,0]}K(Uf,vf);k=Uf.prototype;k.sb=function(){return this.ea.sb()};k.Nb=function(a,b){var c=this.Bc(a);c&&c.Nb(b)};
function Vf(a,b,c,d,e){b=a.Bc(b);if(!b)return!1;for(var f=!0,g,h,l=d.A;l<=d.S;++l)for(var m=d.K;m<=d.J;++m)g=a.ed(c,l,m),h=!1,b.Aa(g)&&(g=b.get(g),(h=2===g.I())&&(h=!1!==e(g))),h||(f=!1);return f}k.ed=$e;k.eb=function(a){return this.fa?this.fa:Sf(a)};k.Bc=function(a){var b=this.Ua;return b&&!sf(b,a)?null:this.ea};function Wf(a,b,c){c=a.eb(c);b=Je(Pf(c,b),a.Xg);c=a.Sg;a=a.Xg;void 0===a&&(a=[0,0]);a[0]=b[0]*c+.5|0;a[1]=b[1]*c+.5|0;return a}k.ah=Cd;function Xf(a,b){U.call(this,a);this.tile=b}K(Xf,U);function Yf(a,b,c,d,e,f,g,h){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;0===b&&0===c||sd(a,b,c);1==d&&1==e||rd(a,a[0]*d,a[1]*d,a[2]*d,a[3]*d,a[4]*e,a[5]*e,a[6]*e,a[7]*e,1*a[8],1*a[9],1*a[10],1*a[11],a[12],a[13],a[14],a[15]);if(0!==f){b=a[0];c=a[1];d=a[2];e=a[3];var l=a[4],m=a[5],n=a[6],p=a[7],r=Math.cos(f);f=Math.sin(f);a[0]=b*r+l*f;a[1]=c*r+m*f;a[2]=d*r+n*f;a[3]=e*r+p*f;a[4]=b*-f+l*r;a[5]=c*-f+m*r;a[6]=d*-f+n*r;a[7]=e*-f+
p*r}0===g&&0===h||sd(a,g,h);return a}function Zf(a,b,c){var d=a[1],e=a[5],f=a[13],g=b[0];b=b[1];c[0]=a[0]*g+a[4]*b+a[12];c[1]=d*g+e*b+f;return c};function $f(a){td.call(this);this.Te=a}K($f,td);function ag(a,b,c){return function(d,e){return Vf(a,b,d,e,function(a){c[d]||(c[d]={});c[d][a.l.toString()]=a})}}function bg(a,b){b.sb()&&a.Ic.push(la(function(a,b,e){b=I(a).toString();a.Nb(e.i.projection,e.ae[b])},b))}function cg(a,b){var c=b.Wi;void 0!==c&&(C(c)?a.cc[c]="":ga(c)&&(a.cc[c.src]=c.href))}function dg(a,b,c,d){b=I(b).toString();c=c.toString();b in a?c in a[b]?a[b][c].extend(d):a[b][c]=d:(a[b]={},a[b][c]=d)}
function eg(a,b,c){return[b*(Math.round(a[0]/b)+c[0]%2/2),b*(Math.round(a[1]/b)+c[1]%2/2)]}function fg(a,b,c,d,e,f,g,h){var l=I(b).toString();l in a.oc||(a.oc[l]={});var m=a.oc[l];a=a.$j;var n=c.Ta,p,r,t,v,z,q;for(q=g;q>=n;--q)for(r=Kf(c,f,q,r),t=c.h(q),v=r.A;v<=r.S;++v)for(z=r.K;z<=r.J;++z)g-q<=h?(p=gg(b,q,v,z,d,e),0==p.I()&&(m[af(p.l)]=!0,p.getKey()in a.Jc||a.enqueue([p,l,Of(c,p.l),t]))):b.ah(q,v,z,e)};function hg(){this.rb={};this.Wc=0;this.aj=32}hg.Th=function(){return hg.gg?hg.gg:hg.gg=new hg};hg.prototype.clear=function(){this.rb={};this.Wc=0};hg.prototype.get=function(a,b){var c=b+":"+a;return c in this.rb?this.rb[c]:null};hg.prototype.set=function(a,b,c){this.rb[b+":"+a]=c;++this.Wc};function ig(a,b){Sa.call(this);this.a=b;this.Ga={};this.Se={}}K(ig,Sa);
function jg(a){var b=a.i,c=a.Kb;Yf(c,a.size[0]/2,a.size[1]/2,1/b.resolution,-1/b.resolution,-b.rotation,-b.center[0],-b.center[1]);a=a.wg;var b=c[0],d=c[1],e=c[2],f=c[3],g=c[4],h=c[5],l=c[6],m=c[7],n=c[8],p=c[9],r=c[10],t=c[11],v=c[12],z=c[13],q=c[14],c=c[15],w=b*h-d*g,B=b*l-e*g,D=b*m-f*g,E=d*l-e*h,A=d*m-f*h,G=e*m-f*l,T=n*z-p*v,O=n*q-r*v,Q=n*c-t*v,F=p*q-r*z,y=p*c-t*z,L=r*c-t*q,P=w*L-B*y+D*F+E*Q-A*O+G*T;0!=P&&(P=1/P,a[0]=(h*L-l*y+m*F)*P,a[1]=(-d*L+e*y-f*F)*P,a[2]=(z*G-q*A+c*E)*P,a[3]=(-p*G+r*A-t*E)*
P,a[4]=(-g*L+l*Q-m*O)*P,a[5]=(b*L-e*Q+f*O)*P,a[6]=(-v*G+q*D-c*B)*P,a[7]=(n*G-r*D+t*B)*P,a[8]=(g*y-h*Q+m*T)*P,a[9]=(-b*y+d*Q-f*T)*P,a[10]=(v*A-z*D+c*w)*P,a[11]=(-n*A+p*D-t*w)*P,a[12]=(-g*F+h*O-l*T)*P,a[13]=(b*F-d*O+e*T)*P,a[14]=(-v*E+z*B-q*w)*P,a[15]=(n*E-p*B+r*w)*P)}ig.prototype.f=function(){ab(this.Ga,Xa);ig.G.f.call(this)};
function kg(){var a=hg.Th();if(a.Wc>a.aj){var b=0,c,d;for(c in a.rb){d=a.rb[c];var e;if(e=0===(b++&3))Kb(d)?d=d.hasListener(void 0,void 0):(d=Xb(d),d=!!d&&d.hasListener(void 0,void 0)),e=!d;e&&(delete a.rb[c],--a.Wc)}}}function lg(a,b){var c=I(b).toString();if(c in a.Ga)return a.Ga[c];var d=a.Of(b);a.Ga[c]=d;a.Se[c]=V(d,"change",a.ii,!1,a);return d}ig.prototype.ii=function(){this.a.render()};ig.prototype.gf=Cd;
ig.prototype.Lj=function(a,b){for(var c in this.Ga)if(!(b&&c in b.zd)){var d=c,e=this.Ga[d];delete this.Ga[d];W(this.Se[d]);delete this.Se[d];Xa(e)}};function mg(a,b){for(var c in a.Ga)if(!(c in b.zd)){b.Ic.push(J(a.Lj,a));break}}function Pa(a,b){return a.zIndex-b.zIndex};function ng(a,b){this.Bg=a;this.Oe=b;this.Ba=[];this.gc=[];this.Jc={}}ng.prototype.clear=function(){this.Ba.length=0;this.gc.length=0;ib(this.Jc)};ng.prototype.enqueue=function(a){var b=this.Bg(a);Infinity!=b&&(this.Ba.push(a),this.gc.push(b),this.Jc[this.Oe(a)]=!0,og(this,0,this.Ba.length-1))};ng.prototype.yc=function(){return this.Ba.length};ng.prototype.rd=function(){return 0===this.Ba.length};
function pg(a,b){for(var c=a.Ba,d=a.gc,e=c.length,f=c[b],g=d[b],h=b;b<e>>1;){var l=2*b+1,m=2*b+2,l=m<e&&d[m]<d[l]?m:l;c[b]=c[l];d[b]=d[l];b=l}c[b]=f;d[b]=g;og(a,h,b)}function og(a,b,c){var d=a.Ba;a=a.gc;for(var e=d[c],f=a[c];c>b;){var g=c-1>>1;if(a[g]>f)d[c]=d[g],a[c]=a[g],c=g;else break}d[c]=e;a[c]=f};function qg(a,b){ng.call(this,function(b){return a.apply(null,b)},function(a){return a[0].getKey()});this.Yj=b;this.Yd=0}K(qg,ng);qg.prototype.ld=function(a){a=a.target;var b=a.I();if(2===b||3===b||4===b)bc(a,"change",this.ld,!1,this),--this.Yd,this.Yj()};function rg(a){return function(b){if(b)return[Ye(b[0],a[0],a[2]),Ye(b[1],a[1],a[3])]}}function sg(a){return a};function tg(a){return function(b,c,d){if(void 0!==b)return b=Ef(a,b,d),b=Ye(b+c,0,a.length-1),a[b]}}function ug(a,b,c){return function(d,e,f){if(void 0!==d)return d=Math.max(Math.floor(Math.log(b/d)/Math.log(a)+(0<f?0:0>f?1:.5))+e,0),void 0!==c&&(d=Math.min(d,c)),b/Math.pow(a,d)}};function vg(a){if(void 0!==a)return 0}function wg(a,b){if(void 0!==a)return a+b}function xg(a){var b=2*Math.PI/a;return function(a,d){if(void 0!==a)return a=Math.floor((a+d)/b+.5)*b}}function yg(){var a=5*Math.PI/180;return function(b,c){if(void 0!==b)return Math.abs(b+c)<=a?0:b+c}};function zg(a,b,c){this.center=a;this.resolution=b;this.rotation=c};function Ag(){Y.call(this);this.N=Le();this.Sf=-1}K(Ag,Y);Ag.prototype.tc=gc;Ag.prototype.j=function(a){this.Sf!=this.Wa&&(this.N=Oe(this.$,this.$.length,this.va,this.N),this.Sf=this.Wa);var b=this.N;a?(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3]):a=b;return a};Ag.prototype.transform=function(a,b){var c=tf(a,b);this.$&&(c(this.$,this.$,this.va),this.F());return this};function Bg(a,b,c,d,e,f){var g=e[0],h=e[1],l=e[4],m=e[5],n=e[12];e=e[13];for(var p=f?f:[],r=0;b<c;b+=d){var t=a[b],v=a[b+1];p[r++]=g*t+l*v+n;p[r++]=h*t+m*v+e}f&&p.length!=r&&(p.length=r);return p};function Cg(){Ag.call(this);this.Bd="XY";this.va=2;this.$=null}K(Cg,Ag);function Dg(a){if("XY"==a)return 2;if("XYZ"==a||"XYM"==a)return 3;if("XYZM"==a)return 4}Cg.prototype.tc=gc;Cg.prototype.cb=function(){return this.$};Cg.prototype.Ea=function(){return this.va};Cg.prototype.translate=function(a,b){var c=this.cb();if(c){var d=this.Ea(),e=c.length,f=c?c:[],g=0,h,l;for(h=0;h<e;h+=d)for(f[g++]=c[h]+a,f[g++]=c[h+1]+b,l=h+2;l<h+d;++l)f[g++]=c[l];c&&f.length!=g&&(f.length=g);this.F()}};function Eg(a,b,c,d,e,f){for(var g=!1,h=a[c-d],l=a[c-d+1];b<c;b+=d){var m=a[b],n=a[b+1];l>f!=n>f&&e<(m-h)*(f-l)/(n-l)+h&&(g=!g);h=m;l=n}return g}function Fg(a,b,c,d,e){if(0===b.length||!Eg(a,0,b[0],c,d,e))return!1;var f,g;f=1;for(g=b.length;f<g;++f)if(Eg(a,b[f-1],b[f],c,d,e))return!1;return!0};function Gg(a,b,c,d){for(var e=0,f=a[c-d],g=a[c-d+1];b<c;b+=d)var h=a[b],l=a[b+1],e=e+(h-f)*(l+g),f=h,g=l;return 0<e};function Hg(a,b){Cg.call(this);this.oa=[];this.Tf=-1;this.Uf=null;this.tg=-1;this.Gc=null;Ig(this,a,b)}K(Hg,Cg);Hg.prototype.clone=function(){var a=new Hg(null);Jg(a,this.Bd,this.$.slice(),this.oa.slice());return a};Hg.prototype.tc=function(a,b){return Fg(this.zc(),this.oa,this.va,a,b)};
Hg.prototype.zc=function(){if(this.tg!=this.Wa){var a=this.$,b;a:{b=this.oa;var c=0,d,e;d=0;for(e=b.length;d<e;++d){var f=b[d],c=Gg(a,c,f,this.va);if(0===d){if(!c){b=!1;break a}}else if(c){b=!1;break a}c=f}b=!0}if(b)this.Gc=a;else{b=a=this.Gc=a.slice();d=this.oa;e=this.va;for(var g=0,f=0,c=d.length;f<c;++f){var h=d[f],l=Gg(b,g,h,e);if(0===f?!l:l)for(var l=b,m=h,n=e;g<m-n;){var p;for(p=0;p<n;++p){var r=l[g+p];l[g+p]=l[m-n+p];l[m-n+p]=r}g+=n;m-=n}g=h}a.length=g}this.tg=this.Wa}return this.Gc};
Hg.prototype.hd=function(){return"Polygon"};
function Ig(a,b,c){if(b){a:{var d=b;if(c)d=Dg(c);else{for(c=0;2>c;++c){if(0===d.length){a.Bd="XY";a.va=2;break a}d=d[0]}d=d.length;c=2==d?"XY":3==d?"XYZ":4==d?"XYZM":void 0}a.Bd=c;a.va=d}a.$||(a.$=[]);c=a.$;var d=a.va,e=a.oa,f=0,e=e?e:[],g=0,h,l;h=0;for(l=b.length;h<l;++h){var m;m=c;for(var n=b[h],p=d,r=void 0,t=void 0,r=0,t=n.length;r<t;++r){var v=n[r],z;for(z=0;z<p;++z)m[f++]=v[z]}m=f;f=e[g++]=m}e.length=g;a.$.length=0===e.length?0:e[e.length-1];a.F()}else Jg(a,"XY",null,a.oa)}
function Jg(a,b,c,d){a.va=Dg(b);a.Bd=b;a.$=c;a.oa=d;a.F()};function Kg(a){Y.call(this);a=a||{};this.He=[0,0];var b={};b.center=void 0!==a.center?a.center:null;this.Ua=rf(a.projection);var c,d,e,f=void 0!==a.Ta?a.Ta:0;c=void 0!==a.hb?a.hb:28;var g=void 0!==a.gh?a.gh:2;if(void 0!==a.Fb)c=a.Fb,d=c[0],e=c[c.length-1],c=tg(c);else{d=rf(a.projection);e=d.j();var h=(e?Math.max(Qe(e),Re(e)):360*ff.degrees/ff[d.nb])/256/Math.pow(2,0),l=h/Math.pow(2,28);d=a.Sa;void 0!==d?f=0:d=h/Math.pow(g,f);e=a.Ha;void 0===e&&(e=void 0!==a.hb?void 0!==a.Sa?d/Math.pow(g,c):h/Math.pow(g,
c):l);c=f+Math.floor(Math.log(d/e)/Math.log(g));e=d/Math.pow(g,c-f);c=ug(g,d,c-f)}this.Fd=d;this.bj=e;this.Hd=f;f=void 0!==a.extent?rg(a.extent):sg;(void 0!==a.Mh?a.Mh:1)?(d=a.ue,d=void 0===d||!0===d?yg():!1===d?wg:H(d)?xg(d):wg):d=vg;this.sc=new zg(f,c,d);void 0!==a.resolution?b.resolution=a.resolution:void 0!==a.zoom&&(b.resolution=this.Y(this.Fd,a.zoom-this.Hd));b.rotation=void 0!==a.rotation?a.rotation:0;this.Nc(b)}K(Kg,Y);
function Lg(a,b,c){var d,e=Mg(a);a=a.h();void 0!==e&&void 0!==a&&(d=[c[0]-b*(c[0]-e[0])/a,c[1]-b*(c[1]-e[1])/a]);return d}k=Kg.prototype;k.Y=function(a,b,c){return this.sc.resolution(a,b||0,c||0)};k.ue=function(a,b){return this.sc.rotation(a,b||0)};function Mg(a){return a.get("center")}k.h=function(){return this.get("resolution")};function Ng(a){return a.get("rotation")}
k.I=function(){var a=Mg(this),b=this.Ua,c=this.h(),d=Ng(this);return{center:[Math.round(a[0]/c)*c,Math.round(a[1]/c)*c],projection:void 0!==b?b:null,resolution:c,rotation:d}};
function Og(a,b,c){if(!(b instanceof Cg)){var d=b[0],e=b[1],f=b[2],g=b[3],d=[d,e,d,g,f,g,f,e,d,e],e=new Hg(null);Jg(e,"XY",d,[d.length]);b=e}var e={},d=void 0!==e.padding?e.padding:[0,0,0,0],h=void 0!==e.Y?e.Y:!0,f=void 0!==e.rj?e.rj:!1,l;l=void 0!==e.Ha?e.Ha:void 0!==e.hb?a.Y(a.Fd,e.hb-a.Hd,0):0;var m=b.cb(),g=Ng(a),e=Math.cos(-g),g=Math.sin(-g),n=Infinity,p=Infinity,r=-Infinity,t=-Infinity;b=b.Ea();for(var v=0,z=m.length;v<z;v+=b)var q=m[v]*e-m[v+1]*g,w=m[v]*g+m[v+1]*e,n=Math.min(n,q),p=Math.min(p,
w),r=Math.max(r,q),t=Math.max(t,w);m=[n,p,r,t];c=[c[0]-d[1]-d[3],c[1]-d[0]-d[2]];c=Math.max(Qe(m)/c[0],Re(m)/c[1]);c=isNaN(c)?l:Math.max(c,l);h&&(h=a.Y(c,0,0),!f&&h<c&&(h=a.Y(h,-1,0)),c=h);Pg(a,c);g=-g;f=(n+r)/2+(d[1]-d[3])/2*c;c=(p+t)/2+(d[0]-d[2])/2*c;Qg(a,[f*e-c*g,c*e+f*g])}k.Me=function(){return!!Mg(this)&&void 0!==this.h()};k.rotate=function(a,b){if(void 0!==b){var c,d=Mg(this);void 0!==d&&(c=[d[0]-b[0],d[1]-b[1]],Ed(c,a-Ng(this)),Dd(c,b));Qg(this,c)}this.set("rotation",a)};
function Qg(a,b){a.set("center",b)}function Rg(a,b){a.He[1]+=b}function Pg(a,b){a.set("resolution",b)};function Sg(a){Y.call(this);this.element=a.element?a.element:null;this.a=this.kf=null;this.Cd=[];this.render=a.render?a.render:Cd;a.target&&this.Mg(a.target)}K(Sg,Y);Sg.prototype.f=function(){Ic(this.element);Sg.G.f.call(this)};Sg.prototype.setMap=function(a){this.a&&Ic(this.element);0<this.Cd.length&&(this.Cd.forEach(W),this.Cd.length=0);if(this.a=a)(this.kf?this.kf:a.Ze).appendChild(this.element),this.render!==Cd&&this.Cd.push(V(a,"postrender",this.render,!1,this)),a.render()};
Sg.prototype.Mg=function(a){this.kf=Ac(a)};function Tg(a){a=a?a:{};this.$d=document.createElement("UL");this.Dd=document.createElement("LI");this.$d.appendChild(this.Dd);fd(this.Dd,!1);this.Jb=void 0!==a.collapsed?a.collapsed:!0;this.Zc=void 0!==a.yh?a.yh:!0;this.Zc||(this.Jb=!1);var b=a.className?a.className:"ol-attribution",c=a.sf?a.sf:"Attributions",d=a.xh?a.xh:"\u00bb";this.qe=C(d)?Ec("SPAN",{},d):d;d=a.label?a.label:"i";this.qa=C(d)?Ec("SPAN",{},d):d;c=Ec("BUTTON",{type:"button",title:c},this.Zc&&!this.Jb?this.qe:this.qa);V(c,"click",
this.Sb,!1,this);V(c,["mouseout",Eb],function(){this.blur()},!1);b=Ec("DIV",b+" ol-unselectable ol-control"+(this.Jb&&this.Zc?" ol-collapsed":"")+(this.Zc?"":" ol-uncollapsible"),this.$d,c);Sg.call(this,{element:b,render:a.render?a.render:Ug,target:a.target});this.L=!0;this.qb={};this.Za={};this.Vi={}}K(Tg,Sg);
function Ug(a){if(a=a.frameState){var b,c,d,e,f,g,h,l,m,n,p=a.Ad,r=jb(a.Na),t={},v=a.i.projection;c=0;for(b=p.length;c<b;c++)if(g=Af(p[c].xd))if(n=I(g).toString(),m=g.th)for(d=0,e=m.length;d<e;d++)if(h=m[d],l=I(h).toString(),!(l in r)){if(f=a.ae[n]){var z=g.eb(v);f=h.Mk(f,z,v)}else f=!1;f?(l in t&&delete t[l],r[l]=h):t[l]=h}b=[r,t];c=b[0];b=b[1];for(var q in this.qb)q in c?(this.Za[q]||(fd(this.qb[q],!0),this.Za[q]=!0),delete c[q]):q in b?(this.Za[q]&&(fd(this.qb[q],!1),delete this.Za[q]),delete b[q]):
(Ic(this.qb[q]),delete this.qb[q],delete this.Za[q]);for(q in c)d=document.createElement("LI"),d.innerHTML=c[q].Rh(),this.$d.appendChild(d),this.qb[q]=d,this.Za[q]=!0;for(q in b)d=document.createElement("LI"),d.innerHTML=b[q].Rh(),fd(d,!1),this.$d.appendChild(d),this.qb[q]=d;q=!hb(this.Za)||!hb(a.cc);this.L!=q&&(fd(this.element,q),this.L=q);q&&hb(this.Za)?Qc(this.element,"ol-logo-only"):Rc(this.element,"ol-logo-only");var w;a=a.cc;q=this.Vi;for(w in q)w in a||(Ic(q[w]),delete q[w]);for(var B in a)B in
q||(w=new Image,w.src=B,c=a[B],""===c?c=w:(c=Ec("A",{href:c}),c.appendChild(w)),this.Dd.appendChild(c),q[B]=c);fd(this.Dd,!hb(a))}else this.L&&(fd(this.element,!1),this.L=!1)}Tg.prototype.Sb=function(a){a.preventDefault();a=this.element;Pc(a,"ol-collapsed")?Rc(a,"ol-collapsed"):Qc(a,"ol-collapsed");if(this.Jb){a=this.qa;var b=a.parentNode;b&&b.replaceChild(this.qe,a)}else a=this.qe,(b=a.parentNode)&&b.replaceChild(this.qa,a);this.Jb=!this.Jb};function Vg(a){return 1-Math.pow(1-a,3)}function Wg(a){return 3*a*a-2*a*a*a}function Xg(a){return a};function Yg(a){var b=a.source,c=a.start?a.start:Date.now(),d=b[0],e=b[1],f=void 0!==a.duration?a.duration:1E3,g=a.M?a.M:Wg;return function(a,b){if(b.time<c)return b.pb=!0,b.O[0]+=1,!0;if(b.time<c+f){var m=1-g((b.time-c)/f),n=d-b.i.center[0],p=e-b.i.center[1];b.pb=!0;b.i.center[0]+=m*n;b.i.center[1]+=m*p;b.O[0]+=1;return!0}return!1}}
function Zg(a){var b=a.rotation?a.rotation:0,c=a.start?a.start:Date.now(),d=void 0!==a.duration?a.duration:1E3,e=a.M?a.M:Wg,f=a.anchor?a.anchor:null;return function(a,h){if(h.time<c)return h.pb=!0,h.O[0]+=1,!0;if(h.time<c+d){var l=1-e((h.time-c)/d),l=(b-h.i.rotation)*l;h.pb=!0;h.i.rotation+=l;if(f){var m=h.i.center;m[0]-=f[0];m[1]-=f[1];Ed(m,l);Dd(m,f)}h.O[0]+=1;return!0}return!1}}
function $g(a){var b=a.resolution,c=a.start?a.start:Date.now(),d=void 0!==a.duration?a.duration:1E3,e=a.M?a.M:Wg;return function(a,g){if(g.time<c)return g.pb=!0,g.O[0]+=1,!0;if(g.time<c+d){var h=1-e((g.time-c)/d),l=b-g.i.resolution;g.pb=!0;g.i.resolution+=h*l;g.O[0]+=1;return!0}return!1}};function ah(a){a=a?a:{};var b=a.className?a.className:"ol-rotate",c=a.label?a.label:"\u21e7";this.qa=null;C(c)?this.qa=Ec("SPAN","ol-compass",c):(this.qa=c,Qc(this.qa,"ol-compass"));c=Ec("BUTTON",{"class":b+"-reset",type:"button",title:a.sf?a.sf:"Reset rotation"},this.qa);V(c,"click",ah.prototype.Sb,!1,this);b=Ec("DIV",b+" ol-unselectable ol-control",c);Sg.call(this,{element:b,render:a.render?a.render:bh,target:a.target});this.v=a.duration?a.duration:250;this.Ff=void 0!==a.uh?a.uh:!0;this.Lg=void 0;
this.Ff&&Qc(this.element,"ol-hidden")}K(ah,Sg);ah.prototype.Sb=function(a){a.preventDefault();a=this.a;var b=Z(a);if(b){var c=Ng(b);void 0!==c&&(0<this.v&&(c%=2*Math.PI,c<-Math.PI&&(c+=2*Math.PI),c>Math.PI&&(c-=2*Math.PI),a.ha(Zg({rotation:c,duration:this.v,M:Vg}))),b.set("rotation",0))}};
function bh(a){if(a=a.frameState){a=a.i.rotation;if(a!=this.Lg){var b="rotate("+a+"rad)";if(this.Ff){var c=this.element;0===a?Qc(c,"ol-hidden"):Rc(c,"ol-hidden")}this.qa.style.msTransform=b;this.qa.style.webkitTransform=b;this.qa.style.transform=b}this.Lg=a}};function ch(a){a=a?a:{};var b=a.className?a.className:"ol-zoom",c=a.ub?a.ub:1,d=a.pk?a.pk:"\u2212",e=a.qk?a.qk:"Zoom out",f=Ec("BUTTON",{"class":b+"-in",type:"button",title:a.nk?a.nk:"Zoom in"},a.mk?a.mk:"+");V(f,"click",la(ch.prototype.Sb,c),!1,this);d=Ec("BUTTON",{"class":b+"-out",type:"button",title:e},d);V(d,"click",la(ch.prototype.Sb,-c),!1,this);b=Ec("DIV",b+" ol-unselectable ol-control",f,d);Sg.call(this,{element:b,target:a.target});this.v=void 0!==a.duration?a.duration:250}K(ch,Sg);
ch.prototype.Sb=function(a,b){b.preventDefault();var c=this.a,d=Z(c);if(d){var e=d.h();e&&(0<this.v&&c.ha($g({resolution:e,duration:this.v,M:Vg})),c=d.Y(e,a),Pg(d,c))}};function dh(a,b,c){this.ye=a;this.Gd=b;this.Ah=c;this.na=[];this.Xb=this.ie=0}dh.prototype.update=function(a,b){this.na.push(a,b,Date.now())};dh.prototype.end=function(){if(6>this.na.length)return!1;var a=Date.now()-this.Ah,b=this.na.length-3;if(this.na[b+2]<a)return!1;for(var c=b-3;0<c&&this.na[c+2]>a;)c-=3;var a=this.na[b+2]-this.na[c+2],d=this.na[b]-this.na[c],b=this.na[b+1]-this.na[c+1];this.ie=Math.atan2(b,d);this.Xb=Math.sqrt(d*d+b*b)/a;return this.Xb>this.Gd};
dh.prototype.pan=function(a){var b=this.ye,c=this.Xb,d=this.Gd-c,e=Math.log(this.Gd/this.Xb)/this.ye;return Yg({source:a,duration:e,M:function(a){return c*(Math.exp(b*a*e)-1)/d}})};function eh(a){Y.call(this);this.a=null;this.setActive(!0);this.handleEvent=a.handleEvent}K(eh,Y);eh.prototype.setActive=function(a){this.set("active",a)};eh.prototype.setMap=function(a){this.a=a};function fh(a,b,c,d,e){if(void 0!==c){var f=Ng(b),g=Mg(b);void 0!==f&&g&&e&&0<e&&(a.ha(Zg({rotation:f,duration:e,M:Vg})),d&&a.ha(Yg({source:g,duration:e,M:Vg})));b.rotate(c,d)}}function gh(a,b,c,d,e){var f=b.h();c=b.Y(f,c,0);hh(a,b,c,d,e)}
function hh(a,b,c,d,e){if(c){var f=b.h(),g=Mg(b);void 0!==f&&g&&c!==f&&e&&0<e&&(a.ha($g({resolution:f,duration:e,M:Vg})),d&&a.ha(Yg({source:g,duration:e,M:Vg})));d&&(a=Lg(b,c,d),Qg(b,a));Pg(b,c)}};function ih(a){a=a?a:{};this.C=a.ub?a.ub:1;eh.call(this,{handleEvent:jh});this.v=a.duration?a.duration:250}K(ih,eh);function jh(a){var b=!1,c=a.U;if(a.type==Ae){var b=a.map,d=a.coordinate,c=c.shiftKey?-this.C:this.C,e=Z(b);gh(b,e,c,d,this.v);a.preventDefault();b=!0}return!b};function kh(a){a=a.U;return a.altKey&&!a.Kd&&a.shiftKey}function lh(a){a=a.U;return!a.altKey&&!a.Kd&&!a.shiftKey}function mh(a){a=a.U;return!a.altKey&&!a.Kd&&a.shiftKey}function nh(a){a=a.U.target.tagName;return"INPUT"!==a&&"SELECT"!==a&&"TEXTAREA"!==a}function oh(a){return"mouse"==a.xg.pointerType};function ph(a){a=a?a:{};eh.call(this,{handleEvent:a.handleEvent?a.handleEvent:qh});this.Zh=a.Tb?a.Tb:gc;this.$h=a.Ub?a.Ub:Cd;this.oi=a.ni?a.ni:Cd;this.Bi=a.Vb?a.Vb:gc;this.Wb=!1;this.Tc={};this.V=[]}K(ph,eh);function rh(a){for(var b=a.length,c=0,d=0,e=0;e<b;e++)c+=a[e].clientX,d+=a[e].clientY;return[c/b,d/b]}
function qh(a){if(!(a instanceof we))return!0;var b=!1,c=a.type;if(c===Fe||c===He||c===De)c=a.xg,a.type==De?delete this.Tc[c.pointerId]:a.type==Fe?this.Tc[c.pointerId]=c:c.pointerId in this.Tc&&(this.Tc[c.pointerId]=c),this.V=db(this.Tc);this.Wb&&(a.type==He?this.$h(a):a.type==De&&(this.Wb=this.Bi(a)));a.type==Fe?(this.Wb=a=this.Zh(a),b=this.Oc(a)):a.type==Ge&&this.oi(a);return!b}ph.prototype.Oc=function(a){return a};function sh(a){ph.call(this,{Tb:th,Ub:uh,Vb:vh});a=a?a:{};this.Pa=a.Pi;this.Zb=this.Ec=null;this.Oa=a.ia?a.ia:lh;this.pg=!1}K(sh,ph);function uh(a){var b=rh(this.V);this.Pa&&this.Pa.update(b[0],b[1]);if(this.Zb){var c=this.Zb[0]-b[0],d=b[1]-this.Zb[1];a=a.map;var e=Z(a),f=e.I(),d=c=[c,d],g=f.resolution;d[0]*=g;d[1]*=g;Ed(c,f.rotation);Dd(c,f.center);c=e.sc.center(c);a.render();Qg(e,c)}this.Zb=b}
function vh(a){a=a.map;var b=Z(a);if(0===this.V.length){if(!this.pg&&this.Pa&&this.Pa.end()){var c;c=this.Pa;c=(c.Gd-c.Xb)/c.ye;var d=this.Pa.ie,e=Mg(b);this.Ec=this.Pa.pan(e);a.ha(this.Ec);var f;(f=a.yb)?(e=e.slice(0,2),f=Zf(f.Kb,e,e)):f=null;c=a.xc([f[0]-c*Math.cos(d),f[1]-c*Math.sin(d)]);c=b.sc.center(c);Qg(b,c)}Rg(b,-1);a.render();return!1}this.Zb=null;return!0}
function th(a){if(0<this.V.length&&this.Oa(a)){var b=a.map,c=Z(b);this.Zb=null;this.Wb||Rg(c,1);b.render();this.Ec&&Ha(b.Md,this.Ec)&&(Qg(c,a.frameState.i.center),this.Ec=null);this.Pa&&(a=this.Pa,a.na.length=0,a.ie=0,a.Xb=0);this.pg=1<this.V.length;return!0}return!1}sh.prototype.Oc=gc;function wh(a){a=a?a:{};ph.call(this,{Tb:xh,Ub:yh,Vb:zh});this.Oa=a.ia?a.ia:kh;this.Ra=void 0;this.v=a.duration?a.duration:250}K(wh,ph);function yh(a){if(oh(a)){var b=a.map,c=b.zb();a=a.pixel;c=Math.atan2(c[1]/2-a[1],a[0]-c[0]/2);if(void 0!==this.Ra){a=c-this.Ra;var d=Z(b),e=Ng(d);b.render();fh(b,d,e-a)}this.Ra=c}}function zh(a){if(!oh(a))return!0;a=a.map;var b=Z(a);Rg(b,-1);var c=Ng(b),d=this.v,c=b.ue(c,0);fh(a,b,c,void 0,d);return!1}
function xh(a){return oh(a)&&Ib(a.U)&&this.Oa(a)?(a=a.map,Rg(Z(a),1),a.render(),this.Ra=void 0,!0):!1}wh.prototype.Oc=gc;function Ah(a){this.cd=null;this.D=document.createElement("div");this.D.style.position="absolute";this.D.className="ol-box "+a;this.ad=this.ua=this.a=null}K(Ah,Sa);Ah.prototype.f=function(){this.setMap(null);Ah.G.f.call(this)};function Bh(a){var b=a.ua,c=a.ad;a=a.D.style;a.left=Math.min(b[0],c[0])+"px";a.top=Math.min(b[1],c[1])+"px";a.width=Math.abs(c[0]-b[0])+"px";a.height=Math.abs(c[1]-b[1])+"px"}
Ah.prototype.setMap=function(a){if(this.a){this.a.$e.removeChild(this.D);var b=this.D.style;b.left=b.top=b.width=b.height="inherit"}(this.a=a)&&this.a.$e.appendChild(this.D)};function Ch(a){var b=a.ua,c=a.ad,b=[b,[b[0],c[1]],c,[c[0],b[1]]].map(a.a.xc,a.a);b[4]=b[0].slice();a.cd?Ig(a.cd,[b]):a.cd=new Hg([b])}Ah.prototype.dd=function(){return this.cd};function Dh(a,b){U.call(this,a);this.coordinate=b}K(Dh,U);function Eh(a){ph.call(this,{Tb:Fh,Ub:Gh,Vb:Hh});a=a?a:{};this.pc=new Ah(a.className||"ol-dragbox");this.ua=null;this.Oa=a.ia?a.ia:hc}K(Eh,ph);function Gh(a){if(oh(a)){var b=this.pc;a=a.pixel;b.ua=this.ua;b.ad=a;Ch(b);Bh(b)}}Eh.prototype.dd=function(){return this.pc.dd()};Eh.prototype.qg=Cd;
function Hh(a){if(!oh(a))return!0;this.pc.setMap(null);var b=a.pixel[0]-this.ua[0],c=a.pixel[1]-this.ua[1];64<=b*b+c*c&&(this.qg(a),this.dispatchEvent(new Dh("boxend",a.coordinate)));return!1}function Fh(a){if(oh(a)&&Ib(a.U)&&this.Oa(a)){this.ua=a.pixel;this.pc.setMap(a.map);var b=this.pc,c=this.ua;b.ua=this.ua;b.ad=c;Ch(b);Bh(b);this.dispatchEvent(new Dh("boxstart",a.coordinate));return!0}return!1};function Ih(a){a=a?a:{};var b=a.ia?a.ia:mh;this.v=void 0!==a.duration?a.duration:200;Eh.call(this,{ia:b,className:a.className||"ol-dragzoom"})}K(Ih,Eh);Ih.prototype.qg=function(){var a=this.a,b=Z(a),c=a.zb(),d=this.dd().j(),c=b.Y(Math.max(Qe(d)/c[0],Re(d)/c[1])),e=b.h(),f=Mg(b);a.ha($g({resolution:e,duration:this.v,M:Vg}));a.ha(Yg({source:f,duration:this.v,M:Vg}));Qg(b,Se(d));Pg(b,c)};function Jh(a){eh.call(this,{handleEvent:Kh});a=a||{};this.Oa=void 0!==a.ia?a.ia:jc(lh,nh);this.v=void 0!==a.duration?a.duration:100;this.zj=void 0!==a.yj?a.yj:128}K(Jh,eh);
function Kh(a){var b=!1;if("key"==a.type){var c=a.U.keyCode;if(this.Oa(a)&&(40==c||37==c||39==c||38==c)){var d=a.map,b=Z(d),e=b.h()*this.zj,f=0,g=0;40==c?g=-e:37==c?f=-e:39==c?f=e:g=e;c=[f,g];Ed(c,Ng(b));e=this.v;if(f=Mg(b))e&&0<e&&d.ha(Yg({source:f,duration:e,M:Xg})),d=b.sc.center([f[0]+c[0],f[1]+c[1]]),Qg(b,d);a.preventDefault();b=!0}}return!b};function Lh(a){eh.call(this,{handleEvent:Mh});a=a?a:{};this.Oa=a.ia?a.ia:nh;this.C=a.ub?a.ub:1;this.v=void 0!==a.duration?a.duration:100}K(Lh,eh);function Mh(a){var b=!1;if("key"==a.type){var c=a.U.charCode;if(this.Oa(a)&&(43==c||45==c)){b=a.map;c=43==c?this.C:-this.C;b.render();var d=Z(b);gh(b,d,c,void 0,this.v);a.preventDefault();b=!0}}return!b};function Nh(a){eh.call(this,{handleEvent:Oh});a=a||{};this.C=0;this.v=void 0!==a.duration?a.duration:250;this.hk=void 0!==a.gk?a.gk:!0;this.Qa=null;this.lb=this.Ud=void 0}K(Nh,eh);function Oh(a){var b=!1;if("mousewheel"==a.type){var b=a.map,c=a.U;this.hk&&(this.Qa=a.coordinate);this.C+=c.deltaY;void 0===this.Ud&&(this.Ud=Date.now());c=Math.max(80-(Date.now()-this.Ud),0);u.clearTimeout(this.lb);this.lb=u.setTimeout(J(this.Ae,this,b),c);a.preventDefault();b=!0}return!b}
Nh.prototype.Ae=function(a){var b=Ye(this.C,-1,1),c=Z(a);a.render();gh(a,c,-b,this.Qa,this.v);this.C=0;this.Qa=null;this.lb=this.Ud=void 0};function Ph(a){ph.call(this,{Tb:Qh,Ub:Rh,Vb:Sh});a=a||{};this.Ma=null;this.Ra=void 0;this.Mc=!1;this.Qd=0;this.Xj=void 0!==a.threshold?a.threshold:.3;this.v=void 0!==a.duration?a.duration:250}K(Ph,ph);
function Rh(a){var b=0,c=this.V[0],d=this.V[1],c=Math.atan2(d.clientY-c.clientY,d.clientX-c.clientX);void 0!==this.Ra&&(b=c-this.Ra,this.Qd+=b,!this.Mc&&Math.abs(this.Qd)>this.Xj&&(this.Mc=!0));this.Ra=c;a=a.map;c=ed(a.H);d=rh(this.V);d[0]-=c.x;d[1]-=c.y;this.Ma=a.xc(d);this.Mc&&(c=Z(a),d=Ng(c),a.render(),fh(a,c,d+b,this.Ma))}function Sh(a){if(2>this.V.length){a=a.map;var b=Z(a);Rg(b,-1);if(this.Mc){var c=Ng(b),d=this.Ma,e=this.v,c=b.ue(c,0);fh(a,b,c,d,e)}return!1}return!0}
function Qh(a){return 2<=this.V.length?(a=a.map,this.Ma=null,this.Ra=void 0,this.Mc=!1,this.Qd=0,this.Wb||Rg(Z(a),1),a.render(),!0):!1}Ph.prototype.Oc=gc;function Th(a){ph.call(this,{Tb:Uh,Ub:Vh,Vb:Wh});a=a?a:{};this.Ma=null;this.v=void 0!==a.duration?a.duration:400;this.vd=void 0;this.Qe=1}K(Th,ph);function Vh(a){var b=1,c=this.V[0],d=this.V[1],e=c.clientX-d.clientX,c=c.clientY-d.clientY,e=Math.sqrt(e*e+c*c);void 0!==this.vd&&(b=this.vd/e);this.vd=e;1!=b&&(this.Qe=b);a=a.map;var e=Z(a),c=e.h(),d=ed(a.H),f=rh(this.V);f[0]-=d.x;f[1]-=d.y;this.Ma=a.xc(f);a.render();hh(a,e,c*b,this.Ma)}
function Wh(a){if(2>this.V.length){a=a.map;var b=Z(a);Rg(b,-1);var c=b.h(),d=this.Ma,e=this.v,c=b.Y(c,0,this.Qe-1);hh(a,b,c,d,e);return!1}return!0}function Uh(a){return 2<=this.V.length?(a=a.map,this.Ma=null,this.vd=void 0,this.Qe=1,this.Wb||Rg(Z(a),1),a.render(),!0):!1}Th.prototype.Oc=gc;function Xh(a){a=a?a:{};var b=new zd,c=new dh(-.005,.05,100);(void 0!==a.rh?a.rh:1)&&b.push(new wh);(void 0!==a.Ch?a.Ch:1)&&b.push(new ih({ub:a.fh,duration:a.fe}));(void 0!==a.Dh?a.Dh:1)&&b.push(new sh({Pi:c}));(void 0!==a.wj?a.wj:1)&&b.push(new Ph);(void 0!==a.xj?a.xj:1)&&b.push(new Th({duration:a.fe}));if(void 0!==a.Oi?a.Oi:1)b.push(new Jh),b.push(new Lh({ub:a.fh,duration:a.fe}));(void 0!==a.og?a.og:1)&&b.push(new Nh({duration:a.fe}));(void 0!==a.Sj?a.Sj:1)&&b.push(new Ih({duration:a.fe}));return b}
;function Yh(a){var b=a||{};a=jb(b);delete a.$b;b=b.$b;wf.call(this,a);this.Ue=[];this.bc={};V(this,xd("layers"),this.ki,!1,this);b?da(b)&&(b=new zd(b.slice())):b=new zd;this.set("layers",b)}K(Yh,wf);k=Yh.prototype;k.kd=function(){this.get("visible")&&this.F()};
k.ki=function(){this.Ue.forEach(W);this.Ue.length=0;var a=this.fd();this.Ue.push(V(a,"add",this.ji,!1,this),V(a,"remove",this.li,!1,this));ab(this.bc,function(a){a.forEach(W)});ib(this.bc);var a=a.ya,b,c,d;b=0;for(c=a.length;b<c;b++)d=a[b],this.bc[I(d).toString()]=[V(d,"propertychange",this.kd,!1,this),V(d,"change",this.kd,!1,this)];this.F()};k.ji=function(a){a=a.element;var b=I(a).toString();this.bc[b]=[V(a,"propertychange",this.kd,!1,this),V(a,"change",this.kd,!1,this)];this.F()};
k.li=function(a){a=I(a.element).toString();this.bc[a].forEach(W);delete this.bc[a];this.F()};k.fd=function(){return this.get("layers")};k.Ee=function(a){var b=void 0!==a?a:[],c=b.length;this.fd().forEach(function(a){a.Ee(b)});a=xf(this);var d,e;for(d=b.length;c<d;c++)e=b[c],e.opacity*=a.opacity,e.visible=e.visible&&a.visible,e.Sa=Math.min(e.Sa,a.Sa),e.Ha=Math.max(e.Ha,a.Ha),void 0!==a.extent&&(e.extent=void 0!==e.extent?Ue(e.extent,a.extent):a.extent);return b};k.Vf=function(){return"ready"};function Zh(a){gf.call(this,{code:a,units:"m",extent:$h,global:!0,kk:ai})}K(Zh,gf);Zh.prototype.Qb=function(a,b){return a/Ze(b[1]/6378137)};var bi=6378137*Math.PI,$h=[-bi,-bi,bi,bi],ai=[-180,-85,180,85],ci="EPSG:3857 EPSG:102100 EPSG:102113 EPSG:900913 urn:ogc:def:crs:EPSG:6.18:3:3857 urn:ogc:def:crs:EPSG::3857 http://www.opengis.net/gml/srs/epsg.xml#3857".split(" ").map(function(a){return new Zh(a)});
function di(a,b,c){var d=a.length;c=1<c?c:2;void 0===b&&(b=2<c?a.slice():Array(d));for(var e=0;e<d;e+=c)b[e]=6378137*Math.PI*a[e]/180,b[e+1]=6378137*Math.log(Math.tan(Math.PI*(a[e+1]+90)/360));return b}function ei(a,b,c){var d=a.length;c=1<c?c:2;void 0===b&&(b=2<c?a.slice():Array(d));for(var e=0;e<d;e+=c)b[e]=180*a[e]/(6378137*Math.PI),b[e+1]=360*Math.atan(Math.exp(a[e+1]/6378137))/Math.PI-90;return b};function fi(a,b){gf.call(this,{code:a,units:"degrees",extent:gi,Fk:b,global:!0,kk:gi})}K(fi,gf);fi.prototype.Qb=function(a){return a};var gi=[-180,-90,180,90],hi=[new fi("CRS:84"),new fi("EPSG:4326","neu"),new fi("urn:ogc:def:crs:EPSG::4326","neu"),new fi("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new fi("urn:ogc:def:crs:OGC:1.3:CRS84"),new fi("urn:ogc:def:crs:OGC:2:84"),new fi("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new fi("urn:x-ogc:def:crs:EPSG:4326","neu")];function ii(a){a=a?a:{};var b=jb(a);delete b.zg;delete b.$g;zf.call(this,b);this.set("preload",void 0!==a.zg?a.zg:0);this.set("useInterimTilesOnError",void 0!==a.$g?a.$g:!0)}K(ii,zf);function ji(a,b,c,d,e){this.If={};this.u=a;this.Jd=b;this.N=c;this.X=d;this.ik=e;this.aa=this.T=this.ja=this.Nf=this.Mf=this.Lf=null;this.Hi=this.Gi=this.Je=this.cg=this.bg=this.ag=0;this.Ii=!1;this.od=this.Ji=0;this.Ki=!1;this.eg=0;this.Ja="";this.Xd=this.mf=this.Wj=this.Vj=0;this.Qg=this.nf=this.lf=null;this.Id=[];this.Wg=qd()}
function ki(a,b,c){if(a.aa){b=Bg(b,0,c,2,a.X,a.Id);c=a.u;var d=a.Wg,e=c.globalAlpha;1!=a.Je&&(c.globalAlpha=e*a.Je);var f=a.Ji;a.Ii&&(f+=a.ik);var g,h;g=0;for(h=b.length;g<h;g+=2){var l=b[g]-a.ag,m=b[g+1]-a.bg;a.Ki&&(l=l+.5|0,m=m+.5|0);if(0!==f||1!=a.od){var n=l+a.ag,p=m+a.bg;Yf(d,n,p,a.od,a.od,f,-n,-p);c.setTransform(d[0],d[1],d[4],d[5],d[12],d[13])}c.drawImage(a.aa,a.Gi,a.Hi,a.eg,a.cg,l,m,a.eg,a.cg)}0===f&&1==a.od||c.setTransform(1,0,0,1,0,0);1!=a.Je&&(c.globalAlpha=e)}}
function li(a,b,c,d){var e=0;if(a.Qg&&""!==a.Ja){a.lf&&mi(a,a.lf);a.nf&&ni(a,a.nf);var f=a.Qg,g=a.u,h=a.Nf;h?(h.font!=f.font&&(h.font=g.font=f.font),h.textAlign!=f.textAlign&&(h.textAlign=g.textAlign=f.textAlign),h.textBaseline!=f.textBaseline&&(h.textBaseline=g.textBaseline=f.textBaseline)):(g.font=f.font,g.textAlign=f.textAlign,g.textBaseline=f.textBaseline,a.Nf={font:f.font,textAlign:f.textAlign,textBaseline:f.textBaseline});b=Bg(b,e,c,d,a.X,a.Id);for(f=a.u;e<c;e+=d){g=b[e]+a.Vj;h=b[e+1]+a.Wj;
if(0!==a.mf||1!=a.Xd){var l=Yf(a.Wg,g,h,a.Xd,a.Xd,a.mf,-g,-h);f.setTransform(l[0],l[1],l[4],l[5],l[12],l[13])}a.nf&&f.strokeText(a.Ja,g,h);a.lf&&f.fillText(a.Ja,g,h)}0===a.mf&&1==a.Xd||f.setTransform(1,0,0,1,0,0)}}function oi(a,b,c,d,e,f){var g=a.u;a=Bg(b,c,d,e,a.X,a.Id);g.moveTo(a[0],a[1]);for(b=2;b<a.length;b+=2)g.lineTo(a[b],a[b+1]);f&&g.lineTo(a[0],a[1]);return d}function pi(a,b,c,d,e){var f=a.u,g,h;g=0;for(h=d.length;g<h;++g)c=oi(a,b,c,d[g],e,!0),f.closePath();return c}k=ji.prototype;
k.Eh=function(a){if(Ve(this.N,a.j())){if(this.ja||this.T){this.ja&&mi(this,this.ja);this.T&&ni(this,this.T);var b;b=this.X;var c=this.Id,d=a.cb();if(d){var e=a.Ea();b=Bg(d,0,d.length,e,b,c)}else b=null;c=b[2]-b[0];d=b[3]-b[1];c=Math.sqrt(c*c+d*d);d=this.u;d.beginPath();d.arc(b[0],b[1],c,0,2*Math.PI);this.ja&&d.fill();this.T&&d.stroke()}""!==this.Ja&&li(this,Mg(a),2,2)}};k.Fh=function(a,b){var c=a.Lk(),d,e;d=0;for(e=c.length;d<e;++d){var f=c[d];qi[f.hd()].call(this,f,b)}};
k.Kh=function(a){var b=a.cb();a=a.Ea();this.aa&&ki(this,b,b.length);""!==this.Ja&&li(this,b,b.length,a)};k.Ih=function(a){var b=a.cb();a=a.Ea();this.aa&&ki(this,b,b.length);""!==this.Ja&&li(this,b,b.length,a)};k.Gh=function(a){if(Ve(this.N,a.j())){if(this.T){ni(this,this.T);var b=this.u,c=a.cb();b.beginPath();oi(this,c,0,c.length,a.Ea(),!1);b.stroke()}""!==this.Ja&&(a=a.Jk(),li(this,a,2,2))}};
k.Hh=function(a){var b=a.j();if(Ve(this.N,b)){if(this.T){ni(this,this.T);var b=this.u,c=a.cb(),d=0,e=a.oa,f=a.Ea();b.beginPath();var g,h;g=0;for(h=e.length;g<h;++g)d=oi(this,c,d,e[g],f,!1);b.stroke()}""!==this.Ja&&(a=a.Kk(),li(this,a,a.length,2))}};
k.Lh=function(a){if(Ve(this.N,a.j())){if(this.T||this.ja){this.ja&&mi(this,this.ja);this.T&&ni(this,this.T);var b=this.u;b.beginPath();pi(this,a.zc(),0,a.oa,a.Ea());this.ja&&b.fill();this.T&&b.stroke()}if(""!==this.Ja){if(a.Tf!=a.Wa){b=Se(a.j());var c=a.zc(),d=a.oa,e=a.va,f,g,h,l,m,n=b[1],p=[],r=d[0];h=c[r-e];m=c[r-e+1];for(f=0;f<r;f+=e){l=c[f];g=c[f+1];if(n<=m&&g<=n||m<=n&&n<=g)h=(n-m)/(g-m)*(l-h)+h,p.push(h);h=l;m=g}r=NaN;m=-Infinity;p.sort();h=p[0];f=1;for(g=p.length;f<g;++f){l=p[f];var t=Math.abs(l-
h);t>m&&(h=(h+l)/2,Fg(c,d,e,h,n)&&(r=h,m=t));h=l}isNaN(r)&&(r=b[0]);b=[r,n];a.Uf=b;a.Tf=a.Wa}li(this,a.Uf,2,2)}}};k.Jh=function(a){if(Ve(this.N,a.j())){if(this.T||this.ja){this.ja&&mi(this,this.ja);this.T&&ni(this,this.T);var b=this.u,c=a.zc(),d=0,e=a.Hk(),f=a.Ea(),g,h;g=0;for(h=e.length;g<h;++g){var l=e[g];b.beginPath();d=pi(this,c,d,l,f);this.ja&&b.fill();this.T&&b.stroke()}}""!==this.Ja&&(a=a.Ik(),li(this,a,a.length,2))}};
k.flush=function(){var a=Object.keys(this.If).map(Number);Ma(a);var b,c,d,e,f;b=0;for(c=a.length;b<c;++b)for(d=this.If[a[b].toString()],e=0,f=d.length;e<f;++e)d[e](this)};function mi(a,b){var c=a.u,d=a.Lf;d?d.fillStyle!=b.fillStyle&&(d.fillStyle=c.fillStyle=b.fillStyle):(c.fillStyle=b.fillStyle,a.Lf={fillStyle:b.fillStyle})}
function ni(a,b){var c=a.u,d=a.Mf;d?(d.lineCap!=b.lineCap&&(d.lineCap=c.lineCap=b.lineCap),Pd&&!Qa(d.ac,b.ac)&&c.setLineDash(d.ac=b.ac),d.lineJoin!=b.lineJoin&&(d.lineJoin=c.lineJoin=b.lineJoin),d.lineWidth!=b.lineWidth&&(d.lineWidth=c.lineWidth=b.lineWidth),d.miterLimit!=b.miterLimit&&(d.miterLimit=c.miterLimit=b.miterLimit),d.strokeStyle!=b.strokeStyle&&(d.strokeStyle=c.strokeStyle=b.strokeStyle)):(c.lineCap=b.lineCap,Pd&&c.setLineDash(b.ac),c.lineJoin=b.lineJoin,c.lineWidth=b.lineWidth,c.miterLimit=
b.miterLimit,c.strokeStyle=b.strokeStyle,a.Mf={lineCap:b.lineCap,ac:b.ac,lineJoin:b.lineJoin,lineWidth:b.lineWidth,miterLimit:b.miterLimit,strokeStyle:b.strokeStyle})}var qi={Point:ji.prototype.Kh,LineString:ji.prototype.Gh,Polygon:ji.prototype.Lh,MultiPoint:ji.prototype.Ih,MultiLineString:ji.prototype.Hh,MultiPolygon:ji.prototype.Jh,GeometryCollection:ji.prototype.Fh,Circle:ji.prototype.Eh};function ri(a){$f.call(this,a);this.X=qd()}K(ri,$f);
ri.prototype.te=function(a,b,c){this.$a("precompose",c,a,void 0);var d=this.Da();if(d){var e=b.extent,f=void 0!==e;if(f){var g=a.ca,h=Xe(e),l=[e[2],e[3]],m=[e[2],e[1]],e=[e[0],e[1]];Zf(a.Kb,h,h);Zf(a.Kb,l,l);Zf(a.Kb,m,m);Zf(a.Kb,e,e);c.save();c.beginPath();c.moveTo(h[0]*g,h[1]*g);c.lineTo(l[0]*g,l[1]*g);c.lineTo(m[0]*g,m[1]*g);c.lineTo(e[0]*g,e[1]*g);c.clip()}g=this.dg;h=c.globalAlpha;c.globalAlpha=b.opacity;0===a.i.rotation?c.drawImage(d,0,0,+d.width,+d.height,Math.round(g[12]),Math.round(g[13]),
Math.round(d.width*g[0]),Math.round(d.height*g[5])):(c.setTransform(g[0],g[1],g[4],g[5],g[12],g[13]),c.drawImage(d,0,0),c.setTransform(1,0,0,1,0,0));c.globalAlpha=h;f&&c.restore()}this.$a("postcompose",c,a,void 0)};ri.prototype.$a=function(a,b,c,d){var e=this.Te;e.hasListener(a)&&(d=void 0!==d?d:this.Ge(c,0),d=new ji(b,c.ca,c.extent,d,c.i.rotation),e.dispatchEvent(new yf(a,e,d,c,b,null)),d.flush())};
ri.prototype.Ge=function(a,b){var c=a.i,d=a.ca;return Yf(this.X,d*a.size[0]/2,d*a.size[1]/2,d/c.resolution,-d/c.resolution,-c.rotation,-c.center[0]+b,-c.center[1])};var si=function(){var a=null,b=null;return function(c){if(!a){a=Kd(1,1);b=a.createImageData(1,1);var d=b.data;d[0]=42;d[1]=84;d[2]=126;d[3]=255}var d=a.canvas,e=c[0]<=d.width&&c[1]<=d.height;e||(d.width=c[0],d.height=c[1],d=c[0]-1,c=c[1]-1,a.putImageData(b,d,c),c=a.getImageData(d,c,1,1),e=Qa(b.data,c.data));return e}}();function ti(a,b,c,d){this.Yg=a;this.bd=b;this.oa=c;this.Ij=d}k=ti.prototype;k.get=function(a){return this.Ij[a]};k.j=function(){if(!this.N){var a;if("Point"===this.Yg){var b=this.bd;a=b[0];b=b[1];a=Ne(a,b,a,b,void 0)}else a=Oe(this.bd,this.bd.length,2);this.N=a}return this.N};k.cb=ti.prototype.zc=function(){return this.bd};k.dd=function(){return this};k.Ea=fc(2);k.hd=function(){return this.Yg};var ui=!((M("Chrome")||M("CriOS"))&&!M("Opera")&&!M("OPR")&&!M("Edge"))||M("iPhone")&&!M("iPod")&&!M("iPad")||M("iPad")||M("iPod");function vi(a,b,c,d){a=c-a;b=d-b;var e=Math.sqrt(a*a+b*b);return[Math.round(c+a/e),Math.round(d+b/e)]}
function wi(a,b,c,d,e,f,g,h,l,m){var n=Kd(Math.round(c*a),Math.round(c*b));if(0===l.length)return n.canvas;n.scale(c,c);var p=Le();l.forEach(function(a){a=a.extent;a[0]<p[0]&&(p[0]=a[0]);a[2]>p[2]&&(p[2]=a[2]);a[1]<p[1]&&(p[1]=a[1]);a[3]>p[3]&&(p[3]=a[3])});var r=Kd(Math.round(c*Qe(p)/d),Math.round(c*Re(p)/d));r.scale(c/d,c/d);r.translate(-p[0],p[3]);l.forEach(function(a){r.drawImage(a.image,a.extent[0],-a.extent[3],Qe(a.extent),Re(a.extent))});var t=Xe(g);h.mb.forEach(function(a){var b=a.source,
e=a.target,g=b[1][0],h=b[1][1],l=b[2][0],m=b[2][1];a=(e[0][0]-t[0])/f;var A=-(e[0][1]-t[1])/f,G=(e[1][0]-t[0])/f,T=-(e[1][1]-t[1])/f,O=(e[2][0]-t[0])/f,Q=-(e[2][1]-t[1])/f,e=b[0][0],b=b[0][1],g=g-e,h=h-b,l=l-e,m=m-b;a:{g=[[g,h,0,0,G-a],[l,m,0,0,O-a],[0,0,g,h,T-A],[0,0,l,m,Q-A]];h=g.length;for(l=0;l<h;l++){for(var m=l,F=Math.abs(g[l][l]),y=l+1;y<h;y++){var L=Math.abs(g[y][l]);L>F&&(F=L,m=y)}if(0===F){g=null;break a}F=g[m];g[m]=g[l];g[l]=F;for(m=l+1;m<h;m++)for(F=-g[m][l]/g[l][l],y=l;y<h+1;y++)g[m][y]=
l==y?0:g[m][y]+F*g[l][y]}l=Array(h);for(m=h-1;0<=m;m--)for(l[m]=g[m][h]/g[m][m],F=m-1;0<=F;F--)g[F][h]-=g[F][m]*l[m];g=l}g&&(n.save(),n.beginPath(),ui?(l=(a+G+O)/3,m=(A+T+Q)/3,h=vi(l,m,a,A),G=vi(l,m,G,T),O=vi(l,m,O,Q),n.moveTo(h[0],h[1]),n.lineTo(G[0],G[1]),n.lineTo(O[0],O[1])):(n.moveTo(a,A),n.lineTo(G,T),n.lineTo(O,Q)),n.closePath(),n.clip(),n.transform(g[0],g[2],g[1],g[3],a,A),n.translate(p[0]-e,p[3]-b),n.scale(d/c,-d/c),n.drawImage(r.canvas,0,0),n.restore())});m&&(n.save(),n.strokeStyle="black",
n.lineWidth=1,h.mb.forEach(function(a){var b=a.target;a=(b[0][0]-t[0])/f;var c=-(b[0][1]-t[1])/f,d=(b[1][0]-t[0])/f,e=-(b[1][1]-t[1])/f,g=(b[2][0]-t[0])/f,b=-(b[2][1]-t[1])/f;n.beginPath();n.moveTo(a,c);n.lineTo(d,e);n.lineTo(g,b);n.closePath();n.stroke()}),n.restore());return n.canvas};function xi(a,b,c,d,e){this.kb=a;this.Vd=b;var f={},g=tf(this.Vd,this.kb);this.Xa=function(a){var b=a[0]+"/"+a[1];f[b]||(f[b]=g(a));return f[b]};this.ng=d;this.Nh=e*e;this.mb=[];this.eh=!1;this.wh=this.kb.le&&!!d&&!!this.kb.j()&&Qe(d)==Qe(this.kb.j());this.da=this.kb.j()?Qe(this.kb.j()):null;this.Pg=this.Vd.j()?Qe(this.Vd.j()):null;a=Xe(c);b=[c[2],c[3]];d=[c[2],c[1]];c=[c[0],c[1]];e=this.Xa(a);var h=this.Xa(b),l=this.Xa(d),m=this.Xa(c);yi(this,a,b,d,c,e,h,l,m,10);if(this.eh){var n=Infinity;this.mb.forEach(function(a){n=
Math.min(n,a.source[0][0],a.source[1][0],a.source[2][0])});this.mb.forEach(function(a){if(Math.max(a.source[0][0],a.source[1][0],a.source[2][0])-n>this.da/2){var b=[[a.source[0][0],a.source[0][1]],[a.source[1][0],a.source[1][1]],[a.source[2][0],a.source[2][1]]];b[0][0]-n>this.da/2&&(b[0][0]-=this.da);b[1][0]-n>this.da/2&&(b[1][0]-=this.da);b[2][0]-n>this.da/2&&(b[2][0]-=this.da);Math.max(b[0][0],b[1][0],b[2][0])-Math.min(b[0][0],b[1][0],b[2][0])<this.da/2&&(a.source=b)}},this)}f={}}
function yi(a,b,c,d,e,f,g,h,l,m){var n=Ke([f,g,h,l]),p=a.da?Qe(n)/a.da:null,r=a.kb.le&&.5<p&&1>p,t=!1;if(0<m){if(a.Vd.jd&&a.Pg)var v=Ke([b,c,d,e]),t=t|.25<Qe(v)/a.Pg;!r&&a.kb.jd&&p&&(t|=.25<p)}if(t||!a.ng||Ve(n,a.ng)){if(!(t||isFinite(f[0])&&isFinite(f[1])&&isFinite(g[0])&&isFinite(g[1])&&isFinite(h[0])&&isFinite(h[1])&&isFinite(l[0])&&isFinite(l[1])))if(0<m)t=!0;else return;if(0<m&&(t||(p=a.Xa([(b[0]+d[0])/2,(b[1]+d[1])/2]),n=r?(sc(f[0],a.da)+sc(h[0],a.da))/2-sc(p[0],a.da):(f[0]+h[0])/2-p[0],p=(f[1]+
h[1])/2-p[1],t=n*n+p*p>a.Nh),t)){Math.abs(b[0]-d[0])<=Math.abs(b[1]-d[1])?(r=[(c[0]+d[0])/2,(c[1]+d[1])/2],n=a.Xa(r),p=[(e[0]+b[0])/2,(e[1]+b[1])/2],t=a.Xa(p),yi(a,b,c,r,p,f,g,n,t,m-1),yi(a,p,r,d,e,t,n,h,l,m-1)):(r=[(b[0]+c[0])/2,(b[1]+c[1])/2],n=a.Xa(r),p=[(d[0]+e[0])/2,(d[1]+e[1])/2],t=a.Xa(p),yi(a,b,r,p,e,f,n,t,l,m-1),yi(a,r,c,d,p,n,g,h,t,m-1));return}if(r){if(!a.wh)return;a.eh=!0}a.mb.push({source:[f,h,l],target:[b,d,e]});a.mb.push({source:[f,g,h],target:[b,c,d]})}}
function zi(a){var b=Le();a.mb.forEach(function(a){a=a.source;Me(b,a[0]);Me(b,a[1]);Me(b,a[2])});return b};function Ai(a,b,c){if(fa(a))c&&(a=J(a,c));else if(a&&"function"==typeof a.handleEvent)a=J(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:u.setTimeout(a,b||0)};function Bi(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);};function Ci(){}Ci.prototype.Hf=null;function Di(a){return a.Hf||(a.Hf=a.hg())};var Ei;function Fi(){}K(Fi,Ci);Fi.prototype.we=function(){var a=Gi(this);return a?new ActiveXObject(a):new XMLHttpRequest};Fi.prototype.hg=function(){var a={};Gi(this)&&(a[0]=!0,a[1]=!0);return a};
function Gi(a){if(!a.$f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.$f=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.$f}Ei=new Fi;var Hi=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function Ii(a,b){if(a)for(var c=a.split("\x26"),d=0;d<c.length;d++){var e=c[d].indexOf("\x3d"),f=null,g=null;0<=e?(f=c[d].substring(0,e),g=c[d].substring(e+1)):f=c[d];b(f,g?decodeURIComponent(g.replace(/\+/g," ")):"")}};function Ji(a){X.call(this);this.headers=new tc;this.ee=a||null;this.Ya=!1;this.de=this.b=null;this.wd=this.Re="";this.Ab=this.Ke=this.pd=this.Ce=!1;this.Zd=0;this.lb=null;this.Jg=Ki;this.vf=this.Hj=this.jk=!1}K(Ji,X);var Ki="",Li=/^https?$/i,Mi=["POST","PUT"];k=Ji.prototype;
k.send=function(a,b,c,d){if(this.b)throw Error("[goog.net.XhrIo] Object is active with another request\x3d"+this.Re+"; newUri\x3d"+a);b=b?b.toUpperCase():"GET";this.Re=a;this.wd="";this.Ce=!1;this.Ya=!0;this.b=this.ee?this.ee.we():Ei.we();this.de=this.ee?Di(this.ee):Di(Ei);this.b.onreadystatechange=J(this.sg,this);this.Hj&&"onprogress"in this.b&&(this.b.onprogress=J(function(a){this.rg(a,!0)},this),this.b.upload&&(this.b.upload.onprogress=J(this.rg,this)));try{this.Ke=!0,this.b.open(b,String(a),!0),
this.Ke=!1}catch(f){Ni(this,f);return}a=c||"";var e=this.headers.clone();d&&qc(d,function(a,b){e.set(b,a)});d=Fa(e.pa());c=u.FormData&&a instanceof u.FormData;!(0<=za(Mi,b))||d||c||e.set("Content-Type","application/x-www-form-urlencoded;charset\x3dutf-8");e.forEach(function(a,b){this.b.setRequestHeader(b,a)},this);this.Jg&&(this.b.responseType=this.Jg);fb(this.b,"withCredentials")&&(this.b.withCredentials=this.jk);try{Oi(this),0<this.Zd&&((this.vf=Pi(this.b))?(this.b.timeout=this.Zd,this.b.ontimeout=
J(this.Vg,this)):this.lb=Ai(this.Vg,this.Zd,this)),this.pd=!0,this.b.send(a),this.pd=!1}catch(f){Ni(this,f)}};function Pi(a){return N&&S(9)&&H(a.timeout)&&x(a.ontimeout)}function Ga(a){return"content-type"==a.toLowerCase()}k.Vg=function(){"undefined"!=typeof aa&&this.b&&(this.wd="Timed out after "+this.Zd+"ms, aborting",this.dispatchEvent("timeout"),this.abort(8))};function Ni(a,b){a.Ya=!1;a.b&&(a.Ab=!0,a.b.abort(),a.Ab=!1);a.wd=b;Qi(a);Ri(a)}
function Qi(a){a.Ce||(a.Ce=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}k.abort=function(){this.b&&this.Ya&&(this.Ya=!1,this.Ab=!0,this.b.abort(),this.Ab=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ri(this))};k.f=function(){this.b&&(this.Ya&&(this.Ya=!1,this.Ab=!0,this.b.abort(),this.Ab=!1),Ri(this,!0));Ji.G.f.call(this)};k.sg=function(){this.Lb||(this.Ke||this.pd||this.Ab?Si(this):this.sj())};k.sj=function(){Si(this)};
function Si(a){if(a.Ya&&"undefined"!=typeof aa&&(!a.de[1]||4!=Ti(a)||2!=Ui(a)))if(a.pd&&4==Ti(a))Ai(a.sg,0,a);else if(a.dispatchEvent("readystatechange"),4==Ti(a)){a.Ya=!1;try{if(Vi(a))a.dispatchEvent("complete"),a.dispatchEvent("success");else{var b;try{b=2<Ti(a)?a.b.statusText:""}catch(c){b=""}a.wd=b+" ["+Ui(a)+"]";Qi(a)}}finally{Ri(a)}}}k.rg=function(a,b){this.dispatchEvent(Wi(a,"progress"));this.dispatchEvent(Wi(a,b?"downloadprogress":"uploadprogress"))};
function Wi(a,b){return{type:b,lengthComputable:a.lengthComputable,loaded:a.loaded,total:a.total}}function Ri(a,b){if(a.b){Oi(a);var c=a.b,d=a.de[0]?ba:null;a.b=null;a.de=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){}}}function Oi(a){a.b&&a.vf&&(a.b.ontimeout=null);H(a.lb)&&(u.clearTimeout(a.lb),a.lb=null)}k.Le=function(){return!!this.b};
function Vi(a){var b=Ui(a),c;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:c=!0;break a;default:c=!1}if(!c){if(b=0===b)a=String(a.Re).match(Hi)[1]||null,!a&&u.self&&u.self.location&&(a=u.self.location.protocol,a=a.substr(0,a.length-1)),b=!Li.test(a?a.toLowerCase():"");c=b}return c}function Ti(a){return a.b?a.b.readyState:0}function Ui(a){try{return 2<Ti(a)?a.b.status:-1}catch(b){return-1}}
k.getResponseHeader=function(a){return this.b&&4==Ti(this)?this.b.getResponseHeader(a):void 0};k.getAllResponseHeaders=function(){return this.b&&4==Ti(this)?this.b.getAllResponseHeaders():""};function Xi(){if(!N)return!1;try{return new ActiveXObject("MSXML2.DOMDocument"),!0}catch(a){return!1}}var Yi=N&&Xi();a:if(!document.implementation||!document.implementation.createDocument){if(Yi){var Zi=new ActiveXObject("MSXML2.DOMDocument");if(Zi){Zi.resolveExternals=!1;Zi.validateOnParse=!1;try{Zi.setProperty("ProhibitDTD",!0),Zi.setProperty("MaxXMLSize",2048),Zi.setProperty("MaxElementDepth",256)}catch(a){}}if(Zi)break a}throw Error("Your browser does not support creating new documents");};(function(){var a={Oh:{}};(function(){function b(a,c){if(!(this instanceof b))return new b(a,c);this.ge=Math.max(4,a||9);this.Bf=Math.max(2,Math.ceil(.4*this.ge));c&&this.nh(c);this.clear()}function c(a,b){a.bbox=d(a,0,a.children.length,b)}function d(a,b,c,d){for(var f=[Infinity,Infinity,-Infinity,-Infinity],g;b<c;b++)g=a.children[b],e(f,a.W?d(g):g.bbox);return f}function e(a,b){a[0]=Math.min(a[0],b[0]);a[1]=Math.min(a[1],b[1]);a[2]=Math.max(a[2],b[2]);a[3]=Math.max(a[3],b[3])}function f(a,b){return a.bbox[0]-
b.bbox[0]}function g(a,b){return a.bbox[1]-b.bbox[1]}function h(a){return(a[2]-a[0])*(a[3]-a[1])}function l(a){return a[2]-a[0]+(a[3]-a[1])}function m(a,b){return a[0]<=b[0]&&a[1]<=b[1]&&b[2]<=a[2]&&b[3]<=a[3]}function n(a,b){return b[0]<=a[2]&&b[1]<=a[3]&&b[2]>=a[0]&&b[3]>=a[1]}function p(a,b,c,d,e){for(var f=[b,c],g;f.length;)c=f.pop(),b=f.pop(),c-b<=d||(g=b+Math.ceil((c-b)/d/2)*d,r(a,b,c,g,e),f.push(b,g,g,c))}function r(a,b,c,d,e){for(var f,g,h,l,m;c>b;){600<c-b&&(f=c-b+1,g=d-b+1,h=Math.log(f),
l=.5*Math.exp(2*h/3),m=.5*Math.sqrt(h*l*(f-l)/f)*(0>g-f/2?-1:1),h=Math.max(b,Math.floor(d-g*l/f+m)),g=Math.min(c,Math.floor(d+(f-g)*l/f+m)),r(a,h,g,d,e));f=a[d];g=b;l=c;t(a,b,d);for(0<e(a[c],f)&&t(a,b,c);g<l;){t(a,g,l);g++;for(l--;0>e(a[g],f);)g++;for(;0<e(a[l],f);)l--}0===e(a[b],f)?t(a,b,l):(l++,t(a,l,c));l<=d&&(b=l+1);d<=l&&(c=l-1)}}function t(a,b,c){var d=a[b];a[b]=a[c];a[c]=d}b.prototype={all:function(){return this.xf(this.data,[])},search:function(a){var b=this.data,c=[],d=this.ga;if(!n(a,b.bbox))return c;
for(var e=[],f,g,h,l;b;){f=0;for(g=b.children.length;f<g;f++)h=b.children[f],l=b.W?d(h):h.bbox,n(a,l)&&(b.W?c.push(h):m(a,l)?this.xf(h,c):e.push(h));b=e.pop()}return c},load:function(a){if(!a||!a.length)return this;if(a.length<this.Bf){for(var b=0,c=a.length;b<c;b++)this.Li(a[b]);return this}a=this.zf(a.slice(),0,a.length-1,0);this.data.children.length?this.data.height===a.height?this.Cf(this.data,a):(this.data.height<a.height&&(b=this.data,this.data=a,a=b),this.Af(a,this.data.height-a.height-1,!0)):
this.data=a;return this},Li:function(a){a&&this.Af(a,this.data.height-1);return this},clear:function(){this.data={children:[],height:1,bbox:[Infinity,Infinity,-Infinity,-Infinity],W:!0};return this},remove:function(a){if(!a)return this;for(var b=this.data,c=this.ga(a),d=[],e=[],f,g,h,l;b||d.length;){b||(b=d.pop(),g=d[d.length-1],f=e.pop(),l=!0);if(b.W&&(h=b.children.indexOf(a),-1!==h)){b.children.splice(h,1);d.push(b);this.mh(d);break}l||b.W||!m(b.bbox,c)?g?(f++,b=g.children[f],l=!1):b=null:(d.push(b),
e.push(f),f=0,g=b,b=b.children[0])}return this},ga:function(a){return a},re:function(a,b){return a[0]-b[0]},se:function(a,b){return a[1]-b[1]},toJSON:function(){return this.data},xf:function(a,b){for(var c=[];a;)a.W?b.push.apply(b,a.children):c.push.apply(c,a.children),a=c.pop();return b},zf:function(a,b,d,e){var f=d-b+1,g=this.ge,h;if(f<=g)return h={children:a.slice(b,d+1),height:1,bbox:null,W:!0},c(h,this.ga),h;e||(e=Math.ceil(Math.log(f)/Math.log(g)),g=Math.ceil(f/Math.pow(g,e-1)));h={children:[],
height:e,bbox:null};var f=Math.ceil(f/g),g=f*Math.ceil(Math.sqrt(g)),l,m,n;for(p(a,b,d,g,this.re);b<=d;b+=g)for(m=Math.min(b+g-1,d),p(a,b,m,f,this.se),l=b;l<=m;l+=f)n=Math.min(l+f-1,m),h.children.push(this.zf(a,l,n,e-1));c(h,this.ga);return h},lh:function(a,b,c,d){for(var e,f,g,l,m,n,p,r;;){d.push(b);if(b.W||d.length-1===c)break;p=r=Infinity;e=0;for(f=b.children.length;e<f;e++)g=b.children[e],m=h(g.bbox),n=g.bbox,n=(Math.max(n[2],a[2])-Math.min(n[0],a[0]))*(Math.max(n[3],a[3])-Math.min(n[1],a[1]))-
m,n<r?(r=n,p=m<p?m:p,l=g):n===r&&m<p&&(p=m,l=g);b=l}return b},Af:function(a,b,c){var d=this.ga;c=c?a.bbox:d(a);var d=[],f=this.lh(c,this.data,b,d);f.children.push(a);for(e(f.bbox,c);0<=b;)if(d[b].children.length>this.ge)this.oh(d,b),b--;else break;this.ih(c,d,b)},oh:function(a,b){var d=a[b],e=d.children.length,f=this.Bf;this.jh(d,f,e);e=this.kh(d,f,e);e={children:d.children.splice(e,d.children.length-e),height:d.height};d.W&&(e.W=!0);c(d,this.ga);c(e,this.ga);b?a[b-1].children.push(e):this.Cf(d,e)},
Cf:function(a,b){this.data={children:[a,b],height:a.height+1};c(this.data,this.ga)},kh:function(a,b,c){var e,f,g,l,m,n,p;m=n=Infinity;for(e=b;e<=c-b;e++)f=d(a,0,e,this.ga),g=d(a,e,c,this.ga),l=Math.max(0,Math.min(f[2],g[2])-Math.max(f[0],g[0]))*Math.max(0,Math.min(f[3],g[3])-Math.max(f[1],g[1])),f=h(f)+h(g),l<m?(m=l,p=e,n=f<n?f:n):l===m&&f<n&&(n=f,p=e);return p},jh:function(a,b,c){var d=a.W?this.re:f,e=a.W?this.se:g,h=this.yf(a,b,c,d);b=this.yf(a,b,c,e);h<b&&a.children.sort(d)},yf:function(a,b,c,
f){a.children.sort(f);f=this.ga;var g=d(a,0,b,f),h=d(a,c-b,c,f),m=l(g)+l(h),n,p;for(n=b;n<c-b;n++)p=a.children[n],e(g,a.W?f(p):p.bbox),m+=l(g);for(n=c-b-1;n>=b;n--)p=a.children[n],e(h,a.W?f(p):p.bbox),m+=l(h);return m},ih:function(a,b,c){for(;0<=c;c--)e(b[c].bbox,a)},mh:function(a){for(var b=a.length-1,d;0<=b;b--)0===a[b].children.length?0<b?(d=a[b-1].children,d.splice(d.indexOf(a[b]),1)):this.clear():c(a[b],this.ga)},nh:function(a){var b=["return a"," - b",";"];this.re=new Function("a","b",b.join(a[0]));
this.se=new Function("a","b",b.join(a[1]));this.ga=new Function("a","return [a"+a.join(", a")+"];")}};"undefined"!==typeof a?a.Oh=b:"undefined"!==typeof self?self.Jj=b:window.Jj=b})()})();function $i(a){ri.call(this,a);this.za=this.o=null;this.ne=!1;this.u=null;this.dg=qd();this.Fg=this.Gg=this.Dg=NaN;this.Od=this.Eb=null;this.Gb=[0,0]}K($i,ri);$i.prototype.Da=function(){return this.o};
$i.prototype.df=function(a,b){var c=a.ca,d=a.i,e=d.projection,f=this.Te,g=Af(f),h=g.eb(e),l=Qf(h,d.resolution),m=Wf(g,l,e),n=m[0]/Je(Pf(h,l),this.Gb)[0],p=h.h(l),n=p/n,r=d.center,t;p==d.resolution?(r=eg(r,p,a.size),t=Te(r,p,d.rotation,a.size)):t=a.extent;void 0!==b.extent&&(t=Ue(t,b.extent));if(t[2]<t[0]||t[3]<t[1])return!1;var v=Mf(h,t,p),z=m[0]*v.Rb(),q=m[1]*v.Pb(),w,B;this.o?(w=this.o,B=this.u,this.za[0]<z||this.za[1]<q||this.Gg!==m[0]||this.Fg!==m[1]||this.ne&&(this.za[0]>z||this.za[1]>q)?(w.width=
z,w.height=q,this.za=[z,q],this.ne=!si(this.za),this.Eb=null):(z=this.za[0],q=this.za[1],(w=l!=this.Dg)||(w=this.Eb,w=!(w.A<=v.A&&v.S<=w.S&&w.K<=v.K&&v.J<=w.J)),w&&(this.Eb=null))):(B=Kd(z,q),this.o=B.canvas,this.za=[z,q],this.u=B,this.ne=!si(this.za));var D,E;this.Eb?(q=this.Eb,z=q.Rb()):(z/=m[0],q/=m[1],D=v.A-Math.floor((z-v.Rb())/2),E=v.K-Math.floor((q-v.Pb())/2),this.Dg=l,this.Gg=m[0],this.Fg=m[1],this.Eb=new bf(D,D+z-1,E,E+q-1),this.Od=Array(z*q),q=this.Eb);w={};w[l]={};var A=[],G=ag(g,e,w),
T=f.get("useInterimTilesOnError"),O=Le(),Q=new bf(0,0,0,0),F,y,L;for(E=v.A;E<=v.S;++E)for(L=v.K;L<=v.J;++L)y=gg(g,l,E,L,c,e),D=y.I(),2==D||4==D||3==D&&!T?w[l][af(y.l)]=y:(F=If(h,y.l,G,Q,O),F||(A.push(y),(F=Lf(h,y.l,Q,O))&&G(l+1,F)));G=0;for(F=A.length;G<F;++G)y=A[G],E=m[0]*(y.l[1]-q.A),L=m[1]*(q.J-y.l[2]),B.clearRect(E,L,m[0],m[1]);A=Object.keys(w).map(Number);Ma(A);var P=g.tj,Ca=Xe(Jf(h,[l,q.A,q.J],O)),Wa,Da,pd,rc,mb,We,G=0;for(F=A.length;G<F;++G)if(Wa=A[G],m=Wf(g,Wa,e),rc=w[Wa],Wa==l)for(pd in rc)y=
rc[pd],Da=(y.l[2]-q.K)*z+(y.l[1]-q.A),this.Od[Da]!=y&&(E=m[0]*(y.l[1]-q.A),L=m[1]*(q.J-y.l[2]),D=y.I(),4!=D&&(3!=D||T)&&P||B.clearRect(E,L,m[0],m[1]),2==D&&B.drawImage(y.Da(),0,0,m[0],m[1],E,L,m[0],m[1]),this.Od[Da]=y);else for(pd in Wa=h.h(Wa)/p,rc)for(y=rc[pd],Da=Jf(h,y.l,O),E=(Da[0]-Ca[0])/n,L=(Ca[1]-Da[3])/n,We=Wa*m[0],mb=Wa*m[1],D=y.I(),4!=D&&P||B.clearRect(E,L,We,mb),2==D&&B.drawImage(y.Da(),0,0,m[0],m[1],E,L,We,mb),y=Kf(h,Da,l,Q),D=Math.max(y.A,q.A),L=Math.min(y.S,q.S),E=Math.max(y.K,q.K),
y=Math.min(y.J,q.J);D<=L;++D)for(mb=E;mb<=y;++mb)Da=(mb-q.K)*z+(D-q.A),this.Od[Da]=void 0;dg(a.ae,g,l,v);fg(a,g,h,c,e,t,l,f.get("preload"));bg(a,g);cg(a,g);Yf(this.dg,c*a.size[0]/2,c*a.size[1]/2,c*n/d.resolution,c*n/d.resolution,d.rotation,(Ca[0]-r[0])/n,(r[1]-Ca[1])/n);return!0};function aj(a,b){var c=/\{z\}/g,d=/\{x\}/g,e=/\{y\}/g,f=/\{-y\}/g;return function(g){if(g)return a.replace(c,g[0].toString()).replace(d,g[1].toString()).replace(e,function(){return(-g[2]-1).toString()}).replace(f,function(){return((b.Ob?b.Ob[g[0]]:null).Pb()+g[2]).toString()})}}function bj(a,b){for(var c=a.length,d=Array(c),e=0;e<c;++e)d[e]=aj(a[e],b);return cj(d)}function cj(a){return 1===a.length?a[0]:function(b,c,d){if(b)return a[sc((b[1]<<b[0])+b[2],a.length)](b,c,d)}}function dj(){};function ej(a){Uf.call(this,{Na:a.Na,Gf:a.Gf,extent:a.extent,ra:a.ra,Fc:a.Fc,projection:a.projection,state:a.state?a.state:void 0,fa:a.fa,lc:a.lc,Ib:a.Ib});this.kc=a.kc;this.Ka=a.Ka?a.Ka:dj;this.ob=null;if(a.ob)if(a.Ka)this.ob=a.ob;else{var b=a.ob;fj(this,bj(b,this.fa));this.ob=b}else if(a.url){var b=a.url,c=[],d=/\{(\d)-(\d)\}/.exec(b)||/\{([a-z])-([a-z])\}/.exec(b);if(d){var e=d[2].charCodeAt(0),f;for(f=d[1].charCodeAt(0);f<=e;++f)c.push(b.replace(d[0],String.fromCharCode(f)))}else c.push(b);fj(this,
bj(c,this.fa));this.ob=[b]}a.Ka&&fj(this,a.Ka)}K(ej,Uf);ej.prototype.ld=function(a){a=a.target;switch(a.I()){case 1:this.dispatchEvent(new Xf("tileloadstart",a));break;case 2:this.dispatchEvent(new Xf("tileloadend",a));break;case 3:this.dispatchEvent(new Xf("tileloaderror",a))}};function gj(a,b){a.ea.clear();a.kc=b;a.F()}function fj(a,b){a.ea.clear();a.Ka=b;a.F()}ej.prototype.ah=function(a,b,c){a=this.ed(a,b,c);this.ea.Aa(a)&&this.ea.get(a)};function hj(a,b){ig.call(this,0,b);this.u=Kd();this.o=this.u.canvas;this.o.style.width="100%";this.o.style.height="100%";this.o.className="ol-unselectable";Hc(a,this.o,0);this.L=!0;this.X=qd()}K(hj,ig);k=hj.prototype;k.Of=function(a){return a instanceof ii?new $i(a):null};k.$a=function(a,b){var c=this.a,d=this.u;if(c.hasListener(a)){var e=b.extent,f=b.ca,g=b.i.rotation,h=this.Ge(b),e=new ji(d,f,e,h,g);c.dispatchEvent(new yf(a,c,e,b,d,null));e.flush()}};
k.Ge=function(a){var b=a.ca;a=a.i;var c=a.resolution;return Yf(this.X,this.o.width/2,this.o.height/2,b/c,-b/c,-a.rotation,-a.center[0],-a.center[1])};k.hd=function(){return"canvas"};
k.gf=function(a){if(a){var b=this.u,c=a.size[0]*a.ca,d=a.size[1]*a.ca;this.o.width!=c||this.o.height!=d?(this.o.width=c,this.o.height=d):b.clearRect(0,0,this.o.width,this.o.height);jg(a);this.$a("precompose",a);c=a.Ad;Oa(c);var d=a.i.resolution,e,f,g,h;e=0;for(f=c.length;e<f;++e)h=c[e],g=h.xd,g=lg(this,g),h.visible&&d>=h.Ha&&d<h.Sa&&"ready"==h.Ng&&g.df(a,h)&&g.te(a,h,b);this.$a("postcompose",a);this.L||(fd(this.o,!0),this.L=!0);mg(this,a);a.Ic.push(kg)}else this.L&&(fd(this.o,!1),this.L=!1)};function ij(a,b){$f.call(this,a);this.target=b}K(ij,$f);ij.prototype.Kf=Cd;ij.prototype.te=Cd;ij.prototype.gd=function(){return this.target};function jj(a){var b=document.createElement("DIV");b.style.position="absolute";ij.call(this,a,b);this.L=!0;this.Eg=1;this.hf=0;this.wa={}}K(jj,ij);jj.prototype.Kf=function(){for(var a=this.target,b;b=a.firstChild;)a.removeChild(b);this.hf=0};
jj.prototype.df=function(a,b){if(!b.visible)return this.L&&(fd(this.target,!1),this.L=!1),!0;var c=a.ca,d=a.i,e=d.projection,f=this.Te,g=Af(f),h=g.eb(e),l=Qf(h,d.resolution),m=h.h(l),n=d.center,p;m==d.resolution?(n=eg(n,m,a.size),p=Te(n,m,d.rotation,a.size)):p=a.extent;void 0!==b.extent&&(p=Ue(p,b.extent));var m=Mf(h,p,m),r={};r[l]={};var t=ag(g,e,r),v=f.get("useInterimTilesOnError"),z=Le(),q=new bf(0,0,0,0),w,B,D,E;for(D=m.A;D<=m.S;++D)for(E=m.K;E<=m.J;++E)w=gg(g,l,D,E,c,e),B=w.I(),2==B?r[l][af(w.l)]=
w:4==B||3==B&&!v||(B=If(h,w.l,t,q,z),B||(w=Lf(h,w.l,q,z))&&t(l+1,w));var A;if(this.hf!=g.Wa){for(A in this.wa)v=this.wa[+A],Ic(v.target);this.wa={};this.hf=g.Wa}z=Object.keys(r).map(Number);Ma(z);var t={},G;D=0;for(E=z.length;D<E;++D){A=z[D];A in this.wa?v=this.wa[A]:(v=Rf(h,n,A),v=new kj(h,v),t[A]=!0,this.wa[A]=v);A=r[A];for(G in A){w=v;B=A[G];var T=B.l,O=T[0],Q=T[1],F=T[2],T=af(T);if(!(T in w.Sc)){var O=Je(Pf(w.Rg,O),w.Gb),y=B.Da(w),L=y.style;L.maxWidth="none";var P=void 0,Ca=void 0;L.width=O[0]+
"px";L.height=O[1]+"px";P=y;Ca=L;Ca.position="absolute";Ca.left=(Q-w.pf[1])*O[0]+"px";Ca.top=(w.pf[2]-F)*O[1]+"px";w.Mb||(w.Mb=document.createDocumentFragment());w.Mb.appendChild(P);w.Sc[T]=B}}v.Mb&&(v.target.appendChild(v.Mb),v.Mb=null)}G=Object.keys(this.wa).map(Number);Ma(G);E=qd();z=0;for(D=G.length;z<D;++z)if(A=G[z],v=this.wa[A],A in r)if(B=v.h(),w=v.Ac(),Yf(E,a.size[0]/2,a.size[1]/2,B/d.resolution,B/d.resolution,d.rotation,(w[0]-n[0])/B,(n[1]-w[1])/B),v.setTransform(E),A in t){for(--A;0<=A;--A)if(A in
this.wa){w=this.wa[A].target;w.parentNode&&w.parentNode.insertBefore(v.target,w.nextSibling);break}0>A&&Hc(this.target,v.target,0)}else{if(!a.O[0]&&!a.O[1]){Q=Kf(v.Rg,p,v.pf[0],q);A=[];B=w=void 0;for(B in v.Sc)w=v.Sc[B],Q.contains(w.l)||A.push(w);F=Q=void 0;Q=0;for(F=A.length;Q<F;++Q)w=A[Q],B=af(w.l),Ic(w.Da(v)),delete v.Sc[B]}}else Ic(v.target),delete this.wa[A];b.opacity!=this.Eg&&(this.Eg=this.target.style.opacity=b.opacity);b.visible&&!this.L&&(fd(this.target,!0),this.L=!0);dg(a.ae,g,l,m);fg(a,
g,h,c,e,p,l,f.get("preload"));bg(a,g);cg(a,g);return!0};function kj(a,b){this.target=document.createElement("DIV");this.target.style.position="absolute";this.target.style.width="100%";this.target.style.height="100%";this.Rg=a;this.pf=b;this.dc=Xe(Jf(a,b));this.Rj=a.h(b[0]);this.Sc={};this.Mb=null;var c=Array(16);rd(c,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.X=c;this.Gb=[0,0]}kj.prototype.Ac=function(){return this.dc};kj.prototype.h=function(){return this.Rj};
kj.prototype.setTransform=function(a){var b=this.X;if(a[0]!=b[0]||a[1]!=b[1]||a[4]!=b[4]||a[5]!=b[5]||a[12]!=b[12]||a[13]!=b[13]){var b=this.target,c;if(Md()){var d=Array(16);for(c=0;16>c;++c)d[c]=a[c].toFixed(6);Nd(b,"matrix3d("+d.join(",")+")")}else if(Ld()){var d=[a[0],a[1],a[4],a[5],a[12],a[13]],e=Array(6);for(c=0;6>c;++c)e[c]=d[c].toFixed(6);Nd(b,"matrix("+e.join(",")+")")}else b.style.left=Math.round(a[12])+"px",b.style.top=Math.round(a[13])+"px";b=this.X;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=
a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15]}};function lj(a,b){ig.call(this,0,b);this.u=Kd();var c=this.u.canvas;c.style.position="absolute";c.style.width="100%";c.style.height="100%";c.className="ol-unselectable";Hc(a,c,0);this.X=qd();this.gb=document.createElement("DIV");this.gb.className="ol-unselectable";c=this.gb.style;c.position="absolute";c.width="100%";c.height="100%";V(this.gb,"touchstart",Db);Hc(a,this.gb,0);this.L=!0}K(lj,ig);k=lj.prototype;k.f=function(){Ic(this.gb);lj.G.f.call(this)};
k.Of=function(a){if(a instanceof ii)a=new jj(a);else return null;return a};k.$a=function(a,b){var c=this.a;if(c.hasListener(a)){var d=b.extent,e=b.ca,f=b.i,g=f.rotation,h=this.u,l=h.canvas;Yf(this.X,l.width/2,l.height/2,e/f.resolution,-e/f.resolution,-f.rotation,-f.center[0],-f.center[1]);d=new ji(h,e,d,this.X,g);c.dispatchEvent(new yf(a,c,d,b,h,null));d.flush()}};k.hd=function(){return"dom"};
k.gf=function(a){if(a){var b=this.a;if(b.hasListener("precompose")||b.hasListener("postcompose")){var b=this.u.canvas,c=a.ca;b.width=a.size[0]*c;b.height=a.size[1]*c}this.$a("precompose",a);b=a.Ad;Oa(b);var c=a.i.resolution,d,e,f,g;d=0;for(e=b.length;d<e;++d)g=b[d],f=g.xd,f=lg(this,f),Hc(this.gb,f.gd(),d),g.visible&&c>=g.Ha&&c<g.Sa&&"ready"==g.Ng?f.df(a,g)&&f.te(a,g):f.Kf();var b=a.zd,h;for(h in this.Ga)h in b||(f=this.Ga[h],Ic(f.gd()));this.L||(fd(this.gb,!0),this.L=!0);jg(a);mg(this,a);a.Ic.push(kg);
this.$a("postcompose",a)}else this.L&&(fd(this.gb,!1),this.L=!1)};var mj=["canvas","webgl","dom"];
function nj(a){Y.call(this);var b=oj(a);this.Si=void 0!==a.Ri?a.Ri:!1;this.Ui=void 0!==a.Ti?a.Ti:!1;this.Jd=void 0!==a.ca?a.ca:Od;this.Xi=b.cc;this.je=new kc(this.Nj,void 0,this);Va(this,this.je);this.zh=qd();this.Aj=qd();this.Qh=0;this.yb=null;this.Ag=Le();this.yd=this.be=null;this.H=Ec("DIV","ol-viewport");this.H.style.position="relative";this.H.style.overflow="hidden";this.H.style.width="100%";this.H.style.height="100%";this.H.style.msTouchAction="none";this.H.style.touchAction="none";Rd&&Qc(this.H,
"ol-touch");this.$e=Ec("DIV","ol-overlaycontainer");this.H.appendChild(this.$e);this.Ze=Ec("DIV","ol-overlaycontainer-stopevent");V(this.Ze,["click","dblclick","mousedown","touchstart","MSPointerDown",Fe,pb?"DOMMouseScroll":"mousewheel"],Cb);this.H.appendChild(this.Ze);a=new xe(this);V(a,db(Ie),this.Yf,!1,this);Va(this,a);this.ig=b.Dc;this.sd=new Wc;V(this.sd,"key",this.Wf,!1,this);Va(this,this.sd);a=new kd(this.H);V(a,"mousewheel",this.Wf,!1,this);Va(this,a);this.ve=b.controls;this.Cc=b.Yb;this.af=
b.Hc;this.vg={};this.Hg=new b.Pj(this.H,this);Va(this,this.Hg);this.dh=new Nc;Va(this,this.dh);this.De=this.Vc=null;this.Md=[];this.yg=[];this.Tg=new qg(J(this.Wh,this),J(this.zi,this));this.Tj={};V(this,xd("layergroup"),this.fi,!1,this);V(this,xd("view"),this.Ci,!1,this);V(this,xd("size"),this.vi,!1,this);V(this,xd("target"),this.yi,!1,this);this.Nc(b.values);this.ve.forEach(function(a){a.setMap(this)},this);V(this.ve,"add",function(a){a.element.setMap(this)},!1,this);V(this.ve,"remove",function(a){a.element.setMap(null)},
!1,this);this.Cc.forEach(function(a){a.setMap(this)},this);V(this.Cc,"add",function(a){a.element.setMap(this)},!1,this);V(this.Cc,"remove",function(a){a.element.setMap(null)},!1,this);this.af.forEach(this.Ef,this);V(this.af,"add",function(a){this.Ef(a.element)},!1,this);V(this.af,"remove",function(a){var b=a.element.Sh();void 0!==b&&delete this.vg[b.toString()];a.element.setMap(null)},!1,this)}K(nj,Y);k=nj.prototype;k.Ef=function(a){var b=a.Sh();void 0!==b&&(this.vg[b.toString()]=a);a.setMap(this)};
k.ha=function(a){this.render();Array.prototype.push.apply(this.Md,arguments)};k.f=function(){Ic(this.H);nj.G.f.call(this)};k.gd=function(){return this.get("target")};function pj(a){a=a.gd();return void 0!==a?Ac(a):null}k.xc=function(a){var b=this.yb;return b?(a=a.slice(),Zf(b.wg,a,a)):null};k.fd=function(){return this.get("layergroup").fd()};k.zb=function(){return this.get("size")};function Z(a){return a.get("view")}
k.Wh=function(a,b,c,d){var e=this.yb;if(!(e&&b in e.oc&&e.oc[b][af(a.l)]))return Infinity;a=c[0]-e.focus[0];c=c[1]-e.focus[1];return 65536*Math.log(d)+Math.sqrt(a*a+c*c)/d};k.Wf=function(a,b){var c=new ve(b||a.type,this,a);this.Yf(c)};k.Yf=function(a){if(this.yb){this.De=a.coordinate;a.frameState=this.yb;var b=this.Cc.ya,c;if(!1!==this.dispatchEvent(a))for(c=b.length-1;0<=c;c--){var d=b[c];if(d.get("active")&&!d.handleEvent(a))break}}};
k.si=function(){var a=this.yb,b=this.Tg;if(!b.rd()){var c=16,d=c,e=0;a&&(e=a.O,e[0]&&(c=this.Si?8:0,d=2),e[1]&&(c=this.Ui?8:0,d=2),e=cb(a.oc));c*=e;d*=e;if(b.Yd<c){var e=b.Bg,f=b.Ba,g=b.gc,h=0,l=f.length,m,n,p;for(n=0;n<l;++n)m=f[n],p=e(m),Infinity==p?delete b.Jc[b.Oe(m)]:(g[h]=p,f[h++]=m);f.length=h;g.length=h;for(e=(b.Ba.length>>1)-1;0<=e;e--)pg(b,e);for(e=0;b.Yd<c&&e<d&&0<b.yc();)f=b,h=f.Ba,l=f.gc,g=h[0],1==h.length?(h.length=0,l.length=0):(h[0]=h.pop(),l[0]=l.pop(),pg(f,0)),h=f.Oe(g),delete f.Jc[h],
f=g[0],0===f.I()&&(V(f,"change",b.ld,!1,b),f.load(),++b.Yd,++e)}}b=this.yg;d=0;for(c=b.length;d<c;++d)b[d](this,a);b.length=0};k.vi=function(){this.render()};k.yi=function(){var a=pj(this);this.sd.detach();a?(a.appendChild(this.H),Xc(this.sd,this.ig?this.ig:a),this.Vc||(this.Vc=V(this.dh,"resize",this.Zg,!1,this))):(Ic(this.H),this.Vc&&(W(this.Vc),this.Vc=null));this.Zg()};k.zi=function(){this.render()};k.Di=function(){this.render()};
k.Ci=function(){this.be&&(W(this.be),this.be=null);var a=Z(this);a&&(this.be=V(a,"propertychange",this.Di,!1,this));this.render()};k.gi=function(){this.render()};k.hi=function(){this.render()};k.fi=function(){this.yd&&(this.yd.forEach(W),this.yd=null);var a=this.get("layergroup");a&&(this.yd=[V(a,"propertychange",this.hi,!1,this),V(a,"change",this.gi,!1,this)]);this.render()};
k.Me=function(){if(!Jc(document,this.H)||"none"==this.H.style.display)return!1;var a=this.zb();return!a||0>=a[0]||0>=a[1]?!1:(a=Z(this))&&a.Me()?!0:!1};k.render=function(){this.je.Le()||this.je.start()};
k.Nj=function(a){var b,c,d,e=this.zb(),f=Z(this),g=null;if(void 0!==e&&0<e[0]&&0<e[1]&&f&&f.Me()){var g=f.He.slice(),h=this.get("layergroup").Ee(),l={};b=0;for(c=h.length;b<c;++b)l[I(h[b].xd)]=h[b];d=f.I();g={pb:!1,Na:{},Kb:this.zh,extent:null,focus:this.De?this.De:d.center,index:this.Qh++,zd:l,Ad:h,cc:jb(this.Xi),ca:this.Jd,wg:this.Aj,Ic:[],size:e,Qk:this.Tj,$j:this.Tg,time:a,ae:{},i:d,O:g,oc:{}}}if(g){a=this.Md;b=e=0;for(c=a.length;b<c;++b)f=a[b],f(this,g)&&(a[e++]=f);a.length=e;g.extent=Te(d.center,
d.resolution,d.rotation,g.size)}this.yb=g;this.Hg.gf(g);if(g){g.pb&&this.render();Array.prototype.push.apply(this.yg,g.Ic);if(b=0===this.Md.length&&!g.O[0]&&!g.O[1])b=g.extent,c=this.Ag,b=!(b[0]==c[0]&&b[2]==c[2]&&b[1]==c[1]&&b[3]==c[3]);b&&(this.dispatchEvent(new Fd("moveend",this,g)),b=g.extent,c=this.Ag)&&(c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3])}this.dispatchEvent(new Fd("postrender",this,g));b=g=this.si;this&&(b=J(g,this));!fa(u.setImmediate)||u.Window&&u.Window.prototype&&u.Window.prototype.setImmediate==
u.setImmediate?(nc||(nc=oc()),nc(b)):u.setImmediate(b)};k.Mg=function(a){this.set("target",a)};
k.Zg=function(){var a=pj(this);if(a){var b=Kc(a),c=N&&a.currentStyle,d;if(d=c)d="CSS1Compat"==(b?new Lc(Kc(b)):oa||(oa=new Lc)).Be.compatMode;if(d&&"auto"!=c.width&&"auto"!=c.height&&!c.boxSizing)b=gd(a,c.width,"width","pixelWidth"),a=gd(a,c.height,"height","pixelHeight"),a=new zc(b,a);else{c=new zc(a.offsetWidth,a.offsetHeight);if(N){b=hd(a,"paddingLeft");d=hd(a,"paddingRight");var e=hd(a,"paddingTop"),f=hd(a,"paddingBottom"),b=new cd(e,d,f,b)}else b=dd(a,"paddingLeft"),d=dd(a,"paddingRight"),e=
dd(a,"paddingTop"),f=dd(a,"paddingBottom"),b=new cd(parseFloat(e),parseFloat(d),parseFloat(f),parseFloat(b));!N||9<=yb?(d=dd(a,"borderLeftWidth"),e=dd(a,"borderRightWidth"),f=dd(a,"borderTopWidth"),a=dd(a,"borderBottomWidth"),a=new cd(parseFloat(f),parseFloat(e),parseFloat(a),parseFloat(d))):(d=jd(a,"borderLeft"),e=jd(a,"borderRight"),f=jd(a,"borderTop"),a=jd(a,"borderBottom"),a=new cd(f,e,a,d));a=new zc(c.width-a.left-b.left-b.right-a.right,c.height-a.top-b.top-b.bottom-a.bottom)}this.set("size",
[a.width,a.height])}else this.set("size",void 0)};
function oj(a){var b=null;void 0!==a.Dc&&(b=C(a.Dc)?document.getElementById(a.Dc):a.Dc);var c={},d={};if(void 0===a.ra||"boolean"==typeof a.ra&&a.ra)d["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC"]="http://openlayers.org/";
else{var e=a.ra;C(e)?d[e]="":ga(e)&&(d[e.src]=e.href)}e=a.$b instanceof Yh?a.$b:new Yh({$b:a.$b});c.layergroup=e;c.target=a.target;c.view=void 0!==a.view?a.view:new Kg;var e=ig,f;void 0!==a.Kc?da(a.Kc)?f=a.Kc:C(a.Kc)&&(f=[a.Kc]):f=mj;var g,h;g=0;for(h=f.length;g<h;++g){var l=f[g];if("canvas"==l){if(Qd){e=hj;break}}else if("dom"==l){e=lj;break}}void 0!==a.controls?f=da(a.controls)?new zd(a.controls.slice()):a.controls:(f={},g=new zd,(void 0!==f.zoom?f.zoom:1)&&g.push(new ch(f.Rk)),(void 0!==f.rotate?
f.rotate:1)&&g.push(new ah(f.Pk)),(void 0!==f.attribution?f.attribution:1)&&g.push(new Tg(f.Ek)),f=g);g=void 0!==a.Yb?da(a.Yb)?new zd(a.Yb.slice()):a.Yb:Xh();a=void 0!==a.Hc?da(a.Hc)?new zd(a.Hc.slice()):a.Hc:new zd;return{controls:f,Yb:g,Dc:b,cc:d,Hc:a,Pj:e,values:c}}mf(ci);mf(hi);hi.forEach(function(a){ci.forEach(function(b){of(a,b,di);of(b,a,ei)})});function qj(a,b,c,d,e){Bf.call(this,a,b);this.Og=c;this.aa=new Image;null!==d&&(this.aa.crossOrigin=d);this.nd={};this.Ie=null;this.Zj=e}K(qj,Bf);k=qj.prototype;k.f=function(){1==this.state&&rj(this);qj.G.f.call(this)};k.Da=function(a){if(void 0!==a){var b=I(a);if(b in this.nd)return this.nd[b];a=hb(this.nd)?this.aa:this.aa.cloneNode(!1);return this.nd[b]=a}return this.aa};k.getKey=function(){return this.Og};k.bi=function(){this.state=3;rj(this);this.F()};
k.ci=function(){this.state=this.aa.naturalWidth&&this.aa.naturalHeight?2:4;rj(this);this.F()};k.load=function(){0==this.state&&(this.state=1,this.F(),this.Ie=[ac(this.aa,"error",this.bi,!1,this),ac(this.aa,"load",this.ci,!1,this)],this.Zj(this,this.Og))};function rj(a){a.Ie.forEach(W);a.Ie=null};function sj(a,b,c,d,e,f,g,h,l,m,n){Bf.call(this,[e,f,g],0);this.Mj=void 0!==n?n:!1;this.Jd=h;this.o=null;this.Yc={};this.Sd=b;this.Wd=d;this.ic=[];this.jc=null;this.Td=0;g=Jf(d,this.l);n=this.Wd.j();f=this.Sd.j();g=n?Ue(g,n):g;if(0===Pe(g))this.state=4;else if((n=a.j())&&(f=f?Ue(f,n):n),e=d.h(e),n=Se(g),d=tf(c,a)(n,void 0,n.length),e=c.Qb(e,n),n=ff[c.nb],void 0!==n&&(e*=n),n=ff[a.nb],void 0!==n&&(e/=n),d=a.Qb(e,d)/e,isFinite(d)&&!isNaN(d)&&0<d&&(e/=d),d=e,!isFinite(d)||isNaN(d)||0>=d)this.state=4;
else if(this.uf=new xi(a,c,g,f,d*(void 0!==m?m:.5)),0===this.uf.mb.length)this.state=4;else if(this.Td=Qf(b,d),c=zi(this.uf),f&&(a.le?(c[1]=Ye(c[1],f[1],f[3]),c[3]=Ye(c[3],f[1],f[3])):c=Ue(c,f)),Pe(c))if(a=Kf(b,c,this.Td),100>a.Rb()*a.Pb()){for(b=a.A;b<=a.S;b++)for(c=a.K;c<=a.J;c++)(m=l(this.Td,b,c,h))&&this.ic.push(m);0===this.ic.length&&(this.state=4)}else this.state=3;else this.state=4}K(sj,Bf);sj.prototype.f=function(){1==this.state&&(this.jc.forEach(W),this.jc=null);sj.G.f.call(this)};
sj.prototype.Da=function(a){if(void 0!==a){var b=I(a);if(b in this.Yc)return this.Yc[b];a=hb(this.Yc)?this.o:this.o.cloneNode(!1);return this.Yc[b]=a}return this.o};function tj(a){var b=[];a.ic.forEach(function(a){a&&2==a.I()&&b.push({extent:Jf(this.Sd,a.l),image:a.Da()})},a);a.ic.length=0;var c=a.l,d=c[0],e=Pf(a.Wd,d),f=H(e)?e:e[0],e=H(e)?e:e[1],d=a.Wd.h(d),g=a.Sd.h(a.Td),c=Jf(a.Wd,c);a.o=wi(f,e,a.Jd,g,a.Sd.j(),d,c,a.uf,b,a.Mj);a.state=2;a.F()}
sj.prototype.load=function(){if(0==this.state){this.state=1;this.F();var a=0;this.jc=[];this.ic.forEach(function(b){var c=b.I();if(0==c||1==c){a++;var d;d=Vb(b,"change",function(){var c=b.I();if(2==c||3==c||4==c)W(d),a--,0===a&&(this.jc.forEach(W),this.jc=null,tj(this))},!1,this);this.jc.push(d)}},this);this.ic.forEach(function(a){0==a.I()&&a.load()});0===a&&tj(this)}};function uj(a){ej.call(this,{Na:a.Na,extent:a.extent,ra:a.ra,Fc:a.Fc,projection:a.projection,state:void 0!==a.state?a.state:void 0,fa:a.fa,kc:a.kc?a.kc:vj,lc:a.lc,Ka:a.Ka,url:a.url,ob:a.ob,Ib:a.Ib});this.crossOrigin=void 0!==a.crossOrigin?a.crossOrigin:null;this.of=void 0!==a.of?a.of:qj;this.Qc={};this.qf={};this.Qj=a.Ok;this.Oj=!1}K(uj,ej);uj.prototype.sb=function(){return this.ea.sb()?!0:bb(this.Qc,function(a){return a.sb()})};
uj.prototype.Nb=function(a,b){var c=this.Bc(a);this.ea.Nb(this.ea==c?b:{});ab(this.Qc,function(a){a.Nb(a==c?b:{})})};uj.prototype.eb=function(a){var b=this.Ua;return!this.fa||b&&!sf(b,a)?(b=I(a).toString(),b in this.qf||(this.qf[b]=Sf(a)),this.qf[b]):this.fa};uj.prototype.Bc=function(a){var b=this.Ua;if(!b||sf(b,a))return this.ea;a=I(a).toString();a in this.Qc||(this.Qc[a]=new Df);return this.Qc[a]};
function gg(a,b,c,d,e,f){if(a.Ua&&f&&!sf(a.Ua,f)){e=a.Bc(f);var g=a.ed(b,c,d);if(e.Aa(g))return e.get(g);var h=a.Ua,l=a.eb(h),m=a.eb(f);a=new sj(h,l,f,m,b,c,d,a.Sg,J(function(a,b,c,d){return wj(this,a,b,c,d,h)},a),a.Qj,a.Oj);e.set(g,a);return a}return wj(a,b,c,d,e,f)}
function wj(a,b,c,d,e,f){var g=a.ed(b,c,d);if(a.ea.Aa(g))return a.ea.get(g);d=b=[b,c,d];var h=void 0!==f?f:a.Ua;c=a.eb(h);if(a.lk&&h.jd){var l=d;d=l[0];var m=Of(c,l),h=Tf(h),n=m[0],p=m[1];h[0]<=n&&n<=h[2]&&h[1]<=p&&p<=h[3]?d=l:(l=Qe(h),m[0]+=l*Math.ceil((h[0]-m[0])/l),d=Rf(c,m,d))}h=d[0];m=d[1];l=d[2];c=c.Ta>h||h>c.hb?!1:(c=(n=c.j())?Kf(c,n,h):c.Ob?c.Ob[h]:null)?c.tc(m,l):!0;e=(c=c?d:null)?a.Ka(c,e,f):void 0;e=new a.of(b,void 0!==e?0:4,void 0!==e?e:"",a.crossOrigin,a.kc);V(e,"change",a.ld,!1,a);a.ea.set(g,
e);return e}function vj(a,b){a.Da().src=b};function xj(a,b){this.vb=this.Hb=this.jb="";this.fc=null;this.xb=this.Ia="";this.la=this.Mi=!1;var c;if(a instanceof xj)this.la=x(b)?b:a.la,yj(this,a.jb),c=a.Hb,zj(this),this.Hb=c,Aj(this,a.vb),Bj(this,a.fc),c=a.Ia,zj(this),this.Ia=c,Cj(this,a.Va.clone()),c=a.xb,zj(this),this.xb=c;else if(a&&(c=String(a).match(Hi))){this.la=!!b;yj(this,c[1]||"",!0);var d=c[2]||"";zj(this);this.Hb=Dj(d);Aj(this,c[3]||"",!0);Bj(this,c[4]);d=c[5]||"";zj(this);this.Ia=Dj(d,!0);Cj(this,c[6]||"",!0);c=c[7]||"";zj(this);
this.xb=Dj(c)}else this.la=!!b,this.Va=new Ej(null,0,this.la)}
xj.prototype.toString=function(){var a=[],b=this.jb;b&&a.push(Fj(b,Gj,!0),":");var c=this.vb;if(c||"file"==b)a.push("//"),(b=this.Hb)&&a.push(Fj(b,Gj,!0),"@"),a.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.fc,null!=c&&a.push(":",String(c));if(c=this.Ia)this.vb&&"/"!=c.charAt(0)&&a.push("/"),a.push(Fj(c,"/"==c.charAt(0)?Hj:Ij,!0));(c=this.Va.toString())&&a.push("?",c);(c=this.xb)&&a.push("#",Fj(c,Kj));return a.join("")};
xj.prototype.resolve=function(a){var b=this.clone(),c=!!a.jb;c?yj(b,a.jb):c=!!a.Hb;if(c){var d=a.Hb;zj(b);b.Hb=d}else c=!!a.vb;c?Aj(b,a.vb):c=null!=a.fc;d=a.Ia;if(c)Bj(b,a.fc);else if(c=!!a.Ia){if("/"!=d.charAt(0))if(this.vb&&!this.Ia)d="/"+d;else{var e=b.Ia.lastIndexOf("/");-1!=e&&(d=b.Ia.substr(0,e+1)+d)}e=d;if(".."==e||"."==e)d="";else if(-1!=e.indexOf("./")||-1!=e.indexOf("/.")){for(var d=0==e.lastIndexOf("/",0),e=e.split("/"),f=[],g=0;g<e.length;){var h=e[g++];"."==h?d&&g==e.length&&f.push(""):
".."==h?((1<f.length||1==f.length&&""!=f[0])&&f.pop(),d&&g==e.length&&f.push("")):(f.push(h),d=!0)}d=f.join("/")}else d=e}c?(zj(b),b.Ia=d):c=""!==a.Va.toString();c?Cj(b,Dj(a.Va.toString())):c=!!a.xb;c&&(a=a.xb,zj(b),b.xb=a);return b};xj.prototype.clone=function(){return new xj(this)};function yj(a,b,c){zj(a);a.jb=c?Dj(b,!0):b;a.jb&&(a.jb=a.jb.replace(/:$/,""))}function Aj(a,b,c){zj(a);a.vb=c?Dj(b,!0):b}
function Bj(a,b){zj(a);if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.fc=b}else a.fc=null}function Cj(a,b,c){zj(a);b instanceof Ej?(a.Va=b,a.Va.jf(a.la)):(c||(b=Fj(b,Lj)),a.Va=new Ej(b,0,a.la))}function zj(a){if(a.Mi)throw Error("Tried to modify a read-only Uri");}xj.prototype.jf=function(a){this.la=a;this.Va&&this.Va.jf(a);return this};function Dj(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}
function Fj(a,b,c){return C(a)?(a=encodeURI(a).replace(b,Mj),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Mj(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Gj=/[#\/\?@]/g,Ij=/[\#\?:]/g,Hj=/[\#\?]/g,Lj=/[\#\?@]/g,Kj=/#/g;function Ej(a,b,c){this.g=this.w=null;this.Z=a||null;this.la=!!c}function Nj(a){a.w||(a.w=new tc,a.g=0,a.Z&&Ii(a.Z,function(b,c){a.add(decodeURIComponent(b.replace(/\+/g," ")),c)}))}k=Ej.prototype;k.yc=function(){Nj(this);return this.g};
k.add=function(a,b){Nj(this);this.Z=null;a=Oj(this,a);var c=this.w.get(a);c||this.w.set(a,c=[]);c.push(b);this.g++;return this};k.remove=function(a){Nj(this);a=Oj(this,a);return this.w.Aa(a)?(this.Z=null,this.g-=this.w.get(a).length,this.w.remove(a)):!1};k.clear=function(){this.w=this.Z=null;this.g=0};k.rd=function(){Nj(this);return 0==this.g};k.Aa=function(a){Nj(this);a=Oj(this,a);return this.w.Aa(a)};
k.pa=function(){Nj(this);for(var a=this.w.ka(),b=this.w.pa(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};k.ka=function(a){Nj(this);var b=[];if(C(a))this.Aa(a)&&(b=Ia(b,this.w.get(Oj(this,a))));else{a=this.w.ka();for(var c=0;c<a.length;c++)b=Ia(b,a[c])}return b};k.set=function(a,b){Nj(this);this.Z=null;a=Oj(this,a);this.Aa(a)&&(this.g-=this.w.get(a).length);this.w.set(a,[b]);this.g++;return this};
k.get=function(a,b){var c=a?this.ka(a):[];return 0<c.length?String(c[0]):b};k.toString=function(){if(this.Z)return this.Z;if(!this.w)return"";for(var a=[],b=this.w.pa(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.ka(d),f=0;f<d.length;f++){var g=e;""!==d[f]&&(g+="\x3d"+encodeURIComponent(String(d[f])));a.push(g)}return this.Z=a.join("\x26")};k.clone=function(){var a=new Ej;a.Z=this.Z;this.w&&(a.w=this.w.clone(),a.g=this.g);return a};
function Oj(a,b){var c=String(b);a.la&&(c=c.toLowerCase());return c}k.jf=function(a){a&&!this.la&&(Nj(this),this.Z=null,this.w.forEach(function(a,c){var d=c.toLowerCase();c!=d&&(this.remove(c),this.remove(d),0<a.length&&(this.Z=null,this.w.set(Oj(this,d),Ja(a)),this.g+=a.length))},this));this.la=a};k.extend=function(a){for(var b=0;b<arguments.length;b++)qc(arguments[b],function(a,b){this.add(b,a)},this)};function Pj(){}K(Pj,Ci);Pj.prototype.we=function(){var a=new XMLHttpRequest;if("withCredentials"in a)return a;if("undefined"!=typeof XDomainRequest)return new Qj;throw Error("Unsupported browser");};Pj.prototype.hg=function(){return{}};
function Qj(){this.xa=new XDomainRequest;this.readyState=0;this.responseText=this.onreadystatechange=null;this.status=-1;this.statusText=this.responseXML=null;this.xa.onload=J(this.mi,this);this.xa.onerror=J(this.Xf,this);this.xa.onprogress=J(this.ti,this);this.xa.ontimeout=J(this.Ai,this)}k=Qj.prototype;k.open=function(a,b,c){if(null!=c&&!c)throw Error("Only async requests are supported.");this.xa.open(a,b)};
k.send=function(a){if(a)if("string"==typeof a)this.xa.send(a);else throw Error("Only string data is supported");else this.xa.send()};k.abort=function(){this.xa.abort()};k.setRequestHeader=function(){};k.getResponseHeader=function(a){return"content-type"==a.toLowerCase()?this.xa.contentType:""};k.mi=function(){this.status=200;this.responseText=this.xa.responseText;Rj(this,4)};k.Xf=function(){this.status=500;this.responseText=null;Rj(this,4)};k.Ai=function(){this.Xf()};
k.ti=function(){this.status=200;Rj(this,1)};function Rj(a,b){a.readyState=b;if(a.onreadystatechange)a.onreadystatechange()}k.getAllResponseHeaders=function(){return"content-type: "+this.xa.contentType};function Sj(a){for(var b=a.vh,c=a.Ph||"jpg",d=a.Nk||"native",e=a.width,f=a.height,g=a.Rc||256,h=Math.max(Math.ceil(Math.log(e/g)/Math.LN2),Math.ceil(Math.log(f/g)/Math.LN2)),l=[],m=0;m<=h;m++){var n=Math.pow(2,h-m);l.push([Math.ceil(Math.ceil(e/n)/g),Math.ceil(Math.ceil(f/n)/g)])}var p=Math.min(window.devicePixelRatio||1,4),m=g/p,n=1==p?a.Fb:Ea(a.Fb,function(a){return a*p});uj.call(this,{lc:p,fa:new Ff({Fb:n.reverse(),origin:[0,0],Rc:m}),Ka:function(a){var m=a[0];if(!(h<m)){var n=l[m];if(n){var p=
a[1];a=-a[2]-1;if(!(0>p||n[0]<=p||0>a||n[1]<=a)){var n=Math.pow(2,h-m),q=g*n,w=p*q,B=a*q,D=Math.min(w+q,e),q=Math.min(B+q,f),D=n*Math.floor(D/n),q=n*Math.floor(q/n),n="/"+w+","+B+","+(D-w)+","+(q-B)+"/pct:"+100/n+"/0/"+d+"."+c;return(da(b)?b[sc((p<<m)+a,b.length)]:b)+n}}}},crossOrigin:a.crossOrigin});Qd&&gj(this,function(a,b){var c=a.Da();ac(c,"load",function(){if(0<c.naturalWidth&&(c.naturalWidth!=g||c.naturalHeight!=g)){var b=document.createElement("CANVAS");b.width=g;b.height=g;b.getContext("2d").drawImage(c,
0,0);var d=gb(a,function(a){return a==c});d&&(a[d]=b)}},!0);c.src=b})}K(Sj,uj);function Tj(a,b,c,d,e){a=Ac(a);if(!a)throw Error("Invalid element");this.$i=a;this.xe=this.a=null;this.bh=1==d;this.bf=e||null;this.fg=c||null;this.Yh=C(b)?b.substring(0,b.lastIndexOf("/")):null;Uj(this,b)}
function Vj(a,b){var c=b.width,d=b.height,e=b["@id"];if(!e){var f=b.image_host,g=b.identifier;f&&g&&(e=f+g)}e||(e=a.Yh);if(!e)throw Error("Unable to determine base url");if((f=b.domains)&&0<f.length){var h=new xj(e),e=[];Aa(f,function(a){Aj(h,a);e.push(h.toString())})}g=(b.tiles||[{}])[0];f=new gf({code:"IIIF",units:"pixels",extent:[0,-d,c,0]});g=new Sj({vh:e,width:c,height:d,Fb:b.scale_factors||g.scaleFactors,Ph:(b.formats||[])[0],Rc:b.tile_width||g.width||void 0,projection:f,crossOrigin:a.bh?"":
void 0});g=new ii({source:g});a.a=new nj({$b:[g],target:a.$i,Kc:a.bh?"webgl":void 0,view:new Kg({projection:f,extent:[0,-d,c,0],gh:1.1}),Yb:Xh({og:null==a.bf,fh:Math.round(Wj)}),controls:[],ra:!1});a.bf&&a.a.Cc.push(a.bf);d=window.location.hash;if(0<d.length&&(0<d.indexOf("lat\x3d")||0<d.indexOf("x\x3d"))){c=[];d=d.split("\x26");d[0]=d[0].substring(1);for(f=0;f<d.length;f++)g=d[f].split("\x3d"),c[g[0]]=g[1];x(c.zoom)?(Qg(Z(a.a),[parseFloat(c.lon),parseFloat(c.lat)-a.xe.height]),Xj(a,parseFloat(c.zoom))):
(Qg(Z(a.a),[parseFloat(c.y),-parseFloat(c.x)]),Pg(Z(a.a),c.res))}else Og(Z(a.a),f.j(),a.a.zb()||null);a.fg&&a.fg(a)}function Uj(a,b){if(C(b)){var c=new Ji(new Pj);V(c,"complete",function(){if(Vi(c)){var a;a=c.b?Bi(c.b.responseText):void 0;Uj(this,a)}},!1,a);c.send(b)}else a.xe=b,Vj(a,b)}var Wj=Math.LN2/Math.log(1.1);function Xj(a,b){var c=Wj*b,d=Z(a.a),c=d.Y(d.Fd,Math.round(c)-d.Hd,0);Pg(d,c)}
Tj.prototype.qh=function(a){if(!1!==a){var b=null!=a.accuracy?a.accuracy:2,c=this.xe.height;ud(this.a,function(){var d=Z(this.a),e=Mg(d),f="",f=parseFloat(e[1]);if(null!=a.geoFormat&&!1===a.geoFormat)f="res\x3d"+d.h()+"\x26x\x3d"+Math.abs(f.toFixed(b))+"\x26y\x3d"+e[0].toFixed(b);else{var f=f+c,g,d=Z(this.a),h=d.h();if(void 0!==h){var l,m=0;do{l=d.Y(d.Fd,m);if(l==h){g=m;break}++m}while(l>d.bj)}(g=void 0!==g?d.Hd+g:g)&&(g/=Wj);f="zoom\x3d"+g.toFixed(b)+"\x26lat\x3d"+f.toFixed(b)+"\x26lon\x3d"+e[0].toFixed(b)}null!=
a.addToEnd&&(f+="\x26"+a.addToEnd);window.location.hash=f},this)}};function Yj(){eh.call(this,{handleEvent:J(this.ai,this)});this.C=0;this.Qa=null;this.oe=!1;this.qd=null}K(Yj,eh);Yj.prototype.setMap=function(a){Yj.G.setMap.call(this,a);a&&(a=Z(a),V(a,xd("center"),function(){this.oe||(this.Qa=null)},!1,this))};
Yj.prototype.ai=function(a){var b=!1;if("mousewheel"==a.type){var b=a.map,c=a.U;this.Qa=a.coordinate;var d=c.deltaY/12;this.C=0<this.C==0<c.deltaY?this.C+d:d;this.C=Math.min(Math.max(this.C,-1.5),1.5);null==this.qd&&(this.qd=u.setInterval(J(this.Ae,this,b),125));a.preventDefault();b=!0}return!b};
Yj.prototype.Ae=function(a){var b=Z(a),c=b.I(),d=c.resolution,c=c.center;x(d)&&x(c)&&(a.ha($g({resolution:d,duration:125,M:Xg})),this.Qa&&a.ha(Yg({source:c,duration:125,M:Xg})));a=Math.pow(2,this.C)*d;a=b.Y(a);this.Qa&&(d=Lg(b,a,this.Qa),this.oe=!0,Qg(b,d),this.oe=!1);Pg(b,a);this.C/=2;.01>Math.abs(this.C)&&(this.C=0,u.clearInterval(this.qd),this.qd=null)};function Zj(a,b,c){Tj.call(this,a,b,c,void 0,new Yj)}K(Zj,Tj);na("IiifViewer",Zj);na("IiifViewer.prototype.addPermalink",Tj.prototype.qh);})();
