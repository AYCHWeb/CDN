/* IiifViewer; Copyright (C) 2017 - Klokan Technologies GmbH; Powered by OpenLayers */
(function() {var l,aa=aa||{},u=this;function ba(){}
function ca(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function da(a){return"array"==ca(a)}function ea(a){var b=ca(a);return"array"==b||"object"==b&&"number"==typeof a.length}function y(a){return"string"==typeof a}var fa="closure_uid_"+(1E9*Math.random()>>>0),ha=0;function ia(a,b,c){return a.call.apply(a.bind,arguments)}
function ja(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function F(a,b,c){F=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ia:ja;return F.apply(null,arguments)}
function ka(a,b){var c=a.split("."),d=u;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}function la(a,b){function c(){}c.prototype=b.prototype;a.kd=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Pi=function(a,c,f){for(var g=Array(arguments.length-2),h=2;h<arguments.length;h++)g[h-2]=arguments[h];return b.prototype[c].apply(a,g)}};var ma;function J(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a}function na(){}function L(a){return a.Jh||(a.Jh=++oa)}var oa=0;var pa="function"===typeof Object.assign?Object.assign:function(a,b){if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(a),d=1,e=arguments.length;d<e;++d){var f=arguments[d];if(void 0!==f&&null!==f)for(var g in f)f.hasOwnProperty(g)&&(c[g]=f[g])}return c};function qa(a){for(var b in a)delete a[b]}function ra(a){for(var b in a)return!1;return!b};function sa(a){function b(b){var d=a.listener,e=a.bindTo||a.target;a.callOnce&&M(a);return d.call(e,b)}return a.boundListener=b}function ta(a,b,c,d){for(var e,f=0,g=a.length;f<g;++f)if(e=a[f],e.listener===b&&e.bindTo===c)return d&&(e.deleteIndex=f),e}function ua(a,b){var c=a.Yc;return c?c[b]:void 0}function va(a){var b=a.Yc;b||(b=a.Yc={});return b}
function wa(a,b){var c=ua(a,b);if(c){for(var d=0,e=c.length;d<e;++d)a.removeEventListener(b,c[d].boundListener),qa(c[d]);c.length=0;if(c=a.Yc)delete c[b],0===Object.keys(c).length&&delete a.Yc}}function N(a,b,c,d,e){var f=va(a),g=f[b];g||(g=f[b]=[]);(f=ta(g,c,d,!1))?e||(f.callOnce=!1):(f={bindTo:d,callOnce:!!e,listener:c,target:a,type:b},a.addEventListener(b,sa(f)),g.push(f));return f}function xa(a,b,c,d){(a=ua(a,b))&&(c=ta(a,c,d,!0))&&M(c)}
function M(a){if(a&&a.target){a.target.removeEventListener(a.type,a.boundListener);var b=ua(a.target,a.type);if(b){var c="deleteIndex"in a?a.deleteIndex:b.indexOf(a);-1!==c&&b.splice(c,1);0===b.length&&wa(a.target,a.type)}qa(a)}}function ya(a){var b=va(a),c;for(c in b)wa(a,c)};function za(){}za.prototype.Fa=!1;za.prototype.ea=function(){this.Fa||(this.Fa=!0,this.l())};za.prototype.l=na;function O(a){this.type=a;this.target=null}O.prototype.preventDefault=O.prototype.stopPropagation=function(){this.Yh=!0};function Aa(a){a.stopPropagation()};function Ba(){this.kc={};this.qb={};this.ib={}}J(Ba,za);l=Ba.prototype;l.addEventListener=function(a,b){var c=this.ib[a];c||(c=this.ib[a]=[]);-1===c.indexOf(b)&&c.push(b)};
l.dispatchEvent=function(a){var b="string"===typeof a?new O(a):a;a=b.type;b.target=this;var c=this.ib[a],d;if(c){a in this.qb||(this.qb[a]=0,this.kc[a]=0);++this.qb[a];for(var e=0,f=c.length;e<f;++e)if(!1===c[e].call(this,b)||b.Yh){d=!1;break}--this.qb[a];if(0===this.qb[a]){b=this.kc[a];for(delete this.kc[a];b--;)this.removeEventListener(a,na);delete this.qb[a]}return d}};l.l=function(){ya(this)};l.hasListener=function(a){return a?a in this.ib:0<Object.keys(this.ib).length};
l.removeEventListener=function(a,b){var c=this.ib[a];if(c){var d=c.indexOf(b);a in this.kc?(c[d]=na,++this.kc[a]):(c.splice(d,1),0===c.length&&delete this.ib[a])}};function Ca(){Ba.call(this);this.Ma=0}J(Ca,Ba);Ca.prototype.j=function(){++this.Ma;this.dispatchEvent("change")};function Da(a,b,c){if(Array.isArray("moveend"))for(var d=Array(7),e=0;7>e;++e)d[e]=N(a,"moveend"[e],b,c);else N(a,"moveend",b,c)};function R(a){Ca.call(this);L(this);this.Nb={};void 0!==a&&Ea(this,a)}J(R,Ca);var Fa={};function Ga(a){return Fa.hasOwnProperty(a)?Fa[a]:Fa[a]="change:"+a}R.prototype.get=function(a){var b;this.Nb.hasOwnProperty(a)&&(b=this.Nb[a]);return b};R.prototype.fa=function(){return Object.keys(this.Nb)};R.prototype.set=function(a,b,c){c?this.Nb[a]=b:(c=this.Nb[a],this.Nb[a]=b,c!==b&&(b=Ga(a),this.dispatchEvent(new Ha(b,a,c)),this.dispatchEvent(new Ha("propertychange",a,c))))};
function Ea(a,b){for(var c in b)a.set(c,b[c],void 0)}function Ha(a,b,c){O.call(this,a);this.key=b;this.oldValue=c}J(Ha,O);function S(a){R.call(this);this.Ba=a?a:[];Ia(this)}J(S,R);l=S.prototype;l.clear=function(){for(;0<this.get(Ja);)this.pop()};l.extend=function(a){var b,c;b=0;for(c=a.length;b<c;++b)this.push(a[b]);return this};l.forEach=function(a,b){this.Ba.forEach(a,b)};l.Cc=function(){return this.Ba};l.item=function(a){return this.Ba[a]};l.pop=function(){return Ka(this,this.get(Ja)-1)};l.push=function(a){var b=this.get(Ja);this.Ba.splice(b,0,a);Ia(this);this.dispatchEvent(new La("add",a));return this.get(Ja)};
l.remove=function(a){var b=this.Ba,c,d;c=0;for(d=b.length;c<d;++c)if(b[c]===a)return Ka(this,c)};function Ka(a,b){var c=a.Ba[b];a.Ba.splice(b,1);Ia(a);a.dispatchEvent(new La("remove",c));return c}function Ia(a){a.set(Ja,a.Ba.length)}var Ja="length";function La(a,b){O.call(this,a);this.element=b}J(La,O);function Ma(a,b,c){O.call(this,a);this.map=b;this.frameState=void 0!==c?c:null}J(Ma,O);function Na(a,b,c,d,e){Ma.call(this,a,b,e);this.originalEvent=c;a=b.B.getBoundingClientRect();c=c.changedTouches?c.changedTouches[0]:c;this.pixel=[c.clientX-a.left,c.clientY-a.top];this.coordinate=b.$b(this.pixel);this.dragging=void 0!==d?d:!1}J(Na,Ma);Na.prototype.preventDefault=function(){Ma.prototype.preventDefault.call(this);this.originalEvent.preventDefault()};Na.prototype.stopPropagation=function(){Ma.prototype.stopPropagation.call(this);this.originalEvent.stopPropagation()};var Oa={Oi:"singleclick",Di:"click",Ei:"dblclick",Hi:"pointerdrag",Ki:"pointermove",Gi:"pointerdown",Ni:"pointerup",Mi:"pointerover",Li:"pointerout",Ii:"pointerenter",Ji:"pointerleave",Fi:"pointercancel"};function Pa(a,b,c,d,e){Na.call(this,a,b,c.originalEvent,d,e);this.ke=c}J(Pa,Na);var Qa=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function Ra(a,b){var c,d,e=Qa.length;for(d=0;d<e;++d)try{if(c=a.getContext(Qa[d],b))return c}catch(f){}return null};var Ta,Ua="undefined"!==typeof navigator?navigator.userAgent.toLowerCase():"",Va=-1!==Ua.indexOf("firefox"),Wa=-1!==Ua.indexOf("safari")&&-1==Ua.indexOf("chrom"),Xa=-1!==Ua.indexOf("webkit")&&-1==Ua.indexOf("edge"),Ya=-1!==Ua.indexOf("macintosh"),Za=window.devicePixelRatio||1,$a=function(){if(!("HTMLCanvasElement"in window))return!1;try{return document.createElement("CANVAS").getContext("2d")?!0:!1}catch(a){return!1}}(),ab="ontouchstart"in window,bb="PointerEvent"in window,cb=!!navigator.msPointerEnabled,
db=!1,eb=[];if("WebGLRenderingContext"in window)try{var fb=Ra(document.createElement("CANVAS"),{failIfMajorPerformanceCaveat:!0});fb&&(db=!0,eb=fb.getSupportedExtensions())}catch(a){}Ta=db;ma=eb;function gb(a,b){this.f=a;this.Wc=b};function hb(a){gb.call(this,a,{mousedown:this.vh,mousemove:this.wh,mouseup:this.zh,mouseover:this.yh,mouseout:this.xh});this.u=a.u;this.jf=[]}J(hb,gb);function ib(a,b){for(var c=a.jf,d=b.clientX,e=b.clientY,f=0,g=c.length,h;f<g&&(h=c[f]);f++){var k=Math.abs(e-h[1]);if(25>=Math.abs(d-h[0])&&25>=k)return!0}return!1}function jb(a){var b=kb(a,a),c=b.preventDefault;b.preventDefault=function(){a.preventDefault();c()};b.pointerId=1;b.isPrimary=!0;b.pointerType="mouse";return b}l=hb.prototype;
l.vh=function(a){if(!ib(this,a)){(1).toString()in this.u&&this.cancel(a);var b=jb(a);this.u[(1).toString()]=a;this.f.fireEvent("pointerdown",b,a)}};l.wh=function(a){if(!ib(this,a)){var b=jb(a);this.f.move(b,a)}};l.zh=function(a){if(!ib(this,a)){var b=this.u[(1).toString()];b&&b.button===a.button&&(b=jb(a),this.f.fireEvent("pointerup",b,a),delete this.u[(1).toString()])}};l.yh=function(a){if(!ib(this,a)){var b=jb(a);lb(this.f,b,a)}};l.xh=function(a){if(!ib(this,a)){var b=jb(a);mb(this.f,b,a)}};
l.cancel=function(a){var b=jb(a);this.f.cancel(b,a);delete this.u[(1).toString()]};function nb(a){gb.call(this,a,{MSPointerDown:this.Eh,MSPointerMove:this.Fh,MSPointerUp:this.Ih,MSPointerOut:this.Gh,MSPointerOver:this.Hh,MSPointerCancel:this.Dh,MSGotPointerCapture:this.Bh,MSLostPointerCapture:this.Ch});this.u=a.u;this.Vf=["","unavailable","touch","pen","mouse"]}J(nb,gb);function ob(a,b){var c=b;"number"===typeof b.pointerType&&(c=kb(b,b),c.pointerType=a.Vf[b.pointerType]);return c}l=nb.prototype;
l.Eh=function(a){this.u[a.pointerId.toString()]=a;var b=ob(this,a);this.f.fireEvent("pointerdown",b,a)};l.Fh=function(a){var b=ob(this,a);this.f.move(b,a)};l.Ih=function(a){var b=ob(this,a);this.f.fireEvent("pointerup",b,a);delete this.u[a.pointerId.toString()]};l.Gh=function(a){var b=ob(this,a);mb(this.f,b,a)};l.Hh=function(a){var b=ob(this,a);lb(this.f,b,a)};l.Dh=function(a){var b=ob(this,a);this.f.cancel(b,a);delete this.u[a.pointerId.toString()]};
l.Ch=function(a){this.f.dispatchEvent(new pb("lostpointercapture",a,a))};l.Bh=function(a){this.f.dispatchEvent(new pb("gotpointercapture",a,a))};function qb(a){gb.call(this,a,{pointerdown:this.Rh,pointermove:this.Sh,pointerup:this.Vh,pointerout:this.Th,pointerover:this.Uh,pointercancel:this.Qh,gotpointercapture:this.Fg,lostpointercapture:this.rh})}J(qb,gb);l=qb.prototype;l.Rh=function(a){rb(this.f,a)};l.Sh=function(a){rb(this.f,a)};l.Vh=function(a){rb(this.f,a)};l.Th=function(a){rb(this.f,a)};l.Uh=function(a){rb(this.f,a)};l.Qh=function(a){rb(this.f,a)};l.rh=function(a){rb(this.f,a)};l.Fg=function(a){rb(this.f,a)};function pb(a,b,c){O.call(this,a);this.originalEvent=b;a=c?c:{};this.buttons=sb(a);this.pressure=a.pressure?a.pressure:this.buttons?.5:0;this.bubbles="bubbles"in a?a.bubbles:!1;this.cancelable="cancelable"in a?a.cancelable:!1;this.view="view"in a?a.view:null;this.detail="detail"in a?a.detail:null;this.screenX="screenX"in a?a.screenX:0;this.screenY="screenY"in a?a.screenY:0;this.clientX="clientX"in a?a.clientX:0;this.clientY="clientY"in a?a.clientY:0;this.ctrlKey="ctrlKey"in a?a.ctrlKey:!1;this.altKey=
"altKey"in a?a.altKey:!1;this.shiftKey="shiftKey"in a?a.shiftKey:!1;this.metaKey="metaKey"in a?a.metaKey:!1;this.button="button"in a?a.button:0;this.relatedTarget="relatedTarget"in a?a.relatedTarget:null;this.pointerId="pointerId"in a?a.pointerId:0;this.width="width"in a?a.width:0;this.height="height"in a?a.height:0;this.tiltX="tiltX"in a?a.tiltX:0;this.tiltY="tiltY"in a?a.tiltY:0;this.pointerType="pointerType"in a?a.pointerType:"";this.hwTimestamp="hwTimestamp"in a?a.hwTimestamp:0;this.isPrimary=
"isPrimary"in a?a.isPrimary:!1;b.preventDefault&&(this.preventDefault=function(){b.preventDefault()})}J(pb,O);function sb(a){if(a.buttons||tb)a=a.buttons;else switch(a.which){case 1:a=1;break;case 2:a=4;break;case 3:a=2;break;default:a=0}return a}var tb=!1;try{tb=1===(new MouseEvent("click",{buttons:1})).buttons}catch(a){};function ub(a,b){return a>b?1:a<b?-1:0}function vb(a,b,c){var d=a.length;if(a[0]<=b)return 0;if(!(b<=a[d-1]))if(0<c)for(c=1;c<d;++c){if(a[c]<b)return c-1}else if(0>c)for(c=1;c<d;++c){if(a[c]<=b)return c}else for(c=1;c<d;++c){if(a[c]==b)return c;if(a[c]<b)return a[c-1]-b<b-a[c]?c-1:c}return d-1}function wb(a){var b=xb,c=a.length,d=Array(a.length),e;for(e=0;e<c;e++)d[e]={index:e,value:a[e]};d.sort(function(a,c){return b(a.value,c.value)||a.index-c.index});for(e=0;e<a.length;e++)a[e]=d[e].value}
function yb(a,b){var c=b||ub;return a.every(function(b,e){if(0===e)return!0;var f=c(a[e-1],b);return!(0<f||0===f)})};function zb(a,b){gb.call(this,a,{touchstart:this.pi,touchmove:this.oi,touchend:this.ni,touchcancel:this.mi});this.u=a.u;this.uh=b;this.Yb=void 0;this.Jd=0;this.nc=void 0}J(zb,gb);l=zb.prototype;l.Ff=function(){this.Jd=0;this.nc=void 0};
function Ab(a,b,c){b=kb(b,c);b.pointerId=c.identifier+2;b.bubbles=!0;b.cancelable=!0;b.detail=a.Jd;b.button=0;b.buttons=1;b.width=c.webkitRadiusX||c.radiusX||0;b.height=c.webkitRadiusY||c.radiusY||0;b.pressure=c.webkitForce||c.force||.5;b.isPrimary=a.Yb===c.identifier;b.pointerType="touch";b.clientX=c.clientX;b.clientY=c.clientY;b.screenX=c.screenX;b.screenY=c.screenY;return b}
function Bb(a,b,c){function d(){b.preventDefault()}var e=Array.prototype.slice.call(b.changedTouches),f=e.length,g,h;for(g=0;g<f;++g)h=Ab(a,b,e[g]),h.preventDefault=d,c.call(a,b,h)}
l.pi=function(a){var b=a.touches,c=Object.keys(this.u),d=c.length;if(d>=b.length){var e=[],f,g,h;for(f=0;f<d;++f){g=c[f];h=this.u[g];var k;if(!(k=1==g))a:{k=b.length;for(var n,m=0;m<k;m++)if(n=b[m],n.identifier===g-2){k=!0;break a}k=!1}k||e.push(h.out)}for(f=0;f<e.length;++f)this.Id(a,e[f])}b=a.changedTouches[0];c=Object.keys(this.u).length;if(0===c||1===c&&(1).toString()in this.u)this.Yb=b.identifier,void 0!==this.nc&&clearTimeout(this.nc);Cb(this,a);this.Jd++;Bb(this,a,this.Nh)};
l.Nh=function(a,b){this.u[b.pointerId]={target:b.target,out:b,wf:b.target};var c=this.f;b.bubbles=!0;c.fireEvent("pointerover",b,a);c=this.f;b.bubbles=!1;c.fireEvent("pointerenter",b,a);this.f.fireEvent("pointerdown",b,a)};l.oi=function(a){a.preventDefault();Bb(this,a,this.Ah)};
l.Ah=function(a,b){var c=this.u[b.pointerId];if(c){var d=c.out,e=c.wf;this.f.move(b,a);d&&e!==b.target&&(d.relatedTarget=b.target,b.relatedTarget=e,d.target=e,b.target?(mb(this.f,d,a),lb(this.f,b,a)):(b.target=e,b.relatedTarget=null,this.Id(a,b)));c.out=b;c.wf=b.target}};l.ni=function(a){Cb(this,a);Bb(this,a,this.wi)};l.wi=function(a,b){this.f.fireEvent("pointerup",b,a);this.f.out(b,a);Db(this.f,b,a);delete this.u[b.pointerId];b.isPrimary&&(this.Yb=void 0,this.nc=setTimeout(this.Ff.bind(this),200))};
l.mi=function(a){Bb(this,a,this.Id)};l.Id=function(a,b){this.f.cancel(b,a);this.f.out(b,a);Db(this.f,b,a);delete this.u[b.pointerId];b.isPrimary&&(this.Yb=void 0,this.nc=setTimeout(this.Ff.bind(this),200))};function Cb(a,b){var c=a.uh.jf,d=b.changedTouches[0];if(a.Yb===d.identifier){var e=[d.clientX,d.clientY];c.push(e);setTimeout(function(){var a=c.indexOf(e);-1<a&&c.splice(a,1)},2500)}};function Eb(a){Ba.call(this);this.sa=a;this.u={};this.Te={};this.Wb=[];bb?Fb(this,new qb(this)):cb?Fb(this,new nb(this)):(a=new hb(this),Fb(this,a),ab&&Fb(this,new zb(this,a)));a=this.Wb.length;for(var b,c=0;c<a;c++)b=this.Wb[c],Gb(this,Object.keys(b.Wc))}J(Eb,Ba);function Fb(a,b){var c=Object.keys(b.Wc);c&&(c.forEach(function(a){var c=b.Wc[a];c&&(this.Te[a]=c.bind(b))},a),a.Wb.push(b))}l=Eb.prototype;l.Se=function(a){var b=this.Te[a.type];b&&b(a)};
function Gb(a,b){b.forEach(function(a){N(this.sa,a,this.Se,this)},a)}function Hb(a,b){b.forEach(function(a){xa(this.sa,a,this.Se,this)},a)}function kb(a,b){for(var c={},d,e=0,f=Ib.length;e<f;e++)d=Ib[e][0],c[d]=a[d]||b[d]||Ib[e][1];return c}l.move=function(a,b){this.fireEvent("pointermove",a,b)};function Db(a,b,c){b.bubbles=!1;a.fireEvent("pointerleave",b,c)}l.out=function(a,b){a.bubbles=!0;this.fireEvent("pointerout",a,b)};l.cancel=function(a,b){this.fireEvent("pointercancel",a,b)};
function mb(a,b,c){a.out(b,c);var d=b.target,e=b.relatedTarget;d&&e&&d.contains(e)||Db(a,b,c)}function lb(a,b,c){b.bubbles=!0;a.fireEvent("pointerover",b,c);var d=b.target,e=b.relatedTarget;d&&e&&d.contains(e)||(b.bubbles=!1,a.fireEvent("pointerenter",b,c))}l.fireEvent=function(a,b,c){this.dispatchEvent(new pb(a,c,b))};function rb(a,b){a.dispatchEvent(new pb(b.type,b,b))}l.l=function(){for(var a=this.Wb.length,b,c=0;c<a;c++)b=this.Wb[c],Hb(this,Object.keys(b.Wc));Ba.prototype.l.call(this)};
var Ib=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]];function Jb(a){Ba.call(this);this.a=a;this.Tb=0;this.xc=!1;this.rb=[];this.Ha=null;a=this.a.B;this.Ge=0;this.we={};this.Cb=new Eb(a);this.Ga=null;this.le=N(this.Cb,"pointerdown",this.Ug,this);this.ne=N(this.Cb,"pointermove",this.$h,this)}J(Jb,Ba);
function Kb(a,b){var c=new Pa("click",a.a,b);a.dispatchEvent(c);0!==a.Tb?(clearTimeout(a.Tb),a.Tb=0,c=new Pa("dblclick",a.a,b),a.dispatchEvent(c)):a.Tb=setTimeout(function(){this.Tb=0;var a=new Pa("singleclick",this.a,b);this.dispatchEvent(a)}.bind(a),250)}function Lb(a,b){"pointerup"==b.type||"pointercancel"==b.type?delete a.we[b.pointerId]:"pointerdown"==b.type&&(a.we[b.pointerId]=!0);a.Ge=Object.keys(a.we).length}l=Jb.prototype;
l.Ye=function(a){Lb(this,a);var b=new Pa("pointerup",this.a,a);this.dispatchEvent(b);!this.xc&&0===a.button&&Kb(this,this.Ha);0===this.Ge&&(this.rb.forEach(M),this.rb.length=0,this.xc=!1,this.Ha=null,this.Ga.ea(),this.Ga=null)};l.Ug=function(a){Lb(this,a);var b=new Pa("pointerdown",this.a,a);this.dispatchEvent(b);this.Ha=a;0===this.rb.length&&(this.Ga=new Eb(document),this.rb.push(N(this.Ga,"pointermove",this.Vg,this),N(this.Ga,"pointerup",this.Ye,this),N(this.Cb,"pointercancel",this.Ye,this)))};
l.Vg=function(a){if(a.clientX!=this.Ha.clientX||a.clientY!=this.Ha.clientY){this.xc=!0;var b=new Pa("pointerdrag",this.a,a,this.xc);this.dispatchEvent(b)}a.preventDefault()};l.$h=function(a){this.dispatchEvent(new Pa(a.type,this.a,a,!(!this.Ha||a.clientX==this.Ha.clientX&&a.clientY==this.Ha.clientY)))};l.l=function(){this.ne&&(M(this.ne),this.ne=null);this.le&&(M(this.le),this.le=null);this.rb.forEach(M);this.rb.length=0;this.Ga&&(this.Ga.ea(),this.Ga=null);this.Cb&&(this.Cb.ea(),this.Cb=null);Ba.prototype.l.call(this)};function Mb(a){this.message="Assertion failed. See /doc/errors/#"+a+" for details.";this.code=a;this.name="AssertionError"}J(Mb,Error);function T(a,b){if(!a)throw new Mb(b);};function Nb(a,b){this.Bf=a;this.Nc=b;this.ia=[];this.Eb=[];this.lb={}}Nb.prototype.clear=function(){this.ia.length=0;this.Eb.length=0;qa(this.lb)};function Ob(a){var b=a.ia,c=a.Eb,d=b[0];1==b.length?(b.length=0,c.length=0):(b[0]=b.pop(),c[0]=c.pop(),Pb(a,0));b=a.Nc(d);delete a.lb[b];return d}Nb.prototype.enqueue=function(a){T(!(this.Nc(a)in this.lb),31);var b=this.Bf(a);return Infinity!=b?(this.ia.push(a),this.Eb.push(b),this.lb[this.Nc(a)]=!0,Qb(this,0,this.ia.length-1),!0):!1};Nb.prototype.Ia=function(){return this.ia.length};
Nb.prototype.ec=function(){return 0===this.ia.length};function Pb(a,b){for(var c=a.ia,d=a.Eb,e=c.length,f=c[b],g=d[b],h=b;b<e>>1;){var k=2*b+1,n=2*b+2,k=n<e&&d[n]<d[k]?n:k;c[b]=c[k];d[b]=d[k];b=k}c[b]=f;d[b]=g;Qb(a,h,b)}function Qb(a,b,c){var d=a.ia;a=a.Eb;for(var e=d[c],f=a[c];c>b;){var g=c-1>>1;if(a[g]>f)d[c]=d[g],a[c]=a[g],c=g;else break}d[c]=e;a[c]=f}
function Rb(a){var b=a.Bf,c=a.ia,d=a.Eb,e=0,f=c.length,g,h,k;for(h=0;h<f;++h)g=c[h],k=b(g),Infinity==k?delete a.lb[a.Nc(g)]:(d[e]=k,c[e++]=g);c.length=e;d.length=e;for(b=(a.ia.length>>1)-1;0<=b;b--)Pb(a,b)};function Sb(a,b){Nb.call(this,function(b){return a.apply(null,b)},function(a){return a[0].getKey()});this.ii=b;this.sd=0;this.rd={}}J(Sb,Nb);Sb.prototype.enqueue=function(a){var b=Nb.prototype.enqueue.call(this,a);b&&N(a[0],"change",this.Ic,this);return b};Sb.prototype.Ic=function(a){a=a.target;var b=a.o();if(2===b||3===b||4===b||5===b)xa(a,"change",this.Ic,this),a=a.getKey(),a in this.rd&&(delete this.rd[a],--this.sd),this.ii()};function Tb(a,b,c){return Math.min(Math.max(a,b),c)}var Ub="cosh"in Math?Math.cosh:function(a){a=Math.exp(a);return(a+1/a)/2};function Vb(a){T(0<a,29);return Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function Wb(a,b){var c=a%b;return 0>c*b?c+b:c};function Xb(a){return function(b){if(b)return[Tb(b[0],a[0],a[2]),Tb(b[1],a[1],a[3])]}}function Yb(a){return a};function Zb(a,b,c){this.center=a;this.resolution=b;this.rotation=c};function $b(a){return function(b,c,d){if(void 0!==b)return b=vb(a,b,d),b=Tb(b+c,0,a.length-1),c=Math.floor(b),b!=c&&c<a.length-1?a[c]/Math.pow(a[c]/a[c+1],b-c):a[c]}}function ac(a,b,c){return function(d,e,f){if(void 0!==d)return d=Math.max(Math.floor(Math.log(b/d)/Math.log(a)+(-f/2+.5))+e,0),void 0!==c&&(d=Math.min(d,c)),b/Math.pow(a,d)}};function bc(a){if(void 0!==a)return 0}function cc(a,b){if(void 0!==a)return a+b}function dc(a){var b=2*Math.PI/a;return function(a,d){if(void 0!==a)return a=Math.floor((a+d)/b+.5)*b}}function ec(){var a=5*Math.PI/180;return function(b,c){if(void 0!==b)return Math.abs(b+c)<=a?0:b+c}};function fc(a,b){var c=Math.cos(b),d=Math.sin(b),e=a[1]*c+a[0]*d;a[0]=a[0]*c-a[1]*d;a[1]=e};function gc(a){return 1-Math.pow(1-a,3)}function hc(a){return 3*a*a-2*a*a*a}function ic(a){return a};function jc(a){for(var b=kc(),c=0,d=a.length;c<d;++c)lc(b,a[c]);return b}function kc(){return[Infinity,Infinity,-Infinity,-Infinity]}function mc(a,b,c,d,e){return e?(e[0]=a,e[1]=b,e[2]=c,e[3]=d,e):[a,b,c,d]}function lc(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[2]&&(a[2]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[3]&&(a[3]=b[1])}function nc(a){var b=0;oc(a)||(b=U(a)*pc(a));return b}function qc(a){return[(a[0]+a[2])/2,(a[1]+a[3])/2]}
function rc(a,b,c,d,e){var f=b*d[0]/2;d=b*d[1]/2;b=Math.cos(c);var g=Math.sin(c);c=f*b;f*=g;b*=d;var h=d*g,k=a[0],n=a[1];a=k-c+h;d=k-c-h;g=k+c-h;c=k+c+h;var h=n-f-b,k=n-f+b,m=n+f+b,f=n+f-b;return mc(Math.min(a,d,g,c),Math.min(h,k,m,f),Math.max(a,d,g,c),Math.max(h,k,m,f),e)}function pc(a){return a[3]-a[1]}function sc(a,b){var c=kc();tc(a,b)&&(c[0]=a[0]>b[0]?a[0]:b[0],c[1]=a[1]>b[1]?a[1]:b[1],c[2]=a[2]<b[2]?a[2]:b[2],c[3]=a[3]<b[3]?a[3]:b[3]);return c}function U(a){return a[2]-a[0]}
function tc(a,b){return a[0]<=b[2]&&a[2]>=b[0]&&a[1]<=b[3]&&a[3]>=b[1]}function oc(a){return a[2]<a[0]||a[3]<a[1]};function uc(){return!0}function vc(){return!1};/*

 Latitude/longitude spherical geodesy formulae taken from
 http://www.movable-type.co.uk/scripts/latlong.html
 Licensed under CC-BY-3.0.
*/
function wc(a){this.radius=a}function xc(a,b){var c=a[1]*Math.PI/180,d=b[1]*Math.PI/180,e=(d-c)/2,f=(b[0]-a[0])*Math.PI/180/2,c=Math.sin(e)*Math.sin(e)+Math.sin(f)*Math.sin(f)*Math.cos(c)*Math.cos(d);return 2*yc.radius*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}
wc.prototype.offset=function(a,b,c){var d=a[1]*Math.PI/180;b/=this.radius;var e=Math.asin(Math.sin(d)*Math.cos(b)+Math.cos(d)*Math.sin(b)*Math.cos(c));return[180*(a[0]*Math.PI/180+Math.atan2(Math.sin(c)*Math.sin(b)*Math.cos(d),Math.cos(b)-Math.sin(d)*Math.sin(e)))/Math.PI,180*e/Math.PI]};var yc=new wc(6370997);var zc={};zc.degrees=2*Math.PI*yc.radius/360;zc.ft=.3048;zc.m=1;zc["us-ft"]=1200/3937;function Ac(a){this.Ua=a.code;this.uc=a.units;this.ka=void 0!==a.extent?a.extent:null;this.Gc=void 0!==a.global?a.global:!1;this.Hd=!(!this.Gc||!this.ka);this.Dg=a.getPointResolution;this.Qe=null;this.nf=a.metersPerUnit;var b=a.code,c=window.proj4;"function"==typeof c&&(b=c.defs(b),void 0!==b&&(void 0===a.metersPerUnit&&(this.nf=b.to_meter),void 0===a.units&&(this.uc=b.units)))}Ac.prototype.A=function(){return this.ka};function Bc(a){return a.nf||zc[a.uc]};var Cc={};var Dc={};function Fc(a,b,c){a=a.Ua;b=b.Ua;a in Dc||(Dc[a]={});Dc[a][b]=c}function Gc(a,b){var c;a in Dc&&b in Dc[a]&&(c=Dc[a][b]);return c};function Hc(a,b,c){var d=a.Dg;d?b=d(b,c):"degrees"!=a.uc&&(d=Ic(a,Jc("EPSG:4326")),b=[c[0]-b/2,c[1],c[0]+b/2,c[1],c[0],c[1]-b/2,c[0],c[1]+b/2],b=d(b,b,2),b=(xc(b.slice(0,2),b.slice(2,4))+xc(b.slice(4,6),b.slice(6,8)))/2,a=Bc(a),void 0!==a&&(b/=a));return b}function Kc(a){Lc(a);a.forEach(function(b){a.forEach(function(a){b!==a&&Fc(b,a,Mc)})})}function Nc(a){Cc[a.Ua]=a;Fc(a,a,Mc)}function Lc(a){var b=[];a.forEach(function(a){b.push(Nc(a))})}
function Oc(a){return a?"string"===typeof a?Jc(a):a:Jc("EPSG:3857")}function Pc(a){return function(b,c,d){var e=b.length;d=void 0!==d?d:2;c=void 0!==c?c:Array(e);var f,g;for(g=0;g<e;g+=d)for(f=a([b[g],b[g+1]]),c[g]=f[0],c[g+1]=f[1],f=d-1;2<=f;--f)c[g+f]=b[g+f];return c}}function Jc(a){var b=null;if(a instanceof Ac)b=a;else if("string"===typeof a){var b=Cc[a]||null,c=window.proj4;b||"function"!=typeof c||void 0===c.defs(a)||(b=new Ac({code:a}),Nc(b))}return b}
function Qc(a,b){if(a===b)return!0;var c=a.uc===b.uc;return a.Ua===b.Ua?c:Ic(a,b)===Mc&&c}function Rc(a,b){var c=Jc(a),d=Jc(b);return Ic(c,d)}function Ic(a,b){var c=a.Ua,d=b.Ua,e=Gc(c,d);if(!e){var f=window.proj4;if("function"==typeof f){var g=f.defs(c),h=f.defs(d);void 0!==g&&void 0!==h&&(g===h?Kc([b,a]):(f=f(d,c),e=f.forward,f=f.inverse,g=Jc(b),h=Jc(a),Fc(g,h,Pc(e)),Fc(h,g,Pc(f))),e=Gc(c,d))}}e||(e=Sc);return e}
function Sc(a,b){if(void 0!==b&&a!==b){for(var c=0,d=a.length;c<d;++c)b[c]=a[c];a=b}return a}function Mc(a,b){var c;if(void 0!==b){c=0;for(var d=a.length;c<d;++c)b[c]=a[c];c=b}else c=a.slice();return c};function Tc(){R.call(this);this.ka=kc();this.Ue=-1}J(Tc,R);Tc.prototype.Vb=vc;Tc.prototype.A=function(a){if(this.Ue!=this.Ma){for(var b=this.flatCoordinates,c=this.flatCoordinates.length,d=this.V,e=mc(Infinity,Infinity,-Infinity,-Infinity,this.ka),f=0;f<c;f+=d){var g=e,h=b[f],k=b[f+1];g[0]=Math.min(g[0],h);g[1]=Math.min(g[1],k);g[2]=Math.max(g[2],h);g[3]=Math.max(g[3],k)}this.ka=e;this.Ue=this.Ma}b=this.ka;a?(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3]):a=b;return a};
Tc.prototype.transform=function(a,b){var c=Rc(a,b);this.flatCoordinates&&(c(this.flatCoordinates,this.flatCoordinates,this.V),this.j());return this};function Uc(){Tc.call(this);this.Rc="XY";this.V=2;this.flatCoordinates=null}J(Uc,Tc);function Vc(a){var b;"XY"==a?b=2:"XYZ"==a||"XYM"==a?b=3:"XYZM"==a&&(b=4);return b}Uc.prototype.Vb=vc;function Wc(a,b,c){a.V=Vc(b);a.Rc=b;a.flatCoordinates=c}
Uc.prototype.rotate=function(a,b){var c=this.flatCoordinates;if(c){for(var d=c.length,e=this.V,f=c?c:[],g=Math.cos(a),h=Math.sin(a),k=b[0],n=b[1],m=0,p=0;p<d;p+=e){var q=c[p]-k,t=c[p+1]-n;f[m++]=k+q*g-t*h;f[m++]=n+q*h+t*g;for(q=p+2;q<p+e;++q)f[m++]=c[q]}c&&f.length!=m&&(f.length=m);this.j()}};
Uc.prototype.scale=function(a,b,c){var d=b;void 0===d&&(d=a);var e=c;e||(e=qc(this.A()));if(c=this.flatCoordinates){b=c.length;for(var f=this.V,g=c?c:[],h=e[0],e=e[1],k=0,n=0;n<b;n+=f){var m=c[n]-h,p=c[n+1]-e;g[k++]=h+a*m;g[k++]=e+d*p;for(m=n+2;m<n+f;++m)g[k++]=c[m]}c&&g.length!=k&&(g.length=k);this.j()}};
Uc.prototype.translate=function(a,b){var c=this.flatCoordinates;if(c){var d=c.length,e=this.V,f=c?c:[],g=0,h,k;for(h=0;h<d;h+=e)for(f[g++]=c[h]+a,f[g++]=c[h+1]+b,k=h+2;k<h+e;++k)f[g++]=c[k];c&&f.length!=g&&(f.length=g);this.j()}};function Xc(a,b,c,d,e,f){for(var g=0,h=a[c-d],k=a[c-d+1];b<c;b+=d){var n=a[b],m=a[b+1];k<=f?m>f&&0<(n-h)*(f-k)-(e-h)*(m-k)&&g++:m<=f&&0>(n-h)*(f-k)-(e-h)*(m-k)&&g--;h=n;k=m}return 0!==g};function Yc(a,b,c,d){for(var e=0,f=a[c-d],g=a[c-d+1];b<c;b+=d)var h=a[b],k=a[b+1],e=e+(h-f)*(k+g),f=h,g=k;return 0<e};function Zc(a,b){Uc.call(this);this.ta=[];this.vf=-1;this.jc=null;$c(this,a,b)}J(Zc,Uc);Zc.prototype.clone=function(){var a=new Zc(null),b=this.ta.slice();Wc(a,this.Rc,this.flatCoordinates.slice());a.ta=b;a.j();return a};
Zc.prototype.Vb=function(a,b){var c;if(this.vf!=this.Ma){c=this.flatCoordinates;var d;a:{d=this.ta;var e=0,f,g;f=0;for(g=d.length;f<g;++f){var h=d[f],e=Yc(c,e,h,this.V);if(0===f){if(!e){d=!1;break a}}else if(e){d=!1;break a}e=h}d=!0}if(d)this.jc=c;else{d=c=this.jc=c.slice();f=this.ta;g=this.V;for(var k=0,h=0,e=f.length;h<e;++h){var n=f[h],m=Yc(d,k,n,g);if(0===h?!m:m)for(var m=d,p=n,q=g;k<p-q;){var t;for(t=0;t<q;++t){var r=m[k+t];m[k+t]=m[p-q+t];m[p-q+t]=r}k+=q;p-=q}k=n}c.length=k}this.vf=this.Ma}c=
this.jc;a:if(d=this.ta,f=this.V,0!==d.length&&Xc(c,0,d[0],f,a,b)){g=1;for(h=d.length;g<h;++g)if(Xc(c,d[g-1],d[g],f,a,b)){c=!1;break a}c=!0}else c=!1;return c};Zc.prototype.ab=function(){return"Polygon"};
function $c(a,b,c){if(b){a:{var d=b;if(c)d=Vc(c);else{for(c=0;2>c;++c){if(0===d.length){a.Rc="XY";a.V=2;break a}d=d[0]}var d=d.length,e;2==d?e="XY":3==d?e="XYZ":4==d&&(e="XYZM");c=e}a.Rc=c;a.V=d}a.flatCoordinates||(a.flatCoordinates=[]);e=a.flatCoordinates;c=a.V;var d=a.ta,f=0,d=d?d:[],g=0,h,k;h=0;for(k=b.length;h<k;++h){var n;n=e;var m=b[h],p=c,q,t;q=0;for(t=m.length;q<t;++q){var r=m[q],w;for(w=0;w<p;++w)n[f++]=r[w]}n=f;f=d[g++]=n}d.length=g;a.flatCoordinates.length=0===d.length?0:d[d.length-1]}else b=
a.ta,Wc(a,"XY",null),a.ta=b;a.j()}function ad(a){var b=a[0],c=a[1],d=a[2];a=a[3];b=[b,c,b,a,d,a,d,c,b,c];c=new Zc(null);d=[b.length];Wc(c,"XY",b);c.ta=d;c.j();return c};function bd(a){R.call(this);a=a||{};this.cc=[0,0];this.pa=[];this.zd=this.zd.bind(this);var b={};b.center=void 0!==a.center?a.center:null;this.T=Oc(a.projection);var c,d,e,f=void 0!==a.minZoom?a.minZoom:0;c=void 0!==a.maxZoom?a.maxZoom:28;var g=void 0!==a.zoomFactor?a.zoomFactor:2;if(void 0!==a.resolutions)c=a.resolutions,d=c[0],e=c[c.length-1],c=$b(c);else{d=Oc(a.projection);e=d.A();var h=(e?Math.max(U(e),pc(e)):360*zc.degrees/Bc(d))/256/Math.pow(2,0),k=h/Math.pow(2,28);d=a.maxResolution;void 0!==
d?f=0:d=h/Math.pow(g,f);e=a.minResolution;void 0===e&&(e=void 0!==a.maxZoom?void 0!==a.maxResolution?d/Math.pow(g,c):h/Math.pow(g,c):k);c=f+Math.floor(Math.log(d/e)/Math.log(g));e=d/Math.pow(g,c-f);c=ac(g,d,c-f)}this.jb=d;this.pf=e;this.Ci=g;this.U=a.resolutions;this.ic=f;(void 0!==a.enableRotation?a.enableRotation:1)?(f=a.constrainRotation,f=void 0===f||!0===f?ec():!1===f?cc:"number"===typeof f?dc(f):cc):f=bc;this.Ea=new Zb(void 0!==a.extent?Xb(a.extent):Yb,c,f);void 0!==a.resolution?b.resolution=
a.resolution:void 0!==a.zoom&&(b.resolution=this.constrainResolution(this.jb,a.zoom-this.ic));b.rotation=void 0!==a.rotation?a.rotation:0;Ea(this,b)}J(bd,R);l=bd.prototype;
l.animate=function(a){var b=Date.now(),c=cd(this).slice(),d=this.h(),e=V(this),f=arguments.length,g;1<f&&"function"===typeof arguments[f-1]&&(g=arguments[f-1],--f);for(var h=[],k=0;k<f;++k){var n=arguments[k],m={start:b,complete:!1,anchor:n.anchor,duration:void 0!==n.duration?n.duration:1E3,easing:n.easing||hc};n.center&&(m.sourceCenter=c,m.targetCenter=n.center,c=m.targetCenter);void 0!==n.zoom?(m.sourceResolution=d,m.targetResolution=this.constrainResolution(this.jb,n.zoom-this.ic,0),d=m.targetResolution):
n.resolution&&(m.sourceResolution=d,m.targetResolution=n.resolution,d=m.targetResolution);void 0!==n.rotation&&(m.sourceRotation=e,m.targetRotation=n.rotation,e=m.targetRotation);m.callback=g;b+=m.duration;h.push(m)}this.pa.push(h);dd(this,0,1);this.zd()};function ed(a){return 0<fd(a)[0]}function gd(a){dd(a,0,-fd(a)[0]);for(var b=0,c=a.pa.length;b<c;++b){var d=a.pa[b];d[0].callback&&d[0].callback(!1)}a.pa.length=0}
l.zd=function(){void 0!==this.yd&&(cancelAnimationFrame(this.yd),this.yd=void 0);if(ed(this)){for(var a=Date.now(),b=!1,c=this.pa.length-1;0<=c;--c){for(var d=this.pa[c],e=!0,f=0,g=d.length;f<g;++f){var h=d[f];if(!h.complete){b=a-h.start;b=0<h.duration?b/h.duration:1;1<=b?(h.complete=!0,b=1):e=!1;b=h.easing(b);if(h.sourceCenter){var k=h.sourceCenter[0],n=h.sourceCenter[1];this.set("center",[k+b*(h.targetCenter[0]-k),n+b*(h.targetCenter[1]-n)])}h.sourceResolution&&(k=h.sourceResolution+b*(h.targetResolution-
h.sourceResolution),h.anchor&&this.set("center",hd(this,k,h.anchor)),this.set("resolution",k));void 0!==h.sourceRotation&&(b=h.sourceRotation+b*(h.targetRotation-h.sourceRotation),h.anchor&&this.set("center",id(this,b,h.anchor)),this.set("rotation",b));b=!0;if(!h.complete)break}}e&&(this.pa[c]=null,dd(this,0,-1),(d=d[0].callback)&&d(!0))}this.pa=this.pa.filter(Boolean);b&&void 0===this.yd&&(this.yd=requestAnimationFrame(this.zd))}};
function id(a,b,c){var d,e=cd(a);void 0!==e&&(d=[e[0]-c[0],e[1]-c[1]],fc(d,b-V(a)),a=d,a[0]+=c[0],a[1]+=c[1]);return d}function hd(a,b,c){var d,e=cd(a);a=a.h();void 0!==e&&void 0!==a&&(d=[c[0]-b*(c[0]-e[0])/a,c[1]-b*(c[1]-e[1])/a]);return d}function jd(a){var b=[100,100];a='.ol-viewport[data-view\x3d"'+L(a)+'"]';if(a=document.querySelector(a))a=getComputedStyle(a),b[0]=parseInt(a.width,10),b[1]=parseInt(a.height,10);return b}
l.constrainResolution=function(a,b,c){return this.Ea.resolution(a,b||0,c||0)};l.constrainRotation=function(a,b){return this.Ea.rotation(a,b||0)};function cd(a){return a.get("center")}function fd(a,b){return void 0!==b?(b[0]=a.cc[0],b[1]=a.cc[1],b):a.cc.slice()}l.ub=function(){return this.jb};l.vb=function(){return this.pf};l.h=function(){return this.get("resolution")};function kd(a,b){return Math.max(U(a)/b[0],pc(a)/b[1])}function V(a){return a.get("rotation")}
l.o=function(){var a=cd(this),b=this.T,c=this.h(),d=V(this);return{center:a.slice(),projection:void 0!==b?b:null,resolution:c,rotation:d}};
function ld(a,b){var c={},d=c.size;d||(d=jd(a));var e;b instanceof Uc?"Circle"===b.ab()?(b=b.A(),e=ad(b),e.rotate(V(a),qc(b))):e=b:(T(Array.isArray(b),24),T(!oc(b),25),e=ad(b));var f=void 0!==c.padding?c.padding:[0,0,0,0],g=void 0!==c.constrainResolution?c.constrainResolution:!0,h=void 0!==c.nearest?c.nearest:!1,k;k=void 0!==c.minResolution?c.minResolution:void 0!==c.maxZoom?a.constrainResolution(a.jb,c.maxZoom-a.ic,0):0;var n=e.flatCoordinates,m=V(a),p=Math.cos(-m),m=Math.sin(-m),q=Infinity,t=Infinity,
r=-Infinity,w=-Infinity;e=e.V;for(var x=0,D=n.length;x<D;x+=e)var z=n[x]*p-n[x+1]*m,E=n[x]*m+n[x+1]*p,q=Math.min(q,z),t=Math.min(t,E),r=Math.max(r,z),w=Math.max(w,E);d=kd([q,t,r,w],[d[0]-f[1]-f[3],d[1]-f[0]-f[2]]);d=isNaN(d)?k:Math.max(d,k);g&&(g=a.constrainResolution(d,0,0),!h&&g<d&&(g=a.constrainResolution(g,-1,0)),d=g);m=-m;h=(q+r)/2+(f[1]-f[3])/2*d;f=(t+w)/2+(f[0]-f[2])/2*d;p=[h*p-f*m,f*p+h*m];void 0!==c.duration?a.animate({resolution:d,center:p,duration:c.duration,easing:c.easing}):(md(a,d),
nd(a,p))}l.rotate=function(a,b){if(void 0!==b){var c=id(this,a,b);nd(this,c)}this.set("rotation",a);ed(this)&&gd(this)};function nd(a,b){a.set("center",b);ed(a)&&gd(a)}function dd(a,b,c){a.cc[b]+=c;a.j()}function md(a,b){a.set("resolution",b);ed(a)&&gd(a)};function od(a,b){var c=document.createElement("CANVAS");a&&(c.width=a);b&&(c.height=b);return c.getContext("2d")}function pd(a){a&&a.parentNode&&a.parentNode.removeChild(a)};function qd(a){R.call(this);this.element=a.element?a.element:null;this.a=this.ue=null;this.Sc=[];this.render=a.render?a.render:na;a.target&&this.te(a.target)}J(qd,R);qd.prototype.l=function(){pd(this.element);R.prototype.l.call(this)};qd.prototype.Fc=function(){return this.a};
qd.prototype.setMap=function(a){this.a&&pd(this.element);for(var b=0,c=this.Sc.length;b<c;++b)M(this.Sc[b]);this.Sc.length=0;if(this.a=a)(this.ue?this.ue:a.$c).appendChild(this.element),this.render!==na&&this.Sc.push(N(a,"postrender",this.render,this)),a.render()};qd.prototype.te=function(a){this.ue="string"===typeof a?document.getElementById(a):a};function rd(a){a=a?a:{};this.xd=document.createElement("UL");this.hc=document.createElement("LI");this.xd.appendChild(this.hc);this.hc.style.display="none";this.pb=void 0!==a.collapsed?a.collapsed:!0;this.wc=void 0!==a.collapsible?a.collapsible:!0;this.wc||(this.pb=!1);var b=void 0!==a.className?a.className:"ol-attribution",c=void 0!==a.tipLabel?a.tipLabel:"Attributions",d=void 0!==a.collapseLabel?a.collapseLabel:"\u00bb";"string"===typeof d?(this.Ub=document.createElement("span"),this.Ub.textContent=
d):this.Ub=d;d=void 0!==a.label?a.label:"i";"string"===typeof d?(this.J=document.createElement("span"),this.J.textContent=d):this.J=d;var e=this.wc&&!this.pb?this.Ub:this.J,d=document.createElement("button");d.setAttribute("type","button");d.title=c;d.appendChild(e);N(d,"click",this.xb,this);c=document.createElement("div");c.className=b+" ol-unselectable ol-control"+(this.pb&&this.wc?" ol-collapsed":"")+(this.wc?"":" ol-uncollapsible");c.appendChild(this.xd);c.appendChild(d);qd.call(this,{element:c,
render:a.render?a.render:sd,target:a.target});this.M=!0;this.Ra={};this.Ca={};this.oh={}}J(rd,qd);
function sd(a){if(a=a.frameState){var b,c,d,e,f,g,h,k,n,m,p,q=a.layerStatesArray,t=pa({},a.attributions),r={},w={},x=a.viewState.projection;c=0;for(b=q.length;c<b;c++)if(g=q[c].layer.$a())if(m=L(g).toString(),n=g.lg)for(d=0,e=n.length;d<e;d++)if(h=n[d],k=L(h).toString(),!(k in t)){if(f=a.usedTiles[m]){var D=g.Ja(x);a:{p=h;var z=x;if(p.pd){var E,P,B,C=void 0;for(C in f)if(C in p.pd){B=f[C];var A;E=0;for(P=p.pd[C].length;E<P;++E){A=p.pd[C][E];if(td(A,B)){p=!0;break a}var H=ud(D,vd(z),parseInt(C,10)),
I=H.maxX-H.minX+1;if(B.minX<H.minX||B.maxX>H.maxX)if(td(A,new wd(Wb(B.minX,I),Wb(B.maxX,I),B.minY,B.maxY))||B.maxX-B.minX+1>I&&td(A,H)){p=!0;break a}}}p=!1}else p=!0}}else p=!1;p?(k in r&&delete r[k],p=h.ae,p in w||(w[p]=!0,t[k]=h)):r[k]=h}b=[t,r];c=b[0];b=b[1];for(var v in this.Ra)v in c?(this.Ca[v]||(this.Ra[v].style.display="",this.Ca[v]=!0),delete c[v]):v in b?(this.Ca[v]&&(this.Ra[v].style.display="none",delete this.Ca[v]),delete b[v]):(pd(this.Ra[v]),delete this.Ra[v],delete this.Ca[v]);for(v in c)d=
document.createElement("LI"),d.innerHTML=c[v].ae,this.xd.appendChild(d),this.Ra[v]=d,this.Ca[v]=!0;for(v in b)d=document.createElement("LI"),d.innerHTML=b[v].ae,d.style.display="none",this.xd.appendChild(d),this.Ra[v]=d;v=!ra(this.Ca)||!ra(a.logos);this.M!=v&&(this.element.style.display=v?"":"none",this.M=v);v&&ra(this.Ca)?this.element.classList.add("ol-logo-only"):this.element.classList.remove("ol-logo-only");var K;a=a.logos;v=this.oh;for(K in v)K in a||(pd(v[K]),delete v[K]);for(var G in a)b=a[G],
b instanceof HTMLElement&&(this.hc.appendChild(b),v[G]=b),G in v||(K=new Image,K.src=G,""===b?c=K:(c=document.createElement("a"),c.href=b,c.appendChild(K)),this.hc.appendChild(c),v[G]=c);this.hc.style.display=ra(a)?"none":""}else this.M&&(this.element.style.display="none",this.M=!1)}
rd.prototype.xb=function(a){a.preventDefault();this.element.classList.toggle("ol-collapsed");if(this.pb){a=this.J;var b=a.parentNode;b&&b.replaceChild(this.Ub,a)}else a=this.Ub,(b=a.parentNode)&&b.replaceChild(this.J,a);this.pb=!this.pb};function xd(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-rotate",c=void 0!==a.label?a.label:"\u21e7";this.J=null;"string"===typeof c?(this.J=document.createElement("span"),this.J.className="ol-compass",this.J.textContent=c):(this.J=c,this.J.classList.add("ol-compass"));var d=a.tipLabel?a.tipLabel:"Reset rotation",c=document.createElement("button");c.className=b+"-reset";c.setAttribute("type","button");c.title=d;c.appendChild(this.J);N(c,"click",xd.prototype.xb,this);d=document.createElement("div");
d.className=b+" ol-unselectable ol-control";d.appendChild(c);b=a.render?a.render:yd;this.Ke=a.resetNorth?a.resetNorth:void 0;qd.call(this,{element:d,render:b,target:a.target});this.w=void 0!==a.duration?a.duration:250;this.Ie=void 0!==a.autoHide?a.autoHide:!0;this.re=void 0;this.Ie&&this.element.classList.add("ol-hidden")}J(xd,qd);
xd.prototype.xb=function(a){a.preventDefault();void 0!==this.Ke?this.Ke():(a=W(this.a))&&void 0!==V(a)&&(0<this.w?a.animate({rotation:0,duration:this.w,easing:gc}):(a.set("rotation",0),ed(a)&&gd(a)))};
function yd(a){if(a=a.frameState){a=a.viewState.rotation;if(a!=this.re){var b="rotate("+a+"rad)";if(this.Ie){var c=this.element.classList.contains("ol-hidden");c||0!==a?c&&0!==a&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.J.style.msTransform=b;this.J.style.webkitTransform=b;this.J.style.transform=b}this.re=a}};function zd(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-zoom",c=void 0!==a.delta?a.delta:1,d=void 0!==a.zoomInLabel?a.zoomInLabel:"+",e=void 0!==a.zoomOutLabel?a.zoomOutLabel:"\u2212",f=void 0!==a.zoomInTipLabel?a.zoomInTipLabel:"Zoom in",g=void 0!==a.zoomOutTipLabel?a.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=b+"-in";h.setAttribute("type","button");h.title=f;h.appendChild("string"===typeof d?document.createTextNode(d):d);N(h,"click",zd.prototype.xb.bind(this,
c));d=document.createElement("button");d.className=b+"-out";d.setAttribute("type","button");d.title=g;d.appendChild("string"===typeof e?document.createTextNode(e):e);N(d,"click",zd.prototype.xb.bind(this,-c));c=document.createElement("div");c.className=b+" ol-unselectable ol-control";c.appendChild(h);c.appendChild(d);qd.call(this,{element:c,target:a.target});this.w=void 0!==a.duration?a.duration:250}J(zd,qd);
zd.prototype.xb=function(a,b){b.preventDefault();var c=W(this.a);if(c){var d=c.h();d&&(d=c.constrainResolution(d,a),0<this.w?(ed(c)&&gd(c),c.animate({resolution:d,duration:this.w,easing:gc})):md(c,d))}};function Ad(a,b,c){this.sg=a;this.qf=b;this.vg=c;this.ca=[];this.Lc=this.Gd=0}function Bd(a){a.ca.length=0;a.Gd=0;a.Lc=0}Ad.prototype.update=function(a,b){this.ca.push(a,b,Date.now())};
Ad.prototype.end=function(){if(6>this.ca.length)return!1;var a=Date.now()-this.vg,b=this.ca.length-3;if(this.ca[b+2]<a)return!1;for(var c=b-3;0<c&&this.ca[c+2]>a;)c-=3;var a=this.ca[b+2]-this.ca[c+2],d=this.ca[b]-this.ca[c],b=this.ca[b+1]-this.ca[c+1];this.Gd=Math.atan2(b,d);this.Lc=Math.sqrt(d*d+b*b)/a;return this.Lc>this.qf};function X(a){R.call(this);this.a=null;this.setActive(!0);this.handleEvent=a.handleEvent}J(X,R);X.prototype.Fc=function(){return this.a};X.prototype.setActive=function(a){this.set("active",a)};X.prototype.setMap=function(a){this.a=a};function Cd(a,b,c,d){if(void 0!==b){var e=V(a),f=cd(a);void 0!==e&&f&&0<d?a.animate({rotation:b,anchor:c,duration:d,easing:gc}):a.rotate(b,c)}}
function Dd(a,b,c,d){var e=a.h();b=a.constrainResolution(e,b,0);if(c&&void 0!==b&&b!==e){var f=cd(a);c=hd(a,b,c);c=a.Ea.center(c);c=[(b*f[0]-e*c[0])/(b-e),(b*f[1]-e*c[1])/(b-e)]}Ed(a,b,c,d)}function Ed(a,b,c,d){if(b){var e=a.h(),f=cd(a);void 0!==e&&f&&b!==e&&d?a.animate({resolution:b,anchor:c,duration:d,easing:gc}):(c&&(c=hd(a,b,c),nd(a,c)),md(a,b))}};function Fd(a){a=a?a:{};this.v=a.delta?a.delta:1;X.call(this,{handleEvent:Gd});this.w=void 0!==a.duration?a.duration:250}J(Fd,X);function Gd(a){var b=!1,c=a.originalEvent;if("dblclick"==a.type){var b=a.coordinate,c=c.shiftKey?-this.v:this.v,d=W(a.map);Dd(d,c,b,this.w);a.preventDefault();b=!0}return!b};function Hd(a){a=a.originalEvent;return a.altKey&&!(a.metaKey||a.ctrlKey)&&a.shiftKey}function Id(a){a=a.originalEvent;return 0==a.button&&!(Xa&&Ya&&a.ctrlKey)}function Jd(a){a=a.originalEvent;return!a.altKey&&!(a.metaKey||a.ctrlKey)&&!a.shiftKey}function Kd(a){a=a.originalEvent;return!a.altKey&&!(a.metaKey||a.ctrlKey)&&a.shiftKey}function Ld(a){a=a.originalEvent.target.tagName;return"INPUT"!==a&&"SELECT"!==a&&"TEXTAREA"!==a}function Md(a){T(a.ke,56);return"mouse"==a.ke.pointerType};function Nd(a){a=a?a:{};X.call(this,{handleEvent:a.handleEvent?a.handleEvent:Od});this.Ig=a.handleDownEvent?a.handleDownEvent:vc;this.Jg=a.handleDragEvent?a.handleDragEvent:na;this.Tg=a.handleMoveEvent?a.handleMoveEvent:na;this.eh=a.handleUpEvent?a.handleUpEvent:vc;this.yb=!1;this.sc={};this.H=[]}J(Nd,X);function Pd(a){for(var b=a.length,c=0,d=0,e=0;e<b;e++)c+=a[e].clientX,d+=a[e].clientY;return[c/b,d/b]}
function Od(a){if(!(a instanceof Pa))return!0;var b=!1,c=a.type;if("pointerdown"===c||"pointerdrag"===c||"pointerup"===c){c=a.ke;"pointerup"==a.type?delete this.sc[c.pointerId]:"pointerdown"==a.type?this.sc[c.pointerId]=c:c.pointerId in this.sc&&(this.sc[c.pointerId]=c);var c=this.sc,d=[],e;for(e in c)d.push(c[e]);this.H=d}this.yb?"pointerdrag"==a.type?this.Jg(a):"pointerup"==a.type&&(this.yb=this.eh(a)&&0<this.H.length):"pointerdown"==a.type?(this.yb=a=this.Ig(a),b=this.pc(a)):"pointermove"==a.type&&
this.Tg(a);return!b}Nd.prototype.pc=function(a){return a};function Qd(a){Nd.call(this,{handleDownEvent:Rd,handleDragEvent:Sd,handleUpEvent:Td});a=a?a:{};this.$=a.kinetic;this.zb=null;this.qa=a.condition?a.condition:Jd;this.rf=!1}J(Qd,Nd);
function Sd(a){var b=this.H,c=Pd(b);if(b.length==this.kh){if(this.$&&this.$.update(c[0],c[1]),this.zb){var d=this.zb[0]-c[0],e=c[1]-this.zb[1];a=W(a.map);var f=a.o(),e=d=[d,e],g=f.resolution;e[0]*=g;e[1]*=g;fc(d,f.rotation);e=d;f=f.center;e[0]+=f[0];e[1]+=f[1];d=a.Ea.center(d);nd(a,d)}}else this.$&&Bd(this.$);this.zb=c;this.kh=b.length}
function Td(a){var b=a.map;a=W(b);if(0===this.H.length){if(!this.rf&&this.$&&this.$.end()){var c;c=this.$;c=(c.qf-c.Lc)/c.sg;var d=this.$.Gd,e=cd(a),e=Ud(b,e),b=b.$b([e[0]-c*Math.cos(d),e[1]-c*Math.sin(d)]);a.animate({center:a.Ea.center(b),duration:500,easing:gc})}dd(a,1,-1);return!1}this.$&&Bd(this.$);this.zb=null;return!0}
function Rd(a){if(0<this.H.length&&this.qa(a)){var b=W(a.map);this.zb=null;this.yb||dd(b,1,1);fd(b)[0]&&nd(b,a.frameState.viewState.center);this.$&&Bd(this.$);this.rf=1<this.H.length;return!0}return!1}Qd.prototype.pc=vc;function Vd(a){a=a?a:{};Nd.call(this,{handleDownEvent:Wd,handleDragEvent:Xd,handleUpEvent:Yd});this.qa=a.condition?a.condition:Hd;this.wa=void 0;this.w=void 0!==a.duration?a.duration:250}J(Vd,Nd);function Xd(a){if(Md(a)){var b=a.map,c=b.ac();a=a.pixel;c=Math.atan2(c[1]/2-a[1],a[0]-c[0]/2);if(void 0!==this.wa){a=c-this.wa;var b=W(b),d=V(b);Cd(b,d-a)}this.wa=c}}function Yd(a){if(!Md(a))return!0;a=W(a.map);dd(a,1,-1);var b=V(a),c=this.w,b=a.constrainRotation(b,0);Cd(a,b,void 0,c);return!1}
function Wd(a){return Md(a)&&Id(a)&&this.qa(a)?(dd(W(a.map),1,1),this.wa=void 0,!0):!1}Vd.prototype.pc=vc;function be(a){this.Bc=null;this.sa=document.createElement("div");this.sa.style.position="absolute";this.sa.className="ol-box "+a;this.yc=this.na=this.a=null}J(be,za);be.prototype.l=function(){this.setMap(null)};function ce(a){var b=a.na,c=a.yc;a=a.sa.style;a.left=Math.min(b[0],c[0])+"px";a.top=Math.min(b[1],c[1])+"px";a.width=Math.abs(c[0]-b[0])+"px";a.height=Math.abs(c[1]-b[1])+"px"}
be.prototype.setMap=function(a){if(this.a){this.a.ad.removeChild(this.sa);var b=this.sa.style;b.left=b.top=b.width=b.height="inherit"}(this.a=a)&&this.a.ad.appendChild(this.sa)};function de(a){var b=a.na,c=a.yc,b=[b,[b[0],c[1]],c,[c[0],b[1]]].map(a.a.$b,a.a);b[4]=b[0].slice();a.Bc?$c(a.Bc,[b]):a.Bc=new Zc([b])}be.prototype.Ud=function(){return this.Bc};function ee(a){Nd.call(this,{handleDownEvent:fe,handleDragEvent:ge,handleUpEvent:he});a=a?a:{};this.Rb=new be(a.className||"ol-dragbox");this.na=null;this.qa=a.condition?a.condition:uc;this.ng=a.boxEndCondition?a.boxEndCondition:ie}J(ee,Nd);function ie(a,b,c){a=c[0]-b[0];b=c[1]-b[1];return 64<=a*a+b*b}function ge(a){if(Md(a)){var b=this.Rb,c=a.pixel;b.na=this.na;b.yc=c;de(b);ce(b);this.dispatchEvent(new je(ke,a.coordinate,a))}}ee.prototype.Ud=function(){return this.Rb.Ud()};ee.prototype.sf=na;
function he(a){if(!Md(a))return!0;this.Rb.setMap(null);this.ng(a,this.na,a.pixel)&&(this.sf(a),this.dispatchEvent(new je(le,a.coordinate,a)));return!1}function fe(a){if(Md(a)&&Id(a)&&this.qa(a)){this.na=a.pixel;this.Rb.setMap(a.map);var b=this.Rb,c=this.na;b.na=this.na;b.yc=c;de(b);ce(b);this.dispatchEvent(new je(me,a.coordinate,a));return!0}return!1}var me="boxstart",ke="boxdrag",le="boxend";function je(a,b,c){O.call(this,a);this.coordinate=b;this.mapBrowserEvent=c}J(je,O);function ne(a){a=a?a:{};var b=a.condition?a.condition:Kd;this.w=void 0!==a.duration?a.duration:200;this.Mh=void 0!==a.out?a.out:!1;ee.call(this,{condition:b,className:a.className||"ol-dragzoom"})}J(ne,ee);
ne.prototype.sf=function(){var a=this.a,b=W(a),c=a.ac(),d=this.Ud().A();if(this.Mh){var e;e=c||jd(b);var f=cd(b);T(f,1);var g=b.h();T(void 0!==g,2);var h=V(b);T(void 0!==h,3);e=rc(f,g,h,e);d=[Ud(a,[d[0],d[1]]),Ud(a,[d[2],d[3]])];a=mc(Infinity,Infinity,-Infinity,-Infinity,void 0);f=0;for(g=d.length;f<g;++f)lc(a,d[f]);a=1/kd(a,c);d=(e[2]-e[0])/2*(a-1);a=(e[3]-e[1])/2*(a-1);e[0]-=d;e[2]+=d;e[1]-=a;e[3]+=a;d=e}c=b.constrainResolution(kd(d,c));e=qc(d);e=b.Ea.center(e);b.animate({resolution:c,center:e,
duration:this.w,easing:gc})};function oe(a){X.call(this,{handleEvent:pe});a=a||{};this.ug=function(a){return Jd(a)&&Ld(a)};this.qa=void 0!==a.condition?a.condition:this.ug;this.w=void 0!==a.duration?a.duration:100;this.Oh=void 0!==a.pixelDelta?a.pixelDelta:128}J(oe,X);
function pe(a){var b=!1;if("keydown"==a.type){var c=a.originalEvent.keyCode;if(this.qa(a)&&(40==c||37==c||39==c||38==c)){var b=W(a.map),d=b.h()*this.Oh,e=0,f=0;40==c?f=-d:37==c?e=-d:39==c?e=d:f=d;d=[e,f];fc(d,V(b));c=this.w;if(e=cd(b))d=b.Ea.center([e[0]+d[0],e[1]+d[1]]),c?b.animate({duration:c,easing:ic,center:d}):nd(b,d);a.preventDefault();b=!0}}return!b};function qe(a){X.call(this,{handleEvent:re});a=a?a:{};this.qa=a.condition?a.condition:Ld;this.v=a.delta?a.delta:1;this.w=void 0!==a.duration?a.duration:100}J(qe,X);function re(a){var b=!1;if("keydown"==a.type||"keypress"==a.type){var c=a.originalEvent.charCode;!this.qa(a)||43!=c&&45!=c||(b=43==c?this.v:-this.v,c=W(a.map),Dd(c,b,void 0,this.w),a.preventDefault(),b=!0)}return!b};function se(a){X.call(this,{handleEvent:te});a=a||{};this.v=0;this.w=void 0!==a.duration?a.duration:250;this.ud=void 0!==a.timeout?a.timeout:80;this.yi=void 0!==a.useAnchor?a.useAnchor:!0;this.fb=null;this.Xc=this.Pa=this.Kb=void 0;this.Of=400;this.vd=void 0;this.ri=300;this.Pf=1.5}J(se,X);
function te(a){var b=a.type;if("wheel"!==b&&"mousewheel"!==b)return!0;a.preventDefault();var b=a.map,c=a.originalEvent;this.yi&&(this.fb=a.coordinate);var d;"wheel"==a.type?(d=c.deltaY,Va&&c.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(d/=Za),c.deltaMode===WheelEvent.DOM_DELTA_LINE&&(d*=40)):"mousewheel"==a.type&&(d=-c.wheelDeltaY,Wa&&(d/=3));if(0===d)return!1;a=Date.now();void 0===this.Kb&&(this.Kb=a);if(!this.Xc||a-this.Kb>this.Of)this.Xc=4>Math.abs(d)?ue:ve;if(this.Xc===ue){b=W(b);this.vd?clearTimeout(this.vd):
dd(b,1,1);this.vd=setTimeout(this.tg.bind(this),this.Of);d=b.h()*Math.pow(2,d/this.ri);var c=b.vb(),e=b.ub(),f=0;d<c?(d=Math.max(d,c/this.Pf),f=1):d>e&&(d=Math.min(d,e*this.Pf),f=-1);if(this.fb){var g=hd(b,d,this.fb);nd(b,b.Ea.center(g))}md(b,d);0<f?b.animate({resolution:c,easing:gc,anchor:this.fb,duration:500}):0>f&&b.animate({resolution:e,easing:gc,anchor:this.fb,duration:500});this.Kb=a;return!1}this.v+=d;a=Math.max(this.ud-(a-this.Kb),0);clearTimeout(this.Pa);this.Pa=setTimeout(this.gh.bind(this,
b),a);return!1}se.prototype.tg=function(){this.vd=void 0;dd(W(this.a),1,-1)};se.prototype.gh=function(a){a=W(a);ed(a)&&gd(a);Dd(a,-Tb(this.v,-1,1),this.fb,this.w);this.Xc=void 0;this.v=0;this.fb=null;this.Pa=this.Kb=void 0};var ue="trackpad",ve="wheel";function we(a){Nd.call(this,{handleDownEvent:xe,handleDragEvent:ye,handleUpEvent:ze});a=a||{};this.P=null;this.wa=void 0;this.oc=!1;this.fd=0;this.hi=void 0!==a.threshold?a.threshold:.3;this.w=void 0!==a.duration?a.duration:250}J(we,Nd);
function ye(a){var b=0,c=this.H[0],d=this.H[1],c=Math.atan2(d.clientY-c.clientY,d.clientX-c.clientX);void 0!==this.wa&&(b=c-this.wa,this.fd+=b,!this.oc&&Math.abs(this.fd)>this.hi&&(this.oc=!0));this.wa=c;a=a.map;c=a.B.getBoundingClientRect();d=Pd(this.H);d[0]-=c.left;d[1]-=c.top;this.P=a.$b(d);this.oc&&(c=W(a),d=V(c),a.render(),Cd(c,d+b,this.P))}
function ze(a){if(2>this.H.length){a=W(a.map);dd(a,1,-1);if(this.oc){var b=V(a),c=this.P,d=this.w,b=a.constrainRotation(b,0);Cd(a,b,c,d)}return!1}return!0}function xe(a){return 2<=this.H.length?(a=a.map,this.P=null,this.wa=void 0,this.oc=!1,this.fd=0,this.yb||dd(W(a),1,1),!0):!1}we.prototype.pc=vc;function Ae(a){Nd.call(this,{handleDownEvent:Be,handleDragEvent:Ce,handleUpEvent:De});a=a?a:{};this.pg=a.constrainResolution||!1;this.P=null;this.w=void 0!==a.duration?a.duration:400;this.Oc=void 0;this.de=1}J(Ae,Nd);
function Ce(a){var b=1,c=this.H[0],d=this.H[1],e=c.clientX-d.clientX,c=c.clientY-d.clientY,e=Math.sqrt(e*e+c*c);void 0!==this.Oc&&(b=this.Oc/e);this.Oc=e;a=a.map;var e=W(a),d=e.h(),f=e.ub(),g=e.vb(),c=d*b;c>f?(b=f/d,c=f):c<g&&(b=g/d,c=g);1!=b&&(this.de=b);b=a.B.getBoundingClientRect();d=Pd(this.H);d[0]-=b.left;d[1]-=b.top;this.P=a.$b(d);a.render();Ed(e,c,this.P)}
function De(a){if(2>this.H.length){a=W(a.map);dd(a,1,-1);var b=a.h();if(this.pg||b<a.vb()||b>a.ub()){var c=this.P,d=this.w,b=a.constrainResolution(b,0,this.de-1);Ed(a,b,c,d)}return!1}return!0}function Be(a){return 2<=this.H.length?(a=a.map,this.P=null,this.Oc=void 0,this.de=1,this.yb||dd(W(a),1,1),!0):!1}Ae.prototype.pc=vc;function Ee(a){a=a?a:{};var b=new S,c=new Ad(-.005,.05,100);(void 0!==a.altShiftDragRotate?a.altShiftDragRotate:1)&&b.push(new Vd);(void 0!==a.doubleClickZoom?a.doubleClickZoom:1)&&b.push(new Fd({delta:a.zoomDelta,duration:a.zoomDuration}));(void 0!==a.dragPan?a.dragPan:1)&&b.push(new Qd({kinetic:c}));(void 0!==a.pinchRotate?a.pinchRotate:1)&&b.push(new we);(void 0!==a.pinchZoom?a.pinchZoom:1)&&b.push(new Ae({duration:a.zoomDuration}));if(void 0!==a.keyboard?a.keyboard:1)b.push(new oe),b.push(new qe({delta:a.zoomDelta,
duration:a.zoomDuration}));(void 0!==a.mouseWheelZoom?a.mouseWheelZoom:1)&&b.push(new se({duration:a.zoomDuration}));(void 0!==a.shiftDragZoom?a.shiftDragZoom:1)&&b.push(new ne({duration:a.zoomDuration}));return b};function Fe(a){R.call(this);var b=pa({},a);b.opacity=void 0!==a.opacity?a.opacity:1;b.visible=void 0!==a.visible?a.visible:!0;b.zIndex=void 0!==a.zIndex?a.zIndex:0;b.maxResolution=void 0!==a.maxResolution?a.maxResolution:Infinity;b.minResolution=void 0!==a.minResolution?a.minResolution:0;Ea(this,b);this.oa={layer:this,managed:!0}}J(Fe,R);
function Ge(a){a.oa.opacity=Tb(a.get("opacity"),0,1);a.oa.sourceState=a.Ve();a.oa.visible=a.get("visible");a.oa.extent=a.A();a.oa.zIndex=a.get("zIndex");a.oa.maxResolution=a.ub();a.oa.minResolution=Math.max(a.vb(),0);return a.oa}Fe.prototype.A=function(){return this.get("extent")};Fe.prototype.ub=function(){return this.get("maxResolution")};Fe.prototype.vb=function(){return this.get("minResolution")};function He(a){var b=a||{};a=pa({},b);delete a.layers;b=b.layers;Fe.call(this,a);this.ge=[];this.hb={};N(this,Ga(Ie),this.Qg,this);b?Array.isArray(b)?b=new S(b.slice()):T(b instanceof S,43):b=new S;this.set(Ie,b)}J(He,Fe);l=He.prototype;l.Oe=function(){};l.Hc=function(){this.get("visible")&&this.j()};
l.Qg=function(){this.ge.forEach(M);this.ge.length=0;var a=this.Ec();this.ge.push(N(a,"add",this.Pg,this),N(a,"remove",this.Rg,this));for(var b in this.hb)this.hb[b].forEach(M);qa(this.hb);var a=a.Cc(),c,d;b=0;for(c=a.length;b<c;b++)d=a[b],this.hb[L(d).toString()]=[N(d,"propertychange",this.Hc,this),N(d,"change",this.Hc,this)];this.j()};l.Pg=function(a){a=a.element;var b=L(a).toString();this.hb[b]=[N(a,"propertychange",this.Hc,this),N(a,"change",this.Hc,this)];this.j()};
l.Rg=function(a){a=L(a.element).toString();this.hb[a].forEach(M);delete this.hb[a];this.j()};l.Ec=function(){return this.get(Ie)};
l.Wd=function(a){var b=void 0!==a?a:[],c=b.length;this.Ec().forEach(function(a){a.Wd(b)});a=Ge(this);var d,e;for(d=b.length;c<d;c++)e=b[c],e.opacity*=a.opacity,e.visible=e.visible&&a.visible,e.maxResolution=Math.min(e.maxResolution,a.maxResolution),e.minResolution=Math.max(e.minResolution,a.minResolution),void 0!==a.extent&&(e.extent=void 0!==e.extent?sc(e.extent,a.extent):a.extent);return b};l.Ve=function(){return"ready"};var Ie="layers";function Je(a){Ac.call(this,{code:a,units:"m",extent:Ke,global:!0,worldExtent:Le,getPointResolution:function(a,c){return a/Ub(c[1]/6378137)}})}J(Je,Ac);var Me=6378137*Math.PI,Ke=[-Me,-Me,Me,Me],Le=[-180,-85,180,85],Ne="EPSG:3857 EPSG:102100 EPSG:102113 EPSG:900913 urn:ogc:def:crs:EPSG:6.18:3:3857 urn:ogc:def:crs:EPSG::3857 http://www.opengis.net/gml/srs/epsg.xml#3857".split(" ").map(function(a){return new Je(a)});
function Oe(a,b,c){var d=a.length;c=1<c?c:2;void 0===b&&(b=2<c?a.slice():Array(d));for(var e=0;e<d;e+=c){b[e]=Me*a[e]/180;var f=6378137*Math.log(Math.tan(Math.PI*(a[e+1]+90)/360));f>Me?f=Me:f<-Me&&(f=-Me);b[e+1]=f}return b}function Pe(a,b,c){var d=a.length;c=1<c?c:2;void 0===b&&(b=2<c?a.slice():Array(d));for(var e=0;e<d;e+=c)b[e]=180*a[e]/Me,b[e+1]=360*Math.atan(Math.exp(a[e+1]/6378137))/Math.PI-90;return b};var Qe=new wc(6378137);function Re(a,b){Ac.call(this,{code:a,units:"degrees",extent:Se,axisOrientation:b,global:!0,metersPerUnit:Te,worldExtent:Se})}J(Re,Ac);var Se=[-180,-90,180,90],Te=Math.PI*Qe.radius/180,Ue=[new Re("CRS:84"),new Re("EPSG:4326","neu"),new Re("urn:ogc:def:crs:EPSG::4326","neu"),new Re("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new Re("urn:ogc:def:crs:OGC:1.3:CRS84"),new Re("urn:ogc:def:crs:OGC:2:84"),new Re("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Re("urn:x-ogc:def:crs:EPSG:4326","neu")];function Ve(a){var b=pa({},a);delete b.source;Fe.call(this,b);this.gd=this.Uc=this.Tc=null;a.map&&this.setMap(a.map);N(this,Ga("source"),this.$g,this);this.set("source",a.source?a.source:null)}J(Ve,Fe);l=Ve.prototype;l.Wd=function(a){a=a?a:[];a.push(Ge(this));return a};l.$a=function(){return this.get("source")||null};l.Ve=function(){var a=this.$a();return a?a.o():"undefined"};l.Zg=function(){this.j()};
l.$g=function(){this.gd&&(M(this.gd),this.gd=null);var a=this.$a();a&&(this.gd=N(a,"change",this.Zg,this));this.j()};l.setMap=function(a){this.Tc&&(M(this.Tc),this.Tc=null);a||this.j();this.Uc&&(M(this.Uc),this.Uc=null);a&&(this.Tc=N(a,"precompose",function(a){var c=Ge(this);c.managed=!1;c.zIndex=Infinity;a.frameState.layerStatesArray.push(c);a.frameState.layerStates[L(this)]=c},this),this.Uc=N(this,"change",a.render,a),this.j())};function We(a){var b=a[0];b!=(b|0)&&(b=b+.5|0);var c=a[1];c!=(c|0)&&(c=c+.5|0);var d=a[2];d!=(d|0)&&(d=d+.5|0);return"rgba("+b+","+c+","+d+","+(void 0===a[3]?1:a[3])+")"};function Xe(){this.Sa={};this.vc=0;this.th=32}Xe.prototype.clear=function(){this.Sa={};this.vc=0};Xe.prototype.get=function(a,b,c){a=b+":"+a+":"+(c?"string"===typeof c?c:We(c):"null");return a in this.Sa?this.Sa[a]:null};Xe.prototype.set=function(a,b,c,d){this.Sa[b+":"+a+":"+(c?"string"===typeof c?c:We(c):"null")]=d;++this.vc};var Ye=new Xe;var Ze=Array(6);function $e(){return[1,0,0,1,0,0]}function af(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],k=b[0],n=b[1],m=b[2],p=b[3],q=b[4],t=b[5];a[0]=c*k+e*n;a[1]=d*k+f*n;a[2]=c*m+e*p;a[3]=d*m+f*p;a[4]=c*q+e*t+g;a[5]=d*q+f*t+h}function bf(a,b,c,d,e,f,g){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=f;a[5]=g;return a}function cf(a,b){var c=b[0],d=b[1];b[0]=a[0]*c+a[2]*d+a[4];b[1]=a[1]*c+a[3]*d+a[5];return b}function df(a,b){var c=Math.cos(b),d=Math.sin(b);af(a,bf(Ze,c,d,-d,c,0,0))}
function ef(a,b,c,d,e,f,g,h){var k=Math.sin(f);f=Math.cos(f);a[0]=d*f;a[1]=e*k;a[2]=-d*k;a[3]=e*f;a[4]=g*d*f-h*d*k+b;a[5]=g*e*k+h*e*f+c;return a};function ff(a,b){this.a=b;this.la={};this.fe={}}J(ff,za);function gf(a){var b=a.viewState,c=a.coordinateToPixelTransform,d=a.pixelToCoordinateTransform;ef(c,a.size[0]/2,a.size[1]/2,1/b.resolution,-1/b.resolution,-b.rotation,-b.center[0],-b.center[1]);d[0]=c[0];d[1]=c[1];d[2]=c[2];d[3]=c[3];d[4]=c[4];d[5]=c[5];a=d[0]*d[3]-d[1]*d[2];T(0!==a,32);var b=d[0],c=d[1],e=d[2],f=d[3],g=d[4],h=d[5];d[0]=f/a;d[1]=-c/a;d[2]=-e/a;d[3]=b/a;d[4]=(e*h-f*g)/a;d[5]=-(b*h-c*g)/a}l=ff.prototype;l.l=function(){for(var a in this.la)this.la[a].ea()};
function hf(){if(Ye.vc>Ye.th){var a=0,b,c;for(b in Ye.Sa)c=Ye.Sa[b],0!==(a++&3)||c.hasListener()||(delete Ye.Sa[b],--Ye.vc)}}function jf(a,b){var c=L(b).toString();if(c in a.la)return a.la[c];var d=b.Oe(a);a.la[c]=d;a.fe[c]=N(d,"change",a.Og,a);return d}l.Fc=function(){return this.a};l.Og=function(){this.a.render()};l.oe=na;l.ai=function(a,b){for(var c in this.la)if(!(b&&c in b.layerStates)){var d=c,e=this.la[d];delete this.la[d];M(this.fe[d]);delete this.fe[d];e.ea()}};
function kf(a,b){for(var c in a.la)if(!(c in b.layerStates)){b.postRenderFunctions.push(a.ai.bind(a));break}}function xb(a,b){return a.zIndex-b.zIndex};function lf(a,b,c,d,e){O.call(this,a);this.vectorContext=b;this.frameState=c;this.context=d;this.glContext=e}J(lf,O);function mf(a,b,c,d){0!==b&&(a.translate(c,d),a.rotate(b),a.translate(-c,-d))};function nf(){};function of(a,b,c,d){this.ra=a;this.lc=b;this.ka=c;this.wd=d;this.cb=null}J(of,nf);function pf(a,b){ff.call(this,0,b);this.ra=od();this.c=this.ra.canvas;this.c.style.width="100%";this.c.style.height="100%";this.c.style.display="block";this.c.className="ol-unselectable";a.insertBefore(this.c,a.childNodes[0]||null);this.M=!0;this.wd=$e()}J(pf,ff);pf.prototype.da=function(a,b){var c=this.a,d=this.ra;if(c.hasListener(a)){var e=b.extent,f=b.pixelRatio,g=this.Zd(b);c.dispatchEvent(new lf(a,new of(d,f,e,g),b,d,null))}};
pf.prototype.Zd=function(a){var b=a.viewState;a=a.pixelRatio/b.resolution;return ef(this.wd,this.c.width/2,this.c.height/2,a,-a,-b.rotation,-b.center[0],-b.center[1])};pf.prototype.ab=function(){return"canvas"};
pf.prototype.oe=function(a){if(a){var b=this.ra,c=a.pixelRatio,d=Math.round(a.size[0]*c),e=Math.round(a.size[1]*c);this.c.width!=d||this.c.height!=e?(this.c.width=d,this.c.height=e):b.clearRect(0,0,d,e);c=a.viewState.rotation;gf(a);this.da("precompose",a);var f=a.layerStatesArray;wb(f);c&&(b.save(),mf(b,c,d/2,e/2));var d=a.viewState.resolution,g,h,k,e=0;for(g=f.length;e<g;++e)k=f[e],h=k.layer,h=jf(this,h),k.visible&&d>=k.minResolution&&d<k.maxResolution&&"ready"==k.sourceState&&h.me(a,k)&&h.Md(a,
k,b);c&&b.restore();this.da("postcompose",a);this.M||(this.c.style.display="",this.M=!0);kf(this,a);a.postRenderFunctions.push(hf)}else this.M&&(this.c.style.display="none",this.M=!1)};function qf(a){this.mb=a}qf.prototype.$a=function(){return this.mb};function rf(a){this.mb=a}J(rf,qf);rf.prototype.ab=function(){return 35632};function sf(a){this.mb=a}J(sf,qf);sf.prototype.ab=function(){return 35633};function tf(a,b){a[0]=b[0];a[1]=b[1];a[4]=b[2];a[5]=b[3];a[12]=b[4];a[13]=b[5];return a};function uf(a,b){this.jg=void 0!==a?a:[];this.xi=void 0!==b?b:vf}uf.prototype.Cc=function(){return this.jg};var vf=35044;function wf(a,b){this.c=a;this.F=b;this.Da={};this.Hb={};this.Fb={};this.bf=this.cf=this.af=this.Qd=null;(this.$e=0<=ma.indexOf("OES_element_index_uint"))&&b.getExtension("OES_element_index_uint");N(this.c,"webglcontextlost",this.bb,this);N(this.c,"webglcontextrestored",this.$d,this)}J(wf,za);l=wf.prototype;
l.bindBuffer=function(a,b){var c=this.F,d=b.Cc(),e=String(L(b));if(e in this.Da)c.bindBuffer(a,this.Da[e].buffer);else{var f=c.createBuffer();c.bindBuffer(a,f);var g;34962==a?g=new Float32Array(d):34963==a&&(g=this.$e?new Uint32Array(d):new Uint16Array(d));c.bufferData(a,g,b.xi);this.Da[e]={buf:b,buffer:f}}};l.deleteBuffer=function(a){var b=this.F;a=String(L(a));var c=this.Da[a];b.isContextLost()||b.deleteBuffer(c.buffer);delete this.Da[a]};
l.l=function(){ya(this.c);var a=this.F;if(!a.isContextLost()){for(var b in this.Da)a.deleteBuffer(this.Da[b].buffer);for(b in this.Fb)a.deleteProgram(this.Fb[b]);for(b in this.Hb)a.deleteShader(this.Hb[b]);a.deleteFramebuffer(this.af);a.deleteRenderbuffer(this.bf);a.deleteTexture(this.cf)}};function xf(a,b){var c=String(L(b));if(c in a.Hb)return a.Hb[c];var d=a.F,e=d.createShader(b.ab());d.shaderSource(e,b.$a());d.compileShader(e);return a.Hb[c]=e}
function yf(a,b,c){var d=L(b)+"/"+L(c);if(d in a.Fb)return a.Fb[d];var e=a.F,f=e.createProgram();e.attachShader(f,xf(a,b));e.attachShader(f,xf(a,c));e.linkProgram(f);return a.Fb[d]=f}l.bb=function(){qa(this.Da);qa(this.Hb);qa(this.Fb);this.bf=this.cf=this.af=this.Qd=null};l.$d=function(){};l.useProgram=function(a){if(a==this.Qd)return!1;this.F.useProgram(a);this.Qd=a;return!0};
function zf(a,b,c){var d=a.createTexture();a.bindTexture(a.TEXTURE_2D,d);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,b,c,0,a.RGBA,a.UNSIGNED_BYTE,null);return d};(function(){var a={},b={Xa:a};(function(c){"object"===typeof a&&"undefined"!==typeof b?b.Xa=c():("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).Qi=c()})(function(){return function d(a,b,g){function h(m,n){if(!b[m]){if(!a[m]){var q="function"==typeof require&&require;if(!n&&q)return q(m,!0);if(k)return k(m,!0);q=Error("Cannot find module '"+m+"'");throw q.code="MODULE_NOT_FOUND",q;}q=b[m]={Xa:{}};a[m][0].call(q.Xa,function(b){var d=a[m][1][b];
return h(d?d:b)},q,q.Xa,d,a,b,g)}return b[m].Xa}for(var k="function"==typeof require&&require,n=0;n<g.length;n++)h(g[n]);return h}({1:[function(a,b){function f(a,b,d,e,q){d=d||0;e=e||a.length-1;for(q=q||h;e>d;){if(600<e-d){var t=e-d+1,r=b-d+1,w=Math.log(t),x=.5*Math.exp(2*w/3),w=.5*Math.sqrt(w*x*(t-x)/t)*(0>r-t/2?-1:1);f(a,b,Math.max(d,Math.floor(b-r*x/t+w)),Math.min(e,Math.floor(b+(t-r)*x/t+w)),q)}t=a[b];r=d;x=e;g(a,d,b);for(0<q(a[e],t)&&g(a,d,e);r<x;){g(a,r,x);r++;for(x--;0>q(a[r],t);)r++;for(;0<
q(a[x],t);)x--}0===q(a[d],t)?g(a,d,x):(x++,g(a,x,e));x<=b&&(d=x+1);b<=x&&(e=x-1)}}function g(a,b,d){var e=a[b];a[b]=a[d];a[d]=e}function h(a,b){return a<b?-1:a>b?1:0}b.Xa=f},{}],2:[function(a,b){function f(a,b){if(!(this instanceof f))return new f(a,b);this.Fd=Math.max(4,a||9);this.Ee=Math.max(2,Math.ceil(.4*this.Fd));b&&this.ag(b);this.clear()}function g(a,b){h(a,0,a.children.length,b,a)}function h(a,b,d,e,f){f||(f=w(null));f.minX=Infinity;f.minY=Infinity;f.maxX=-Infinity;f.maxY=-Infinity;for(var g;b<
d;b++)g=a.children[b],k(f,a.K?e(g):g);return f}function k(a,b){a.minX=Math.min(a.minX,b.minX);a.minY=Math.min(a.minY,b.minY);a.maxX=Math.max(a.maxX,b.maxX);a.maxY=Math.max(a.maxY,b.maxY)}function n(a,b){return a.minX-b.minX}function m(a,b){return a.minY-b.minY}function p(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function q(a){return a.maxX-a.minX+(a.maxY-a.minY)}function t(a,b){return a.minX<=b.minX&&a.minY<=b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY}function r(a,b){return b.minX<=a.maxX&&b.minY<=a.maxY&&
b.maxX>=a.minX&&b.maxY>=a.minY}function w(a){return{children:a,height:1,K:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function x(a,b,d,e,f){for(var g=[b,d],h;g.length;)d=g.pop(),b=g.pop(),d-b<=e||(h=b+Math.ceil((d-b)/e/2)*e,D(a,h,b,d,f),g.push(b,h,h,d))}b.Xa=f;var D=a("quickselect");f.prototype={all:function(){return this.Ae(this.data,[])},search:function(a){var b=this.data,d=[],e=this.W;if(!r(a,b))return d;for(var f=[],g,h,k,m;b;){g=0;for(h=b.children.length;g<h;g++)k=b.children[g],
m=b.K?e(k):k,r(a,m)&&(b.K?d.push(k):t(a,m)?this.Ae(k,d):f.push(k));b=f.pop()}return d},load:function(a){if(!a||!a.length)return this;if(a.length<this.Ee){for(var b=0,d=a.length;b<d;b++)this.ih(a[b]);return this}a=this.Ce(a.slice(),0,a.length-1,0);this.data.children.length?this.data.height===a.height?this.Fe(this.data,a):(this.data.height<a.height&&(b=this.data,this.data=a,a=b),this.De(a,this.data.height-a.height-1,!0)):this.data=a;return this},ih:function(a){a&&this.De(a,this.data.height-1);return this},
clear:function(){this.data=w([]);return this},remove:function(a,b){if(!a)return this;for(var d=this.data,e=this.W(a),f=[],g=[],h,k,m,n;d||f.length;){d||(d=f.pop(),k=f[f.length-1],h=g.pop(),n=!0);if(d.K){a:{m=a;var q=d.children,p=b;if(p){for(var r=0;r<q.length;r++)if(p(m,q[r])){m=r;break a}m=-1}else m=q.indexOf(m)}if(-1!==m){d.children.splice(m,1);f.push(d);this.$f(f);break}}n||d.K||!t(d,e)?k?(h++,d=k.children[h],n=!1):d=null:(f.push(d),g.push(h),h=0,k=d,d=d.children[0])}return this},W:function(a){return a},
Kd:n,Ld:m,toJSON:function(){return this.data},Ae:function(a,b){for(var d=[];a;)a.K?b.push.apply(b,a.children):d.push.apply(d,a.children),a=d.pop();return b},Ce:function(a,b,d,e){var f=d-b+1,h=this.Fd,k;if(f<=h)return k=w(a.slice(b,d+1)),g(k,this.W),k;e||(e=Math.ceil(Math.log(f)/Math.log(h)),h=Math.ceil(f/Math.pow(h,e-1)));k=w([]);k.K=!1;k.height=e;var f=Math.ceil(f/h),h=f*Math.ceil(Math.sqrt(h)),m,n,q;for(x(a,b,d,h,this.Kd);b<=d;b+=h)for(n=Math.min(b+h-1,d),x(a,b,n,f,this.Ld),m=b;m<=n;m+=f)q=Math.min(m+
f-1,n),k.children.push(this.Ce(a,m,q,e-1));g(k,this.W);return k},Zf:function(a,b,d,e){for(var f,g,h,k,m,n,q,r;;){e.push(b);if(b.K||e.length-1===d)break;q=r=Infinity;f=0;for(g=b.children.length;f<g;f++)h=b.children[f],m=p(h),n=(Math.max(h.maxX,a.maxX)-Math.min(h.minX,a.minX))*(Math.max(h.maxY,a.maxY)-Math.min(h.minY,a.minY))-m,n<r?(r=n,q=m<q?m:q,k=h):n===r&&m<q&&(q=m,k=h);b=k||b.children[0]}return b},De:function(a,b,d){var e=this.W;d=d?a:e(a);var e=[],f=this.Zf(d,this.data,b,e);f.children.push(a);
for(k(f,d);0<=b;)if(e[b].children.length>this.Fd)this.bg(e,b),b--;else break;this.Wf(d,e,b)},bg:function(a,b){var d=a[b],e=d.children.length,f=this.Ee;this.Xf(d,f,e);e=this.Yf(d,f,e);e=w(d.children.splice(e,d.children.length-e));e.height=d.height;e.K=d.K;g(d,this.W);g(e,this.W);b?a[b-1].children.push(e):this.Fe(d,e)},Fe:function(a,b){this.data=w([a,b]);this.data.height=a.height+1;this.data.K=!1;g(this.data,this.W)},Yf:function(a,b,d){var e,f,g,k,m,n,q;m=n=Infinity;for(e=b;e<=d-b;e++)f=h(a,0,e,this.W),
g=h(a,e,d,this.W),k=Math.max(0,Math.min(f.maxX,g.maxX)-Math.max(f.minX,g.minX))*Math.max(0,Math.min(f.maxY,g.maxY)-Math.max(f.minY,g.minY)),f=p(f)+p(g),k<m?(m=k,q=e,n=f<n?f:n):k===m&&f<n&&(n=f,q=e);return q},Xf:function(a,b,d){var e=a.K?this.Kd:n,f=a.K?this.Ld:m,g=this.Be(a,b,d,e);b=this.Be(a,b,d,f);g<b&&a.children.sort(e)},Be:function(a,b,d,e){a.children.sort(e);e=this.W;var f=h(a,0,b,e),g=h(a,d-b,d,e),m=q(f)+q(g),n,p;for(n=b;n<d-b;n++)p=a.children[n],k(f,a.K?e(p):p),m+=q(f);for(n=d-b-1;n>=b;n--)p=
a.children[n],k(g,a.K?e(p):p),m+=q(g);return m},Wf:function(a,b,d){for(;0<=d;d--)k(b[d],a)},$f:function(a){for(var b=a.length-1,d;0<=b;b--)0===a[b].children.length?0<b?(d=a[b-1].children,d.splice(d.indexOf(a[b]),1)):this.clear():g(a[b],this.W)},ag:function(a){var b=["return a"," - b",";"];this.Kd=new Function("a","b",b.join(a[0]));this.Ld=new Function("a","b",b.join(a[1]));this.W=new Function("a","return {minX: a"+a[0]+", minY: a"+a[1]+", maxX: a"+a[2]+", maxY: a"+a[3]+"};")}}},{quickselect:1}]},
{},[2])(2)})})();function Af(a,b,c,d,e,f,g){this.ra=a;this.ka=f;this.lc=g;this.re=d}J(Af,nf);function Bf(){this.g=0;this.Wa={};this.ba=this.S=null}l=Bf.prototype;l.clear=function(){this.g=0;this.Wa={};this.ba=this.S=null};l.L=function(a){return this.Wa.hasOwnProperty(a)};l.forEach=function(a,b){for(var c=this.S;c;)a.call(b,c.value_,c.key_,this),c=c.newer};l.get=function(a){a=this.Wa[a];T(void 0!==a,15);if(a===this.ba)return a.value_;a===this.S?(this.S=this.S.newer,this.S.older=null):(a.newer.older=a.older,a.older.newer=a.newer);a.newer=null;a.older=this.ba;this.ba=this.ba.newer=a;return a.value_};
l.Ia=function(){return this.g};l.fa=function(){var a=Array(this.g),b=0,c;for(c=this.ba;c;c=c.older)a[b++]=c.key_;return a};l.Y=function(){var a=Array(this.g),b=0,c;for(c=this.ba;c;c=c.older)a[b++]=c.value_;return a};l.pop=function(){var a=this.S;delete this.Wa[a.key_];a.newer&&(a.newer.older=null);this.S=a.newer;this.S||(this.ba=null);--this.g;return a.value_};l.replace=function(a,b){this.get(a);this.Wa[a].value_=b};
l.set=function(a,b){T(!(a in this.Wa),16);var c={key_:a,newer:null,older:this.ba,value_:b};this.ba?this.ba.newer=c:this.S=c;this.ba=c;this.Wa[a]=c;++this.g};function Cf(a,b){ff.call(this,0,b);this.c=document.createElement("CANVAS");this.c.style.width="100%";this.c.style.height="100%";this.c.style.display="block";this.c.className="ol-unselectable";a.insertBefore(this.c,a.childNodes[0]||null);this.Le=this.Me=0;this.Ne=od();this.M=!0;this.F=Ra(this.c,{antialias:!0,depth:!0,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!1,stencil:!0});this.ra=new wf(this.c,this.F);N(this.c,"webglcontextlost",this.bb,this);N(this.c,"webglcontextrestored",this.$d,this);
this.N=new Bf;this.Ya=null;this.rc=new Nb(function(a){var b=a[1];a=a[2];var e=b[0]-this.Ya[0],b=b[1]-this.Ya[1];return 65536*Math.log(a)+Math.sqrt(e*e+b*b)/a}.bind(this),function(a){return a[0].getKey()});this.lh=function(){if(!this.rc.ec()){Rb(this.rc);var a=Ob(this.rc);Df(this,a[0],a[3],a[4])}return!1}.bind(this);this.qc=0;Ef(this)}J(Cf,ff);
function Df(a,b,c,d){var e=a.F,f=b.getKey();if(a.N.L(f))a=a.N.get(f),e.bindTexture(3553,a.texture),9729!=a.magFilter&&(e.texParameteri(3553,10240,9729),a.magFilter=9729),9729!=a.minFilter&&(e.texParameteri(3553,10241,9729),a.minFilter=9729);else{var g=e.createTexture();e.bindTexture(3553,g);if(0<d){var h=a.Ne.canvas,k=a.Ne;a.Me!==c[0]||a.Le!==c[1]?(h.width=c[0],h.height=c[1],a.Me=c[0],a.Le=c[1]):k.clearRect(0,0,c[0],c[1]);k.drawImage(b.va(),d,d,c[0],c[1],0,0,c[0],c[1]);e.texImage2D(3553,0,6408,6408,
5121,h)}else e.texImage2D(3553,0,6408,6408,5121,b.va());e.texParameteri(3553,10240,9729);e.texParameteri(3553,10241,9729);e.texParameteri(3553,10242,33071);e.texParameteri(3553,10243,33071);a.N.set(f,{texture:g,magFilter:9729,minFilter:9729})}}l=Cf.prototype;l.da=function(a,b){var c=this.a;if(c.hasListener(a)){var d=this.ra;c.dispatchEvent(new lf(a,new Af(d,0,0,b.viewState.rotation,0,b.extent,b.pixelRatio),b,null,d))}};
l.l=function(){var a=this.F;a.isContextLost()||this.N.forEach(function(b){b&&a.deleteTexture(b.texture)});this.ra.ea();ff.prototype.l.call(this)};l.yg=function(a,b){for(var c=this.F,d;1024<this.N.Ia()-this.qc;){if(d=this.N.S.value_)c.deleteTexture(d.texture);else if(+this.N.S.key_==b.index)break;else--this.qc;this.N.pop()}};l.getContext=function(){return this.ra};l.ab=function(){return"webgl"};l.bb=function(a){a.preventDefault();this.N.clear();this.qc=0;a=this.la;for(var b in a)a[b].bb()};
l.$d=function(){Ef(this);this.a.render()};function Ef(a){a=a.F;a.activeTexture(33984);a.blendFuncSeparate(770,771,1,771);a.disable(2884);a.disable(2929);a.disable(3089);a.disable(2960)}
l.oe=function(a){var b=this.getContext(),c=this.F;if(c.isContextLost())return!1;if(!a)return this.M&&(this.c.style.display="none",this.M=!1),!1;this.Ya=a.focus;this.N.set((-a.index).toString(),null);++this.qc;this.da("precompose",a);var d=[],e=a.layerStatesArray;wb(e);var f=a.viewState.resolution,g,h,k,n;g=0;for(h=e.length;g<h;++g)n=e[g],n.visible&&f>=n.minResolution&&f<n.maxResolution&&"ready"==n.sourceState&&(k=jf(this,n.layer),k.me(a,n,b)&&d.push(n));e=a.size[0]*a.pixelRatio;f=a.size[1]*a.pixelRatio;
if(this.c.width!=e||this.c.height!=f)this.c.width=e,this.c.height=f;c.bindFramebuffer(36160,null);c.clearColor(0,0,0,0);c.clear(16384);c.enable(3042);c.viewport(0,0,this.c.width,this.c.height);g=0;for(h=d.length;g<h;++g)n=d[g],k=jf(this,n.layer),k.Md(a,n,b);this.M||(this.c.style.display="",this.M=!0);gf(a);1024<this.N.Ia()-this.qc&&a.postRenderFunctions.push(this.yg.bind(this));this.rc.ec()||(a.postRenderFunctions.push(this.lh),a.animate=!0);this.da("postcompose",a);kf(this,a);a.postRenderFunctions.push(hf)};function Ff(a,b){if(Array.isArray(a))return a;void 0===b?b=[a,a]:b[0]=b[1]=a;return b};var Gf=["canvas","webgl"];
function Hf(a){R.call(this);var b=If(a);this.mh=void 0!==a.loadTilesWhileAnimating?a.loadTilesWhileAnimating:!1;this.nh=void 0!==a.loadTilesWhileInteracting?a.loadTilesWhileInteracting:!1;this.lc=void 0!==a.pixelRatio?a.pixelRatio:Za;this.qh=b.logos;this.ig=function(){this.Qb=void 0;this.ci.call(this,Date.now())}.bind(this);this.rg=$e();this.Ph=$e();this.Bg=0;this.ua=null;this.Af=kc();this.Qc=this.Ad=this.Bd=null;this.B=document.createElement("DIV");this.B.className="ol-viewport"+(ab?" ol-touch":
"");this.B.style.position="relative";this.B.style.overflow="hidden";this.B.style.width="100%";this.B.style.height="100%";this.B.style.msTouchAction="none";this.B.style.Ri="none";this.ad=document.createElement("DIV");this.ad.className="ol-overlaycontainer";this.B.appendChild(this.ad);this.$c=document.createElement("DIV");this.$c.className="ol-overlaycontainer-stopevent";a="click dblclick mousedown touchstart mspointerdown pointerdown mousewheel wheel".split(" ");for(var c=0,d=a.length;c<d;++c)N(this.$c,
a[c],Aa);this.B.appendChild(this.$c);this.lf=new Jb(this);for(var e in Oa)N(this.lf,Oa[e],this.Xe,this);this.hf=b.keyboardEventTarget;this.fc=null;N(this.B,"wheel",this.wb,this);N(this.B,"mousewheel",this.wb,this);this.Nd=b.controls;this.dc=b.interactions;this.he=b.overlays;this.xf={};this.Df=new b.rendererConstructor(this.B,this);this.Ya=null;this.zf=[];this.Lf=new Sb(this.Eg.bind(this),this.bh.bind(this));this.fi={};N(this,Ga("layergroup"),this.Ng,this);N(this,Ga("view"),this.fh,this);N(this,Ga("size"),
this.Yg,this);N(this,Ga("target"),this.ah,this);Ea(this,b.values);this.Nd.forEach(function(a){a.setMap(this)},this);N(this.Nd,"add",function(a){a.element.setMap(this)},this);N(this.Nd,"remove",function(a){a.element.setMap(null)},this);this.dc.forEach(function(a){a.setMap(this)},this);N(this.dc,"add",function(a){a.element.setMap(this)},this);N(this.dc,"remove",function(a){a.element.setMap(null)},this);this.he.forEach(this.He,this);N(this.he,"add",function(a){this.He(a.element)},this);N(this.he,"remove",
function(a){var b=a.element.Cg();void 0!==b&&delete this.xf[b.toString()];a.element.setMap(null)},this)}J(Hf,R);l=Hf.prototype;l.He=function(a){var b=a.Cg();void 0!==b&&(this.xf[b.toString()]=a);a.setMap(this)};l.l=function(){this.lf.ea();this.Df.ea();xa(this.B,"wheel",this.wb,this);xa(this.B,"mousewheel",this.wb,this);void 0!==this.Ka&&(window.removeEventListener("resize",this.Ka,!1),this.Ka=void 0);this.Qb&&(cancelAnimationFrame(this.Qb),this.Qb=void 0);this.te(null);R.prototype.l.call(this)};
function Jf(a){a=a.get("target");return void 0!==a?"string"===typeof a?document.getElementById(a):a:null}l.$b=function(a){var b=this.ua;return b?cf(b.pixelToCoordinateTransform,a.slice()):null};l.Ec=function(){return this.get("layergroup").Ec()};function Ud(a,b){var c=a.ua;return c?cf(c.coordinateToPixelTransform,b.slice(0,2)):null}l.ac=function(){return this.get("size")};function W(a){return a.get("view")}
l.Eg=function(a,b,c,d){var e=this.ua;if(!(e&&b in e.wantedTiles&&e.wantedTiles[b][a.getKey()]))return Infinity;a=c[0]-e.focus[0];c=c[1]-e.focus[1];return 65536*Math.log(d)+Math.sqrt(a*a+c*c)/d};l.wb=function(a,b){var c=new Na(b||a.type,this,a);this.Xe(c)};l.Xe=function(a){if(this.ua){this.Ya=a.coordinate;a.frameState=this.ua;var b=this.dc.Cc(),c;if(!1!==this.dispatchEvent(a))for(c=b.length-1;0<=c;c--){var d=b[c];if(d.get("active")&&!d.handleEvent(a))break}}};
l.Wg=function(){var a=this.ua,b=this.Lf;if(!b.ec()){var c=16,d=c;if(a){var e=a.viewHints;e[0]&&(c=this.mh?8:0,d=2);e[1]&&(c=this.nh?8:0,d=2)}if(b.sd<c){Rb(b);for(var e=0,f,g;b.sd<c&&e<d&&0<b.Ia();)f=Ob(b)[0],g=f.getKey(),0!==f.o()||g in b.rd||(b.rd[g]=!0,++b.sd,++e,f.load())}}b=this.zf;c=0;for(d=b.length;c<d;++c)b[c](this,a);b.length=0};l.Yg=function(){this.render()};
l.ah=function(){var a;this.get("target")&&(a=Jf(this));if(this.fc){for(var b=0,c=this.fc.length;b<c;++b)M(this.fc[b]);this.fc=null}a?(a.appendChild(this.B),a=this.hf?this.hf:a,this.fc=[N(a,"keydown",this.wb,this),N(a,"keypress",this.wb,this)],this.Ka||(this.Ka=this.Qf.bind(this),window.addEventListener("resize",this.Ka,!1))):(pd(this.B),void 0!==this.Ka&&(window.removeEventListener("resize",this.Ka,!1),this.Ka=void 0));this.Qf()};l.bh=function(){this.render()};l.Ze=function(){this.render()};
l.fh=function(){this.Bd&&(M(this.Bd),this.Bd=null);this.Ad&&(M(this.Ad),this.Ad=null);var a=W(this);a&&(this.B.setAttribute("data-view",L(a)),this.Bd=N(a,"propertychange",this.Ze,this),this.Ad=N(a,"change",this.Ze,this));this.render()};l.Ng=function(){this.Qc&&(this.Qc.forEach(M),this.Qc=null);var a=this.get("layergroup");a&&(this.Qc=[N(a,"propertychange",this.render,this),N(a,"change",this.render,this)]);this.render()};l.render=function(){void 0===this.Qb&&(this.Qb=requestAnimationFrame(this.ig))};
l.ci=function(a){var b,c,d=this.ac(),e=W(this),f=kc(),g=null,h;if(h=void 0!==d&&0<d[0]&&0<d[1]&&e)h=!!cd(e)&&void 0!==e.h();if(h){g=fd(e,this.ua?this.ua.viewHints:void 0);h=this.get("layergroup").Wd();var k={};b=0;for(c=h.length;b<c;++b)k[L(h[b].layer)]=h[b];b=e.o();g={animate:!1,attributions:{},coordinateToPixelTransform:this.rg,extent:f,focus:this.Ya?this.Ya:b.center,index:this.Bg++,layerStates:k,layerStatesArray:h,logos:pa({},this.qh),pixelRatio:this.lc,pixelToCoordinateTransform:this.Ph,postRenderFunctions:[],
size:d,skippedFeatureUids:this.fi,tileQueue:this.Lf,time:a,usedTiles:{},viewState:b,viewHints:g,wantedTiles:{}}}g&&(g.extent=rc(b.center,b.resolution,b.rotation,g.size,f));this.ua=g;this.Df.oe(g);if(g){g.animate&&this.render();Array.prototype.push.apply(this.zf,g.postRenderFunctions);if(a=!g.viewHints[0]&&!g.viewHints[1])a=g.extent,d=this.Af,a=!(a[0]==d[0]&&a[2]==d[2]&&a[1]==d[1]&&a[3]==d[3]);a&&(this.dispatchEvent(new Ma("moveend",this,g)),a=g.extent,d=this.Af)&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=
a[3])}this.dispatchEvent(new Ma("postrender",this,g));setTimeout(this.Wg.bind(this),0)};l.te=function(a){this.set("target",a)};l.Qf=function(){var a=Jf(this);if(a){var b=getComputedStyle(a);this.set("size",[a.offsetWidth-parseFloat(b.borderLeftWidth)-parseFloat(b.paddingLeft)-parseFloat(b.paddingRight)-parseFloat(b.borderRightWidth),a.offsetHeight-parseFloat(b.borderTopWidth)-parseFloat(b.paddingTop)-parseFloat(b.paddingBottom)-parseFloat(b.borderBottomWidth)])}else this.set("size",void 0)};
function If(a){var b=null;void 0!==a.keyboardEventTarget&&(b="string"===typeof a.keyboardEventTarget?document.getElementById(a.keyboardEventTarget):a.keyboardEventTarget);var c={},d={};if(void 0===a.logo||"boolean"===typeof a.logo&&a.logo)d["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC"]=
"https://openlayers.org/";else{var e=a.logo;"string"===typeof e?d[e]="":e instanceof HTMLElement?d[L(e).toString()]=e:e&&(T("string"==typeof e.href,44),T("string"==typeof e.src,45),d[e.src]=e.href)}e=a.layers instanceof He?a.layers:new He({layers:a.layers});c.layergroup=e;c.target=a.target;c.view=void 0!==a.view?a.view:new bd;var e=ff,f;void 0!==a.renderer?(Array.isArray(a.renderer)?f=a.renderer:"string"===typeof a.renderer?f=[a.renderer]:T(!1,46),0<=f.indexOf("dom")&&(f=f.concat(Gf))):f=Gf;var g,
h;g=0;for(h=f.length;g<h;++g){var k=f[g];if("canvas"==k){if($a){e=pf;break}}else if("webgl"==k&&Ta){e=Cf;break}}void 0!==a.controls?Array.isArray(a.controls)?f=new S(a.controls.slice()):(T(a.controls instanceof S,47),f=a.controls):(f={},g=new S,(void 0!==f.zoom?f.zoom:1)&&g.push(new zd(f.zoomOptions)),(void 0!==f.rotate?f.rotate:1)&&g.push(new xd(f.rotateOptions)),(void 0!==f.attribution?f.attribution:1)&&g.push(new rd(f.attributionOptions)),f=g);void 0!==a.interactions?Array.isArray(a.interactions)?
g=new S(a.interactions.slice()):(T(a.interactions instanceof S,48),g=a.interactions):g=Ee();void 0!==a.overlays?Array.isArray(a.overlays)?a=new S(a.overlays.slice()):(T(a.overlays instanceof S,49),a=a.overlays):a=new S;return{controls:f,interactions:g,keyboardEventTarget:b,logos:d,overlays:a,rendererConstructor:e,values:c}}Kc(Ne);Kc(Ue);Ue.forEach(function(a){Ne.forEach(function(b){Fc(a,b,Oe);Fc(b,a,Pe)})});function wd(a,b,c,d){this.minX=a;this.maxX=b;this.minY=c;this.maxY=d}l=wd.prototype;l.contains=function(a){return this.Vb(a[1],a[2])};l.Vb=function(a,b){return this.minX<=a&&a<=this.maxX&&this.minY<=b&&b<=this.maxY};l.Re=function(a){return this.minX==a.minX&&this.minY==a.minY&&this.maxX==a.maxX&&this.maxY==a.maxY};l.extend=function(a){a.minX<this.minX&&(this.minX=a.minX);a.maxX>this.maxX&&(this.maxX=a.maxX);a.minY<this.minY&&(this.minY=a.minY);a.maxY>this.maxY&&(this.maxY=a.maxY)};
l.ac=function(){return[this.maxX-this.minX+1,this.maxY-this.minY+1]};function td(a,b){return a.minX<=b.maxX&&a.maxX>=b.minX&&a.minY<=b.maxY&&a.maxY>=b.minY};function Kf(a){Ca.call(this);this.gc=a}J(Kf,Ca);Kf.prototype.Pd=function(a,b,c){return function(d,e){return Lf(a,b,d,e,function(a){c[d]||(c[d]={});c[d][a.C.toString()]=a})}};function Mf(a,b){b.Ta()&&a.postRenderFunctions.push(function(a,b,e){b=L(a).toString();a.sb(e.viewState.projection,e.usedTiles[b])}.bind(null,b))}function Nf(a,b){var c=b.ph;void 0!==c&&("string"===typeof c?a.logos[c]="":c&&(T("string"==typeof c.href,44),T("string"==typeof c.src,45),a.logos[c.src]=c.href))}
function Of(a,b,c,d){b=L(b).toString();c=c.toString();b in a?c in a[b]?a[b][c].extend(d):a[b][c]=d:(a[b]={},a[b][c]=d)}
function Pf(a,b,c,d,e,f,g,h,k,n){var m=L(b).toString();m in a.wantedTiles||(a.wantedTiles[m]={});var p=a.wantedTiles[m];a=a.tileQueue;var q=c.minZoom,t,r,w,x,D,z;for(z=g;z>=q;--z)for(r=ud(c,f,z,r),w=c.h(z),x=r.minX;x<=r.maxX;++x)for(D=r.minY;D<=r.maxY;++D)g-z<=h?(t=Qf(b,z,x,D,d,e),0==t.o()&&(p[t.getKey()]=!0,t.getKey()in a.lb||a.enqueue([t,m,Rf(c,t.C),w])),void 0!==k&&k.call(n,t)):b.Rf(z,x,D,e)};function Sf(a){Kf.call(this,a);this.wd=$e()}J(Sf,Kf);
Sf.prototype.clip=function(a,b,c){var d=b.pixelRatio,e=b.size[0]*d,f=b.size[1]*d,g=b.viewState.rotation,h=[c[0],c[3]],k=[c[2],c[3]],n=[c[2],c[1]];c=[c[0],c[1]];cf(b.coordinateToPixelTransform,h);cf(b.coordinateToPixelTransform,k);cf(b.coordinateToPixelTransform,n);cf(b.coordinateToPixelTransform,c);a.save();mf(a,-g,e/2,f/2);a.beginPath();a.moveTo(h[0]*d,h[1]*d);a.lineTo(k[0]*d,k[1]*d);a.lineTo(n[0]*d,n[1]*d);a.lineTo(c[0]*d,c[1]*d);a.clip();mf(a,g,e/2,f/2)};
Sf.prototype.da=function(a,b,c,d){var e=this.gc;if(e.hasListener(a)){var f=c.size[0]*c.pixelRatio,g=c.size[1]*c.pixelRatio,h=c.viewState.rotation;mf(b,-h,f/2,g/2);d=void 0!==d?d:this.Zd(c,0);e.dispatchEvent(new lf(a,new of(b,c.pixelRatio,c.extent,d),c,b,null));mf(b,h,f/2,g/2)}};Sf.prototype.Zd=function(a,b){var c=a.viewState,d=a.pixelRatio,e=d/c.resolution;return ef(this.wd,d*a.size[0]/2,d*a.size[1]/2,e,-e,-c.rotation,-c.center[0]+b,-c.center[1])};function Tf(a){Sf.call(this,a);this.qg=$e()}J(Tf,Sf);Tf.prototype.Md=function(a,b,c){this.da("precompose",c,a,void 0);var d=this.va();if(d){var e=b.extent,f=void 0!==e;f&&this.clip(c,a,e);var e=this.ef,g=c.globalAlpha;c.globalAlpha=b.opacity;c.drawImage(d,0,0,+d.width,+d.height,Math.round(e[4]),Math.round(e[5]),Math.round(d.width*e[0]),Math.round(d.height*e[3]));c.globalAlpha=g;f&&c.restore()}this.da("postcompose",c,a,void 0)};function Uf(a){Tf.call(this,a);this.context=od();this.mc=null;this.ed=[];this.ki=kc();this.li=new wd(0,0,0,0);this.ef=$e();this.Bi=0}J(Uf,Tf);function Vf(a,b){var c=b.o(),d=a.gc.get("useInterimTilesOnError");return 2==c||4==c||3==c&&!d}
Uf.prototype.me=function(a,b){var c=a.pixelRatio,d=a.size,e=a.viewState,f=e.projection,g=e.resolution,e=e.center,h=this.gc,k=h.$a(),n=k.Ma,m=k.Ja(f),p=Wf(m,g,this.Bi),q=m.h(p),t=Math.round(g/q)||1,r=a.extent;void 0!==b.extent&&(r=sc(r,b.extent));if(oc(r))return!1;var w=Xf(m,r,q),x;x=Yf(m,p);var D=m.h(p),z=Ff(Zf(m,p),m.Mb);x=mc(x[0]+w.minX*z[0]*D,x[1]+w.minY*z[1]*D,x[0]+(w.maxX+1)*z[0]*D,x[1]+(w.maxY+1)*z[1]*D,void 0);D=k.od;z={};z[p]={};var E=this.Pd(k,f,z),P=this.ki,B=this.li,C=!1,A,H,I;for(H=w.minX;H<=
w.maxX;++H)for(I=w.minY;I<=w.maxY;++I)A=Qf(k,p,H,I,c,f),Vf(this,A)||(A=$f(A)),Vf(this,A)?2==A.o()&&(z[p][A.C.toString()]=A,C||-1!=this.ed.indexOf(A)||(C=!0)):ag(m,A.C,E,B,P)||(A=bg(m,A.C,B,P))&&E(p+1,A);E=a.viewHints;if(!(E=this.cd&&16<Date.now()-a.time&&(E[0]||E[1]))){if(C=!C)if(C=this.mc)C=this.mc,C=C[0]<=r[0]&&r[2]<=C[2]&&C[1]<=r[1]&&r[3]<=C[3];E=C&&this.renderedRevision==n}if(!E||t!=this.yf){C=cg(k,p,f);H=Math.round((w.maxX-w.minX+1)*C[0]/t);A=Math.round((w.maxY-w.minY+1)*C[0]/t);C=this.context;
I=C.canvas;E=k.Yd(f);I.width!=H||I.height!=A?(this.yf=t,I.width=H,I.height=A):(C.clearRect(0,0,H,A),t=this.yf);this.ed.length=0;B=Object.keys(z).map(Number);B.sort(ub);var v,K,G,Q,ga,Zd,$d,ae;G=0;for(Q=B.length;G<Q;++G){H=B[G];K=cg(k,H,f);A=m.h(H);v=A/q;ga=D*k.Vd(f);Zd=z[H];for(var Sa in Zd){A=Zd[Sa];I=dg(m,A.C,P);H=(I[0]-x[0])/q*D/t;I=(x[3]-I[3])/q*D/t;$d=K[0]*v/t;ae=K[1]*v/t;E||C.clearRect(H,I,$d,ae);var Ec=A.va();Ec&&this.context.drawImage(Ec,ga,ga,Ec.width-2*ga,Ec.height-2*ga,H,I,$d,ae);this.ed.push(A)}}this.renderedRevision=
n;this.cd=q*c/D*t;this.mc=x}Sa=this.cd/g;Sa=ef(this.ef,c*d[0]/2,c*d[1]/2,Sa,Sa,0,(this.mc[0]-e[0])/this.cd*c,(e[1]-this.mc[3])/this.cd*c);ef(this.qg,c*d[0]/2-Sa[4],c*d[1]/2-Sa[5],c/g,-c/g,0,-e[0],-e[1]);Of(a.usedTiles,k,p,w);Pf(a,k,m,c,f,r,p,h.get("preload"));Mf(a,k);Nf(a,k);return 0<this.ed.length};Uf.prototype.va=function(){return this.context.canvas};function eg(){this.mb="precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform float u_opacity;\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  vec4 texColor \x3d texture2D(u_texture, v_texCoord);\n  gl_FragColor.rgb \x3d texColor.rgb;\n  gl_FragColor.a \x3d texColor.a * u_opacity;\n}\n"}J(eg,rf);var fg=new eg;
function gg(){this.mb="varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_texCoordMatrix;\nuniform mat4 u_projectionMatrix;\n\nvoid main(void) {\n  gl_Position \x3d u_projectionMatrix * vec4(a_position, 0., 1.);\n  v_texCoord \x3d (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\n}\n\n\n"}J(gg,sf);var hg=new gg;
function ig(a,b){this.si=a.getUniformLocation(b,"u_opacity");this.ti=a.getUniformLocation(b,"u_projectionMatrix");this.ui=a.getUniformLocation(b,"u_texCoordMatrix");this.ye=a.getUniformLocation(b,"u_texture");this.Ob=a.getAttribLocation(b,"a_position");this.Pb=a.getAttribLocation(b,"a_texCoord")};function jg(a,b){Kf.call(this,b);this.Vc=a;this.kg=new uf([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]);this.zc=this.texture=null;this.Ac=void 0;this.Kf=$e();this.Xh=$e();this.Mf=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];this.Sd=null}J(jg,Kf);
jg.prototype.bindFramebuffer=function(a,b){var c=this.Vc.F;if(void 0===this.Ac||this.Ac!=b){a.postRenderFunctions.push(function(a,b,c){a.isContextLost()||(a.deleteFramebuffer(b),a.deleteTexture(c))}.bind(null,c,this.zc,this.texture));var d=zf(c,b,b),e=c.createFramebuffer();c.bindFramebuffer(36160,e);c.framebufferTexture2D(36160,36064,3553,d,0);this.texture=d;this.zc=e;this.Ac=b}else c.bindFramebuffer(36160,this.zc)};
jg.prototype.Md=function(a,b,c){this.da("precompose",c,a);c.bindBuffer(34962,this.kg);var d=c.F,e=yf(c,fg,hg),f;this.Sd?f=this.Sd:this.Sd=f=new ig(d,e);c.useProgram(e)&&(d.enableVertexAttribArray(f.Ob),d.vertexAttribPointer(f.Ob,2,5126,!1,16,0),d.enableVertexAttribArray(f.Pb),d.vertexAttribPointer(f.Pb,2,5126,!1,16,8),d.uniform1i(f.ye,0));d.uniformMatrix4fv(f.ui,!1,tf(this.Mf,this.Kf));d.uniformMatrix4fv(f.ti,!1,tf(this.Mf,this.Xh));d.uniform1f(f.si,b.opacity);d.bindTexture(3553,this.texture);d.drawArrays(5,
0,4);this.da("postcompose",c,a)};jg.prototype.da=function(a,b,c){var d=this.gc;d.hasListener(a)&&d.dispatchEvent(new lf(a,new Af(b,0,0,c.viewState.rotation,0,c.extent,c.pixelRatio),c,null,b))};jg.prototype.bb=function(){this.zc=this.texture=null;this.Ac=void 0};function kg(){this.mb="precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  gl_FragColor \x3d texture2D(u_texture, v_texCoord);\n}\n"}J(kg,rf);var lg=new kg;function mg(){this.mb="varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec4 u_tileOffset;\n\nvoid main(void) {\n  gl_Position \x3d vec4(a_position * u_tileOffset.xy + u_tileOffset.zw, 0., 1.);\n  v_texCoord \x3d a_texCoord;\n}\n\n\n"}J(mg,sf);
var ng=new mg;function og(a,b){this.ye=a.getUniformLocation(b,"u_texture");this.vi=a.getUniformLocation(b,"u_tileOffset");this.Ob=a.getAttribLocation(b,"a_position");this.Pb=a.getAttribLocation(b,"a_texCoord")};function pg(a,b){jg.call(this,a,b);this.Ag=lg;this.zi=ng;this.xa=null;this.Cf=new uf([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]);this.pe=this.dd=null;this.qe=-1;this.Mb=[0,0]}J(pg,jg);pg.prototype.l=function(){this.Vc.getContext().deleteBuffer(this.Cf);jg.prototype.l.call(this)};pg.prototype.Pd=function(a,b,c){var d=this.Vc;return function(e,f){return Lf(a,b,e,f,function(a){var b=d.N.L(a.getKey());b&&(c[e]||(c[e]={}),c[e][a.C.toString()]=a);return b})}};
pg.prototype.bb=function(){jg.prototype.bb.call(this);this.xa=null};
pg.prototype.me=function(a,b,c){var d=this.Vc,e=c.F,f=a.viewState,g=f.projection,h=this.gc,k=h.$a(),n=k.Ja(g),m=Wf(n,f.resolution),p=n.h(m),q=cg(k,m,g),t=q[0]/Ff(Zf(n,m),this.Mb)[0],r=p/t,w=k.od*k.Vd(g),x=f.center,D=a.extent,z=Xf(n,D,p);if(this.dd&&this.dd.Re(z)&&this.qe==k.Ma)r=this.pe;else{var E=z.ac(),P=Vb(Math.max(E[0]*q[0],E[1]*q[1])),E=r*P,B=Yf(n,m),C=B[0]+z.minX*q[0]*r,r=B[1]+z.minY*q[1]*r,r=[C,r,C+E,r+E];this.bindFramebuffer(a,P);e.viewport(0,0,P,P);e.clearColor(0,0,0,0);e.clear(16384);e.disable(3042);
P=yf(c,this.Ag,this.zi);c.useProgram(P);this.xa||(this.xa=new og(e,P));c.bindBuffer(34962,this.Cf);e.enableVertexAttribArray(this.xa.Ob);e.vertexAttribPointer(this.xa.Ob,2,5126,!1,16,0);e.enableVertexAttribArray(this.xa.Pb);e.vertexAttribPointer(this.xa.Pb,2,5126,!1,16,8);e.uniform1i(this.xa.ye,0);c={};c[m]={};var A=this.Pd(k,g,c),H=h.get("useInterimTilesOnError"),P=!0,C=kc(),I=new wd(0,0,0,0),v,K,G;for(K=z.minX;K<=z.maxX;++K)for(G=z.minY;G<=z.maxY;++G){B=Qf(k,m,K,G,t,g);if(void 0!==b.extent&&(v=
dg(n,B.C,C),!tc(v,b.extent)))continue;v=B.o();(v=2==v||4==v||3==v&&!H)||(B=$f(B));v=B.o();if(2==v){if(d.N.L(B.getKey())){c[m][B.C.toString()]=B;continue}}else if(4==v||3==v&&!H)continue;P=!1;v=ag(n,B.C,A,I,C);v||(B=bg(n,B.C,I,C))&&A(m+1,B)}b=Object.keys(c).map(Number);b.sort(ub);for(var A=new Float32Array(4),Q,H=0,I=b.length;H<I;++H)for(Q in K=c[b[H]],K)B=K[Q],v=dg(n,B.C,C),A[0]=2*(v[2]-v[0])/E,A[1]=2*(v[3]-v[1])/E,A[2]=2*(v[0]-r[0])/E-1,A[3]=2*(v[1]-r[1])/E-1,e.uniform4fv(this.xa.vi,A),Df(d,B,q,
w*t),e.drawArrays(5,0,4);P?(this.dd=z,this.pe=r,this.qe=k.Ma):(this.pe=this.dd=null,this.qe=-1,a.animate=!0)}Of(a.usedTiles,k,m,z);var ga=d.rc;Pf(a,k,n,t,g,D,m,h.get("preload"),function(a){var b;(b=2!=a.o()||d.N.L(a.getKey()))||(b=a.getKey()in ga.lb);b||ga.enqueue([a,Rf(n,a.C),n.h(a.C[0]),q,w*t])},this);Mf(a,k);Nf(a,k);e=this.Kf;bf(e,1,0,0,1,0,0);af(e,bf(Ze,1,0,0,1,(Math.round(x[0]/p)*p-r[0])/(r[2]-r[0]),(Math.round(x[1]/p)*p-r[1])/(r[3]-r[1])));0!==f.rotation&&df(e,f.rotation);af(e,bf(Ze,a.size[0]*
f.resolution/(r[2]-r[0]),0,0,a.size[1]*f.resolution/(r[3]-r[1]),0,0));af(e,bf(Ze,1,0,0,1,-.5,-.5));return!0};function qg(a){a=a?a:{};var b=pa({},a);delete b.preload;delete b.useInterimTilesOnError;Ve.call(this,b);this.set("preload",void 0!==a.preload?a.preload:0);this.set("useInterimTilesOnError",void 0!==a.useInterimTilesOnError?a.useInterimTilesOnError:!0)}J(qg,Ve);qg.prototype.Oe=function(a){var b=null,c=a.ab();"canvas"===c?b=new Uf(this):"webgl"===c&&(b=new pg(a,this));return b};function rg(a,b){Ba.call(this);this.C=a;this.state=b;this.I=null;this.key=""}J(rg,Ba);rg.prototype.j=function(){this.dispatchEvent("change")};rg.prototype.getKey=function(){return this.key+"/"+this.C};function $f(a){if(!a.I)return a;var b=a.I;do{if(2==b.o())return b;b=b.I}while(b);return a}rg.prototype.o=function(){return this.state};function sg(a,b,c,d,e){rg.call(this,a,b);this.If=c;this.cb=new Image;null!==d&&(this.cb.crossOrigin=d);this.be=null;this.ji=e}J(sg,rg);l=sg.prototype;l.l=function(){1==this.state&&tg(this);this.I&&this.I.ea();this.state=5;this.j();rg.prototype.l.call(this)};l.va=function(){return this.cb};l.getKey=function(){return this.If};l.Lg=function(){this.state=3;tg(this);this.j()};l.Mg=function(){this.state=this.cb.naturalWidth&&this.cb.naturalHeight?2:4;tg(this);this.j()};
l.load=function(){if(0==this.state||3==this.state)this.state=1,this.j(),this.be=[N(this.cb,"error",this.Lg,this,!0),N(this.cb,"load",this.Mg,this,!0)],this.ji(this,this.If)};function tg(a){a.be.forEach(M);a.be=null};function ug(a){Bf.call(this);this.hh=void 0!==a?a:2048}J(ug,Bf);ug.prototype.Ta=function(){return this.Ia()>this.hh};ug.prototype.sb=function(a){for(var b,c;this.Ta()&&!(b=this.S.value_,c=b.C[0].toString(),c in a&&a[c].contains(b.C));)this.pop().ea()};function vg(a,b,c,d){a=c-a;b=d-b;var e=Math.sqrt(a*a+b*b);return[Math.round(c+a/e),Math.round(d+b/e)]}
function wg(a,b,c,d,e,f,g,h,k,n,m){var p=od(Math.round(c*a),Math.round(c*b));if(0===k.length)return p.canvas;p.scale(c,c);var q=kc();k.forEach(function(a){a=a.extent;a[0]<q[0]&&(q[0]=a[0]);a[2]>q[2]&&(q[2]=a[2]);a[1]<q[1]&&(q[1]=a[1]);a[3]>q[3]&&(q[3]=a[3])});var t=od(Math.round(c*U(q)/d),Math.round(c*pc(q)/d)),r=c/d;k.forEach(function(a){t.drawImage(a.image,n,n,a.image.width-2*n,a.image.height-2*n,(a.extent[0]-q[0])*r,-(a.extent[3]-q[3])*r,U(a.extent)*r,pc(a.extent)*r)});var w=[g[0],g[3]];h.Qa.forEach(function(a){var b=
a.source,e=a.target,g=b[1][0],h=b[1][1],k=b[2][0],m=b[2][1];a=(e[0][0]-w[0])/f;var n=-(e[0][1]-w[1])/f,r=(e[1][0]-w[0])/f,I=-(e[1][1]-w[1])/f,v=(e[2][0]-w[0])/f,K=-(e[2][1]-w[1])/f,e=b[0][0],b=b[0][1],g=g-e,h=h-b,k=k-e,m=m-b;a:{g=[[g,h,0,0,r-a],[k,m,0,0,v-a],[0,0,g,h,I-n],[0,0,k,m,K-n]];h=g.length;for(k=0;k<h;k++){for(var m=k,G=Math.abs(g[k][k]),Q=k+1;Q<h;Q++){var ga=Math.abs(g[Q][k]);ga>G&&(G=ga,m=Q)}if(0===G){g=null;break a}G=g[m];g[m]=g[k];g[k]=G;for(m=k+1;m<h;m++)for(G=-g[m][k]/g[k][k],Q=k;Q<
h+1;Q++)g[m][Q]=k==Q?0:g[m][Q]+G*g[k][Q]}k=Array(h);for(m=h-1;0<=m;m--)for(k[m]=g[m][h]/g[m][m],G=m-1;0<=G;G--)g[G][h]-=g[G][m]*k[m];g=k}g&&(p.save(),p.beginPath(),k=(a+r+v)/3,m=(n+I+K)/3,h=vg(k,m,a,n),r=vg(k,m,r,I),v=vg(k,m,v,K),p.moveTo(r[0],r[1]),p.lineTo(h[0],h[1]),p.lineTo(v[0],v[1]),p.clip(),p.transform(g[0],g[2],g[1],g[3],a,n),p.translate(q[0]-e,q[3]-b),p.scale(d/c,-d/c),p.drawImage(t.canvas,0,0),p.restore())});m&&(p.save(),p.strokeStyle="black",p.lineWidth=1,h.Qa.forEach(function(a){var b=
a.target;a=(b[0][0]-w[0])/f;var c=-(b[0][1]-w[1])/f,d=(b[1][0]-w[0])/f,e=-(b[1][1]-w[1])/f,g=(b[2][0]-w[0])/f,b=-(b[2][1]-w[1])/f;p.beginPath();p.moveTo(d,e);p.lineTo(a,c);p.lineTo(g,b);p.closePath();p.stroke()}),p.restore());return p.canvas};function xg(a,b,c,d,e){this.Oa=a;this.ld=b;var f={},g=Rc(this.ld,this.Oa);this.za=function(a){var b=a[0]+"/"+a[1];f[b]||(f[b]=g(a));return f[b]};this.mf=d;this.xg=e*e;this.Qa=[];this.Uf=!1;this.og=this.Oa.Hd&&!!d&&!!this.Oa.A()&&U(d)==U(this.Oa.A());this.ga=this.Oa.A()?U(this.Oa.A()):null;this.Jf=this.ld.A()?U(this.ld.A()):null;a=[c[0],c[3]];b=[c[2],c[3]];d=[c[2],c[1]];c=[c[0],c[1]];e=this.za(a);var h=this.za(b),k=this.za(d),n=this.za(c);yg(this,a,b,d,c,e,h,k,n,10);if(this.Uf){var m=Infinity;this.Qa.forEach(function(a){m=
Math.min(m,a.source[0][0],a.source[1][0],a.source[2][0])});this.Qa.forEach(function(a){if(Math.max(a.source[0][0],a.source[1][0],a.source[2][0])-m>this.ga/2){var b=[[a.source[0][0],a.source[0][1]],[a.source[1][0],a.source[1][1]],[a.source[2][0],a.source[2][1]]];b[0][0]-m>this.ga/2&&(b[0][0]-=this.ga);b[1][0]-m>this.ga/2&&(b[1][0]-=this.ga);b[2][0]-m>this.ga/2&&(b[2][0]-=this.ga);Math.max(b[0][0],b[1][0],b[2][0])-Math.min(b[0][0],b[1][0],b[2][0])<this.ga/2&&(a.source=b)}},this)}f={}}
function yg(a,b,c,d,e,f,g,h,k,n){var m=jc([f,g,h,k]),p=a.ga?U(m)/a.ga:null,q=a.ga,t=a.Oa.Hd&&.5<p&&1>p,r=!1;if(0<n){if(a.ld.Gc&&a.Jf)var w=jc([b,c,d,e]),r=r|.25<U(w)/a.Jf;!t&&a.Oa.Gc&&p&&(r|=.25<p)}if(r||!a.mf||tc(m,a.mf)){if(!(r||isFinite(f[0])&&isFinite(f[1])&&isFinite(g[0])&&isFinite(g[1])&&isFinite(h[0])&&isFinite(h[1])&&isFinite(k[0])&&isFinite(k[1])))if(0<n)r=!0;else return;if(0<n&&(r||(m=a.za([(b[0]+d[0])/2,(b[1]+d[1])/2]),q=t?(Wb(f[0],q)+Wb(h[0],q))/2-Wb(m[0],q):(f[0]+h[0])/2-m[0],m=(f[1]+
h[1])/2-m[1],r=q*q+m*m>a.xg),r)){Math.abs(b[0]-d[0])<=Math.abs(b[1]-d[1])?(t=[(c[0]+d[0])/2,(c[1]+d[1])/2],q=a.za(t),m=[(e[0]+b[0])/2,(e[1]+b[1])/2],p=a.za(m),yg(a,b,c,t,m,f,g,q,p,n-1),yg(a,m,t,d,e,p,q,h,k,n-1)):(t=[(b[0]+c[0])/2,(b[1]+c[1])/2],q=a.za(t),m=[(d[0]+e[0])/2,(d[1]+e[1])/2],p=a.za(m),yg(a,b,t,m,e,f,q,p,k,n-1),yg(a,t,c,d,m,q,g,h,p,n-1));return}if(t){if(!a.og)return;a.Uf=!0}a.Qa.push({source:[f,h,k],target:[b,d,e]});a.Qa.push({source:[f,g,h],target:[b,c,d]})}}
function zg(a){var b=kc();a.Qa.forEach(function(a){a=a.source;lc(b,a[0]);lc(b,a[1]);lc(b,a[2])});return b};function Ag(a,b,c,d,e,f,g,h,k,n,m){rg.call(this,e,0);this.bi=void 0!==m?m:!1;this.lc=g;this.Hg=h;this.c=null;this.hd=b;this.nd=d;this.Cd=f?f:e;this.Ib=[];this.Jb=null;this.jd=0;f=dg(d,this.Cd);h=this.nd.A();e=this.hd.A();f=h?sc(f,h):f;if(0===nc(f))this.state=4;else if((h=a.A())&&(e=e?sc(e,h):h),h=d.h(this.Cd[0]),m=qc(f),d=Rc(c,a)(m,void 0,m.length),h=Hc(c,h,m),m=Bc(c),void 0!==m&&(h*=m),m=Bc(a),void 0!==m&&(h/=m),d=Hc(a,h,d)/h,isFinite(d)&&0<d&&(h/=d),d=h,!isFinite(d)||0>=d)this.state=4;else if(this.xe=
new xg(a,c,f,e,d*(void 0!==n?n:.5)),0===this.xe.Qa.length)this.state=4;else if(this.jd=Wf(b,d),c=zg(this.xe),e&&(a.Hd?(c[1]=Tb(c[1],e[1],e[3]),c[3]=Tb(c[3],e[1],e[3])):c=sc(c,e)),nc(c)){a=ud(b,c,this.jd);for(b=a.minX;b<=a.maxX;b++)for(c=a.minY;c<=a.maxY;c++)(n=k(this.jd,b,c,g))&&this.Ib.push(n);0===this.Ib.length&&(this.state=4)}else this.state=4}J(Ag,rg);Ag.prototype.l=function(){1==this.state&&(this.Jb.forEach(M),this.Jb=null);rg.prototype.l.call(this)};Ag.prototype.va=function(){return this.c};
Ag.prototype.Ef=function(){var a=[];this.Ib.forEach(function(b){b&&2==b.o()&&a.push({extent:dg(this.hd,b.C),image:b.va()})},this);this.Ib.length=0;if(0===a.length)this.state=3;else{var b=this.Cd[0],c=Zf(this.nd,b),d="number"===typeof c?c:c[0],c="number"===typeof c?c:c[1],b=this.nd.h(b),e=this.hd.h(this.jd),f=dg(this.nd,this.Cd);this.c=wg(d,c,this.lc,e,this.hd.A(),b,f,this.xe,a,this.Hg,this.bi);this.state=2}this.j()};
Ag.prototype.load=function(){if(0==this.state){this.state=1;this.j();var a=0;this.Jb=[];this.Ib.forEach(function(b){var c=b.o();if(0==c||1==c){a++;var d;d=N(b,"change",function(){var c=b.o();if(2==c||3==c||4==c)M(d),a--,0===a&&(this.Jb.forEach(M),this.Jb=null,this.Ef())},this);this.Jb.push(d)}},this);this.Ib.forEach(function(a){0==a.o()&&a.load()});0===a&&setTimeout(this.Ef.bind(this),0)}};function Bg(a,b){var c=/\{z\}/g,d=/\{x\}/g,e=/\{y\}/g,f=/\{-y\}/g;return function(g){if(g)return a.replace(c,g[0].toString()).replace(d,g[1].toString()).replace(e,function(){return(-g[2]-1).toString()}).replace(f,function(){var a=b.tb?b.tb[g[0]]:null;T(a,55);return(a.maxY-a.minY+1+g[2]).toString()})}}function Cg(a,b){for(var c=a.length,d=Array(c),e=0;e<c;++e)d[e]=Bg(a[e],b);return Dg(d)}function Dg(a){return 1===a.length?a[0]:function(b,c,d){if(b)return a[Wb((b[1]<<b[0])+b[2],a.length)](b,c,d)}}
function Eg(){};function Fg(a){this.minZoom=void 0!==a.minZoom?a.minZoom:0;this.U=a.resolutions;T(yb(this.U,function(a,b){return b-a}),17);this.maxZoom=this.U.length-1;this.Ab=void 0!==a.origin?a.origin:null;this.Bb=null;void 0!==a.origins&&(this.Bb=a.origins,T(this.Bb.length==this.U.length,20));var b=a.extent;void 0===b||this.Ab||this.Bb||(this.Ab=[b[0],b[3]]);T(!this.Ab&&this.Bb||this.Ab&&!this.Bb,18);this.Lb=null;void 0!==a.tileSizes&&(this.Lb=a.tileSizes,T(this.Lb.length==this.U.length,19));this.qd=void 0!==
a.tileSize?a.tileSize:this.Lb?null:256;T(!this.qd&&this.Lb||this.qd&&!this.Lb,22);this.ka=void 0!==b?b:null;this.tb=null;this.Mb=[0,0];void 0!==a.sizes?this.tb=a.sizes.map(function(a){return new wd(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1))},this):b&&Gg(this,b)}var Hg=[0,0,0];function ag(a,b,c,d,e){e=dg(a,b,e);for(b=b[0]-1;b>=a.minZoom;){if(c.call(null,b,ud(a,e,b,d)))return!0;--b}return!1}Fg.prototype.A=function(){return this.ka};
function Yf(a,b){return a.Ab?a.Ab:a.Bb[b]}Fg.prototype.h=function(a){return this.U[a]};function bg(a,b,c,d){return b[0]<a.maxZoom?(d=dg(a,b,d),ud(a,d,b[0]+1,c)):null}function Xf(a,b,c,d){Ig(a,b[0],b[1],c,!1,Hg);var e=Hg[1],f=Hg[2];Ig(a,b[2],b[3],c,!0,Hg);a=Hg[1];b=Hg[2];void 0!==d?(d.minX=e,d.maxX=a,d.minY=f,d.maxY=b):d=new wd(e,a,f,b);return d}function ud(a,b,c,d){c=a.h(c);return Xf(a,b,c,d)}
function Rf(a,b){var c=Yf(a,b[0]),d=a.h(b[0]),e=Ff(Zf(a,b[0]),a.Mb);return[c[0]+(b[1]+.5)*e[0]*d,c[1]+(b[2]+.5)*e[1]*d]}function dg(a,b,c){var d=Yf(a,b[0]),e=a.h(b[0]);a=Ff(Zf(a,b[0]),a.Mb);var f=d[0]+b[1]*a[0]*e;b=d[1]+b[2]*a[1]*e;return mc(f,b,f+a[0]*e,b+a[1]*e,c)}
function Ig(a,b,c,d,e,f){var g=Wf(a,d),h=d/a.h(g),k=Yf(a,g);a=Ff(Zf(a,g),a.Mb);b=h*Math.floor((b-k[0])/d+(e?.5:0))/a[0];c=h*Math.floor((c-k[1])/d+(e?0:.5))/a[1];e?(b=Math.ceil(b)-1,c=Math.ceil(c)-1):(b=Math.floor(b),c=Math.floor(c));e=b;void 0!==f?(f[0]=g,f[1]=e,f[2]=c):f=[g,e,c];return f}function Zf(a,b){return a.qd?a.qd:a.Lb[b]}function Wf(a,b,c){return Tb(vb(a.U,b,c||0),a.minZoom,a.maxZoom)}function Gg(a,b){for(var c=a.U.length,d=Array(c),e=a.minZoom;e<c;++e)d[e]=ud(a,b,e);a.tb=d};function Jg(a){var b=a.Qe;if(!b){for(var b=vd(a),c=Ff(256),c=Math.max(U(b)/c[0],pc(b)/c[1]),d=Array(43),e=0;43>e;++e)d[e]=c/Math.pow(2,e);b=new Fg({extent:b,origin:[b[0],b[3]],resolutions:d,tileSize:void 0});a.Qe=b}return b}function vd(a){a=Jc(a);var b=a.A();b||(a=180*zc.degrees/Bc(a),b=mc(-a,-a,a,a));return b};function Kg(a){this.ae=a.html;this.pd=a.tileRanges?a.tileRanges:null};function Lg(a){R.call(this);this.T=Jc(a.projection);this.lg=Mg(a.attributions);this.ph=a.logo;this.oa=void 0!==a.state?a.state:"ready";this.Ai=void 0!==a.wrapX?a.wrapX:!1}J(Lg,R);function Mg(a){if("string"===typeof a)return[new Kg({html:a})];if(a instanceof Kg)return[a];if(Array.isArray(a)){for(var b=a.length,c=Array(b),d=0;d<b;d++){var e=a[d];c[d]="string"===typeof e?new Kg({html:e}):e}return c}return null}Lg.prototype.o=function(){return this.oa};Lg.prototype.refresh=function(){this.j()};function Ng(a){Lg.call(this,{attributions:a.attributions,extent:a.extent,logo:a.logo,projection:a.projection,state:a.state,wrapX:a.wrapX});this.Lh=void 0!==a.opaque?a.opaque:!1;this.od=void 0!==a.tilePixelRatio?a.tilePixelRatio:1;this.tileGrid=void 0!==a.tileGrid?a.tileGrid:null;this.O=new ug(a.cacheSize);this.Nf=[0,0];this.key_=""}J(Ng,Lg);l=Ng.prototype;l.Ta=function(){return this.O.Ta()};l.sb=function(a,b){var c=this.bc(a);c&&c.sb(b)};
function Lf(a,b,c,d,e){b=a.bc(b);if(!b)return!1;for(var f=!0,g,h,k=d.minX;k<=d.maxX;++k)for(var n=d.minY;n<=d.maxY;++n)g=a.Dc(c,k,n),h=!1,b.L(g)&&(g=b.get(g),(h=2===g.o())&&(h=!1!==e(g))),h||(f=!1);return f}l.Vd=function(){return 0};l.getKey=function(){return this.key_};l.Dc=function(a,b,c){return a+"/"+b+"/"+c};l.Yd=function(){return this.Lh};l.Ja=function(a){return this.tileGrid?this.tileGrid:Jg(a)};l.bc=function(a){var b=this.T;return b&&!Qc(b,a)?null:this.O};
function cg(a,b,c){var d=a.Ja(c);c=a.od;b=Ff(Zf(d,b),a.Nf);1==c?a=b:(a=a.Nf,void 0===a&&(a=[0,0]),a[0]=b[0]*c+.5|0,a[1]=b[1]*c+.5|0);return a}
function Og(a,b,c){var d=void 0!==c?c:a.T;c=a.Ja(d);if(a.Ai&&d.Gc){var e=b;a=e[0];b=Rf(c,e);var d=vd(d),f=b[0],g=b[1];d[0]<=f&&f<=d[2]&&d[1]<=g&&g<=d[3]?b=e:(e=U(d),b[0]+=e*Math.ceil((d[0]-b[0])/e),a=c.h(a),b=Ig(c,b[0],b[1],a,!1,void 0))}d=b[0];a=b[1];e=b[2];c=c.minZoom>d||d>c.maxZoom?!1:(c=(f=c.A())?ud(c,f,d):c.tb?c.tb[d]:null)?c.Vb(a,e):!0;return c?b:null}l.refresh=function(){this.O.clear();this.j()};l.Rf=na;function Pg(a,b){O.call(this,a);this.tile=b}J(Pg,O);function Qg(a){Ng.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,extent:a.extent,logo:a.logo,opaque:a.opaque,projection:a.projection,state:a.state,tileGrid:a.tileGrid,tilePixelRatio:a.tilePixelRatio,wrapX:a.wrapX});this.tileLoadFunction=a.tileLoadFunction;this.tileUrlFunction=this.Zb?this.Zb.bind(this):Eg;this.urls=null;if(a.urls){var b=a.urls;this.urls=b;var c=b.join("\n");Rg(this,this.Zb?this.Zb.bind(this):Cg(b,this.tileGrid),c)}else if(a.url){b=a.url;var c=[],d=/\{([a-z])-([a-z])\}/.exec(b);
if(d){var e=d[2].charCodeAt(0),f;for(f=d[1].charCodeAt(0);f<=e;++f)c.push(b.replace(d[0],String.fromCharCode(f)))}else if(d=d=/\{(\d+)-(\d+)\}/.exec(b))for(e=parseInt(d[2],10),f=parseInt(d[1],10);f<=e;f++)c.push(b.replace(d[0],f.toString()));else c.push(b);c=this.urls=c;Rg(this,this.Zb?this.Zb.bind(this):Cg(c,this.tileGrid),b)}a.tileUrlFunction&&Rg(this,a.tileUrlFunction)}J(Qg,Ng);
Qg.prototype.Ic=function(a){a=a.target;switch(a.o()){case 1:this.dispatchEvent(new Pg("tileloadstart",a));break;case 2:this.dispatchEvent(new Pg("tileloadend",a));break;case 3:this.dispatchEvent(new Pg("tileloaderror",a))}};function Sg(a,b){a.O.clear();a.tileLoadFunction=b;a.j()}function Rg(a,b,c){a.tileUrlFunction=b;"undefined"!==typeof c?a.key_!==c&&(a.key_=c,a.j()):a.j()}Qg.prototype.Rf=function(a,b,c){a=this.Dc(a,b,c);this.O.L(a)&&this.O.get(a)};function Tg(a){Qg.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,extent:a.extent,logo:a.logo,opaque:a.opaque,projection:a.projection,state:a.state,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction?a.tileLoadFunction:Ug,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:a.tileUrlFunction,url:a.url,urls:a.urls,wrapX:a.wrapX});this.crossOrigin=void 0!==a.crossOrigin?a.crossOrigin:null;this.tileClass=void 0!==a.tileClass?a.tileClass:sg;this.nb={};this.ve={};this.ei=a.reprojectionErrorThreshold;
this.di=!1}J(Tg,Qg);l=Tg.prototype;l.Ta=function(){if(this.O.Ta())return!0;for(var a in this.nb)if(this.nb[a].Ta())return!0;return!1};l.sb=function(a,b){var c=this.bc(a);this.O.sb(this.O==c?b:{});for(var d in this.nb){var e=this.nb[d];e.sb(e==c?b:{})}};l.Vd=function(a){return this.T&&a&&Qc(this.T,a),0};l.Yd=function(a){return this.T&&a&&!Qc(this.T,a)?!1:Qg.prototype.Yd.call(this,a)};
l.Ja=function(a){var b=this.T;return!this.tileGrid||b&&!Qc(b,a)?(b=L(a).toString(),b in this.ve||(this.ve[b]=Jg(a)),this.ve[b]):this.tileGrid};l.bc=function(a){var b=this.T;if(!b||Qc(b,a))return this.O;a=L(a).toString();a in this.nb||(this.nb[a]=new ug);return this.nb[a]};function Vg(a,b,c,d,e,f,g){b=[b,c,d];e=(c=Og(a,b,f))?a.tileUrlFunction(c,e,f):void 0;e=new a.tileClass(b,void 0!==e?0:4,void 0!==e?e:"",a.crossOrigin,a.tileLoadFunction);e.key=g;N(e,"change",a.Ic,a);return e}
function Qf(a,b,c,d,e,f){if(a.T&&f&&!Qc(a.T,f)){e=a.bc(f);d=[b,c,d];var g;b=a.Dc.apply(a,d);e.L(b)&&(g=e.get(b));c=a.getKey();if(g&&g.key==c)return g;var h=a.T,k=a.Ja(h),n=a.Ja(f),m=Og(a,d,f);a=new Ag(h,k,f,n,d,m,a.od,0,function(a,b,c,d){return Wg(this,a,b,c,d,h)}.bind(a),a.ei,a.di);a.key=c;g?(a.I=g,e.replace(b,a)):e.set(b,a);return a}return Wg(a,b,c,d,e,f)}
function Wg(a,b,c,d,e,f){var g,h=a.Dc(b,c,d),k=a.getKey();if(a.O.L(h)){if(g=a.O.get(h),g.key!=k){var n=g;g=Vg(a,b,c,d,e,f,k);0==n.o()?g.I=n.I:g.I=n;if(g.I){b=g.I;c=g;do{if(2==b.o()){b.I=null;break}else 1==b.o()?c=b:0==b.o()?c.I=b.I:c=b;b=c.I}while(b)}a.O.replace(h,g)}}else g=Vg(a,b,c,d,e,f,k),a.O.set(h,g);return g}function Ug(a,b){a.va().src=b};var Xg=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function Y(a,b){return-1!=a.indexOf(b)}function Yg(a,b){return a<b?-1:a>b?1:0};var Zg=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(y(a))return y(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},$g=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=y(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},ah=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=y(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e};function bh(a){var b;a:{b=ch;for(var c=a.length,d=y(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:y(a)?a.charAt(b):a[b]}function dh(a){return Array.prototype.concat.apply(Array.prototype,arguments)}function eh(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]};var Z;a:{var fh=u.navigator;if(fh){var gh=fh.userAgent;if(gh){Z=gh;break a}}Z=""};function hh(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return!0;return!1}function ih(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function jh(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function kh(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return c}var lh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function mh(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<lh.length;f++)c=lh[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function nh(a){nh[" "](a);return a}nh[" "]=ba;function oh(a,b){var c=ph;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)};var qh=Y(Z,"Opera"),rh=Y(Z,"Trident")||Y(Z,"MSIE"),sh=Y(Z,"Edge"),th=Y(Z,"Gecko")&&!(Y(Z.toLowerCase(),"webkit")&&!Y(Z,"Edge"))&&!(Y(Z,"Trident")||Y(Z,"MSIE"))&&!Y(Z,"Edge"),uh=Y(Z.toLowerCase(),"webkit")&&!Y(Z,"Edge");function vh(){var a=u.document;return a?a.documentMode:void 0}var wh;
a:{var xh="",yh=function(){var a=Z;if(th)return/rv\:([^\);]+)(\)|;)/.exec(a);if(sh)return/Edge\/([\d\.]+)/.exec(a);if(rh)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(uh)return/WebKit\/(\S+)/.exec(a);if(qh)return/(?:Version)[ \/]?(\S+)/.exec(a)}();yh&&(xh=yh?yh[1]:"");if(rh){var zh=vh();if(null!=zh&&zh>parseFloat(xh)){wh=String(zh);break a}}wh=xh}var ph={};
function Ah(a){return oh(a,function(){for(var b=0,c=Xg(String(wh)).split("."),d=Xg(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"";do{g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""];h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];if(0==g[0].length&&0==h[0].length)break;b=Yg(0==g[1].length?0:parseInt(g[1],10),0==h[1].length?0:parseInt(h[1],10))||Yg(0==g[2].length,0==h[2].length)||Yg(g[2],h[2]);g=g[3];h=h[3]}while(0==b)}return 0<=b})}
var Bh=u.document,Ch=Bh&&rh?vh()||("CSS1Compat"==Bh.compatMode?parseInt(wh,10):5):void 0;!th&&!rh||rh&&9<=Number(Ch)||th&&Ah("1.9.1");rh&&Ah("9");function Dh(a){var b=document;return y(a)?b.getElementById(a):a};function Eh(a,b){this.kf=a;this.aa=null;this.gb=b;this.gi=20;this.X=null}l=Eh.prototype;
l.La=function(){if(null===this.X){var a=this.gb;"auto"!==a&&null!=a?"l"!=a.charAt(0)&&"p"!=a.charAt(0)&&(a="l"):a=window.innerWidth>window.innerHeight?"l":"p";this.gb=a.substring(0,1);var a=this.aa||this.kf,b={a0:[1189,841],a1:[841,594],a2:[594,420],a3:[420,297],a4:[297,210],a5:[210,148]};"auto"!==a&&null!=a?a=da(a)||null==b[a.toLowerCase()]?da(a)&&null!=a[0]&&null!=a[1]?a:b.a4:b[a.toLowerCase()]:(a=window.innerWidth,b=window.innerHeight,a=a>b?[a/4,b/4]:[b/4,a/4]);this.aa=a;this.X=new jsPDF(this.gb,
"mm",this.aa)}};l.hg=function(a,b,c,d,e){this.La();null!==c&&this.X.setTextColor(c[0],c[1],c[2]);null===b&&(b=this.gi);this.X.setFontSize(b);b=Fh(this,d,e);this.X.text(a,b[0],b[1]);this.X.setTextColor(0,0,0)};l.dg=function(a,b,c,d,e){this.La();b=Fh(this,b,c);this.X.addImage(a,"JPEG",b[0],b[1],d,e)};
l.eg=function(a,b,c){var d=document;a=Dh(a)||d;a=a.querySelectorAll&&a.querySelector?a.querySelectorAll("CANVAS"):a.getElementsByTagName("CANVAS");a=a[0];d=a.getContext("2d");d.globalCompositeOperation="destination-over";d.fillStyle="#ffffff";d.fillRect(0,0,a.width,a.height);var d=a.toDataURL("image/jpeg"),e,f;if("auto"===this.kf)this.aa=[a.width/4,a.height/4],e=a.width/4,f=a.height/4,this.La();else{this.La();var g;a.width>a.height?(e="l"==this.gb.charAt(0)?this.aa[1]:this.aa[0],g=a.width/e,f=a.height/
g):(f="p"==this.gb.charAt(0)?this.aa[1]:this.aa[0],g=a.height/f,e=a.width/g)}b=Fh(this,b||0,c||0);this.X.addImage(d,"JPEG",b[0],b[1],e,f)};l.save=function(a){a=null!=a?".pdf"===a.slice(-4)?a:a+".pdf":"doc";this.X.save(a)};l.gg=function(a,b,c,d,e){this.La();this.X.setFillColor(e[0],e[1],e[2]);a=Fh(this,a,b);this.X.rect(a[0],a[1],c,d,"F");this.X.setFillColor(0,0,0)};function Fh(a,b,c){0>b&&(b="l"===a.gb?b+a.aa[0]:b+a.aa[1]);0>c&&(c="l"===a.gb?c+a.aa[1]:c+a.aa[0]);return[b,c]}ka("IiifPrint",Eh);
ka("IiifPrint.prototype.addText",Eh.prototype.hg);ka("IiifPrint.prototype.addBase64Image",Eh.prototype.dg);ka("IiifPrint.prototype.addDocument",Eh.prototype.eg);ka("IiifPrint.prototype.addRectangle",Eh.prototype.gg);ka("IiifPrint.prototype.save",Eh.prototype.save);function Gh(a){if(a.Y&&"function"==typeof a.Y)return a.Y();if(y(a))return a.split("");if(ea(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return ih(a)}
function Hh(a,b,c){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,c);else if(ea(a)||y(a))$g(a,b,c);else{var d;if(a.fa&&"function"==typeof a.fa)d=a.fa();else if(a.Y&&"function"==typeof a.Y)d=void 0;else if(ea(a)||y(a)){d=[];for(var e=a.length,f=0;f<e;f++)d.push(f)}else d=jh(a);for(var e=Gh(a),f=e.length,g=0;g<f;g++)b.call(c,e[g],d&&d[g],a)}};function Ih(a,b){this.a={};this.D=[];this.g=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}l=Ih.prototype;l.Ia=function(){return this.g};l.Y=function(){Jh(this);for(var a=[],b=0;b<this.D.length;b++)a.push(this.a[this.D[b]]);return a};l.fa=function(){Jh(this);return this.D.concat()};l.L=function(a){return Kh(this.a,a)};
l.Re=function(a,b){if(this===a)return!0;if(this.g!=a.Ia())return!1;var c=b||Lh;Jh(this);for(var d,e=0;d=this.D[e];e++)if(!c(this.get(d),a.get(d)))return!1;return!0};function Lh(a,b){return a===b}l.ec=function(){return 0==this.g};l.clear=function(){this.a={};this.g=this.D.length=0};l.remove=function(a){return Kh(this.a,a)?(delete this.a[a],this.g--,this.D.length>2*this.g&&Jh(this),!0):!1};
function Jh(a){if(a.g!=a.D.length){for(var b=0,c=0;b<a.D.length;){var d=a.D[b];Kh(a.a,d)&&(a.D[c++]=d);b++}a.D.length=c}if(a.g!=a.D.length){for(var e={},c=b=0;b<a.D.length;)d=a.D[b],Kh(e,d)||(a.D[c++]=d,e[d]=1),b++;a.D.length=c}}l.get=function(a,b){return Kh(this.a,a)?this.a[a]:b};l.set=function(a,b){Kh(this.a,a)||(this.g++,this.D.push(a));this.a[a]=b};l.addAll=function(a){var b;a instanceof Ih?(b=a.fa(),a=a.Y()):(b=jh(a),a=ih(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};
l.forEach=function(a,b){for(var c=this.fa(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};l.clone=function(){return new Ih(this)};function Kh(a,b){return Object.prototype.hasOwnProperty.call(a,b)};var Mh=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Nh(a,b){if(a)for(var c=a.split("\x26"),d=0;d<c.length;d++){var e=c[d].indexOf("\x3d"),f,g=null;0<=e?(f=c[d].substring(0,e),g=c[d].substring(e+1)):f=c[d];b(f,g?decodeURIComponent(g.replace(/\+/g," ")):"")}};function Oh(a,b){this.Va=this.ob=this.Na="";this.Db=null;this.Za=this.ma="";this.Z=this.jh=!1;var c;if(a instanceof Oh)this.Z=void 0!==b?b:a.Z,Ph(this,a.Na),c=a.ob,Qh(this),this.ob=c,Rh(this,a.Va),Sh(this,a.Db),c=a.ma,Qh(this),this.ma=c,Th(this,a.ya.clone()),c=a.Za,Qh(this),this.Za=c;else if(a&&(c=String(a).match(Mh))){this.Z=!!b;Ph(this,c[1]||"",!0);var d=c[2]||"";Qh(this);this.ob=Uh(d);Rh(this,c[3]||"",!0);Sh(this,c[4]);d=c[5]||"";Qh(this);this.ma=Uh(d,!0);Th(this,c[6]||"",!0);c=c[7]||"";Qh(this);
this.Za=Uh(c)}else this.Z=!!b,this.ya=new Vh(null,0,this.Z)}Oh.prototype.toString=function(){var a=[],b=this.Na;b&&a.push(Wh(b,Xh,!0),":");var c=this.Va;if(c||"file"==b)a.push("//"),(b=this.ob)&&a.push(Wh(b,Xh,!0),"@"),a.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.Db,null!=c&&a.push(":",String(c));if(c=this.ma)this.Va&&"/"!=c.charAt(0)&&a.push("/"),a.push(Wh(c,"/"==c.charAt(0)?Yh:Zh,!0));(c=this.ya.toString())&&a.push("?",c);(c=this.Za)&&a.push("#",Wh(c,$h));return a.join("")};
Oh.prototype.resolve=function(a){var b=this.clone(),c=!!a.Na;c?Ph(b,a.Na):c=!!a.ob;if(c){var d=a.ob;Qh(b);b.ob=d}else c=!!a.Va;c?Rh(b,a.Va):c=null!=a.Db;d=a.ma;if(c)Sh(b,a.Db);else if(c=!!a.ma){if("/"!=d.charAt(0))if(this.Va&&!this.ma)d="/"+d;else{var e=b.ma.lastIndexOf("/");-1!=e&&(d=b.ma.substr(0,e+1)+d)}e=d;if(".."==e||"."==e)d="";else if(Y(e,"./")||Y(e,"/.")){for(var d=0==e.lastIndexOf("/",0),e=e.split("/"),f=[],g=0;g<e.length;){var h=e[g++];"."==h?d&&g==e.length&&f.push(""):".."==h?((1<f.length||
1==f.length&&""!=f[0])&&f.pop(),d&&g==e.length&&f.push("")):(f.push(h),d=!0)}d=f.join("/")}else d=e}c?(Qh(b),b.ma=d):c=""!==a.ya.toString();c?Th(b,a.ya.clone()):c=!!a.Za;c&&(a=a.Za,Qh(b),b.Za=a);return b};Oh.prototype.clone=function(){return new Oh(this)};function Ph(a,b,c){Qh(a);a.Na=c?Uh(b,!0):b;a.Na&&(a.Na=a.Na.replace(/:$/,""))}function Rh(a,b,c){Qh(a);a.Va=c?Uh(b,!0):b}function Sh(a,b){Qh(a);if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.Db=b}else a.Db=null}
function Th(a,b,c){Qh(a);b instanceof Vh?(a.ya=b,a.ya.se(a.Z)):(c||(b=Wh(b,ai)),a.ya=new Vh(b,0,a.Z))}function Qh(a){if(a.jh)throw Error("Tried to modify a read-only Uri");}Oh.prototype.se=function(a){this.Z=a;this.ya&&this.ya.se(a);return this};function Uh(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Wh(a,b,c){return y(a)?(a=encodeURI(a).replace(b,bi),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}
function bi(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Xh=/[#\/\?@]/g,Zh=/[\#\?:]/g,Yh=/[\#\?]/g,ai=/[\#\?@]/g,$h=/#/g;function Vh(a,b,c){this.g=this.s=null;this.R=a||null;this.Z=!!c}function ci(a){a.s||(a.s=new Ih,a.g=0,a.R&&Nh(a.R,function(b,c){a.add(decodeURIComponent(b.replace(/\+/g," ")),c)}))}l=Vh.prototype;l.Ia=function(){ci(this);return this.g};
l.add=function(a,b){ci(this);this.R=null;a=di(this,a);var c=this.s.get(a);c||this.s.set(a,c=[]);c.push(b);this.g+=1;return this};l.remove=function(a){ci(this);a=di(this,a);return this.s.L(a)?(this.R=null,this.g-=this.s.get(a).length,this.s.remove(a)):!1};l.clear=function(){this.s=this.R=null;this.g=0};l.ec=function(){ci(this);return 0==this.g};l.L=function(a){ci(this);a=di(this,a);return this.s.L(a)};
l.fa=function(){ci(this);for(var a=this.s.Y(),b=this.s.fa(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};l.Y=function(a){ci(this);var b=[];if(y(a))this.L(a)&&(b=dh(b,this.s.get(di(this,a))));else{a=this.s.Y();for(var c=0;c<a.length;c++)b=dh(b,a[c])}return b};l.set=function(a,b){ci(this);this.R=null;a=di(this,a);this.L(a)&&(this.g-=this.s.get(a).length);this.s.set(a,[b]);this.g+=1;return this};
l.get=function(a,b){var c=a?this.Y(a):[];return 0<c.length?String(c[0]):b};l.toString=function(){if(this.R)return this.R;if(!this.s)return"";for(var a=[],b=this.s.fa(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.Y(d),f=0;f<d.length;f++){var g=e;""!==d[f]&&(g+="\x3d"+encodeURIComponent(String(d[f])));a.push(g)}return this.R=a.join("\x26")};l.clone=function(){var a=new Vh;a.R=this.R;this.s&&(a.s=this.s.clone(),a.g=this.g);return a};
function di(a,b){var c=String(b);a.Z&&(c=c.toLowerCase());return c}l.se=function(a){a&&!this.Z&&(ci(this),this.R=null,this.s.forEach(function(a,c){var d=c.toLowerCase();c!=d&&(this.remove(c),this.remove(d),0<a.length&&(this.R=null,this.s.set(di(this,d),eh(a)),this.g+=a.length))},this));this.Z=a};l.extend=function(a){for(var b=0;b<arguments.length;b++)Hh(arguments[b],function(a,b){this.add(b,a)},this)};function ei(){}ei.prototype.Je=null;function fi(a){return a.Je||(a.Je=a.gf())};var gi;function hi(){}la(hi,ei);hi.prototype.Od=function(){var a=ii(this);return a?new ActiveXObject(a):new XMLHttpRequest};hi.prototype.gf=function(){var a={};ii(this)&&(a[0]=!0,a[1]=!0);return a};
function ii(a){if(!a.df&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.df=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.df}gi=new hi;function ji(){}la(ji,ei);ji.prototype.Od=function(){var a=new XMLHttpRequest;if("withCredentials"in a)return a;if("undefined"!=typeof XDomainRequest)return new ki;throw Error("Unsupported browser");};ji.prototype.gf=function(){return{}};
function ki(){this.ha=new XDomainRequest;this.readyState=0;this.onreadystatechange=null;this.responseText="";this.status=-1;this.statusText=this.responseXML=null;this.ha.onload=F(this.Sg,this);this.ha.onerror=F(this.We,this);this.ha.onprogress=F(this.Xg,this);this.ha.ontimeout=F(this.dh,this)}l=ki.prototype;l.open=function(a,b,c){if(null!=c&&!c)throw Error("Only async requests are supported.");this.ha.open(a,b)};
l.send=function(a){if(a)if("string"==typeof a)this.ha.send(a);else throw Error("Only string data is supported");else this.ha.send()};l.abort=function(){this.ha.abort()};l.setRequestHeader=function(){};l.getResponseHeader=function(a){return"content-type"==a.toLowerCase()?this.ha.contentType:""};l.Sg=function(){this.status=200;this.responseText=this.ha.responseText;li(this,4)};l.We=function(){this.status=500;this.responseText="";li(this,4)};l.dh=function(){this.We()};
l.Xg=function(){this.status=200;li(this,1)};function li(a,b){a.readyState=b;if(a.onreadystatechange)a.onreadystatechange()}l.getAllResponseHeaders=function(){return"content-type: "+this.ha.contentType};function mi(){0!=ni&&(oi[this[fa]||(this[fa]=++ha)]=this);this.Fa=this.Fa;this.Zc=this.Zc}var ni=0,oi={};mi.prototype.Fa=!1;mi.prototype.ea=function(){if(!this.Fa&&(this.Fa=!0,this.l(),0!=ni)){var a=this[fa]||(this[fa]=++ha);delete oi[a]}};mi.prototype.l=function(){if(this.Zc)for(;this.Zc.length;)this.Zc.shift()()};var pi=!rh||9<=Number(Ch),qi=rh&&!Ah("9");!uh||Ah("528");th&&Ah("1.9b")||rh&&Ah("8")||qh&&Ah("9.5")||uh&&Ah("528");th&&!Ah("8")||rh&&Ah("9");function ri(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.kb=!1;this.Hf=!0}ri.prototype.stopPropagation=function(){this.kb=!0};ri.prototype.preventDefault=function(){this.defaultPrevented=!0;this.Hf=!1};function si(a,b){ri.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.Xb=this.state=null;if(a){var c=this.type=a.type,d=a.changedTouches?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=b;var e=a.relatedTarget;if(e){if(th){var f;a:{try{nh(e.nodeName);f=!0;break a}catch(g){}f=
!1}f||(e=null)}}else"mouseover"==c?e=a.fromElement:"mouseout"==c&&(e=a.toElement);this.relatedTarget=e;null===d?(this.offsetX=uh||void 0!==a.offsetX?a.offsetX:a.layerX,this.offsetY=uh||void 0!==a.offsetY?a.offsetY:a.layerY,this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||
0,this.screenY=d.screenY||0);this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.Xb=a;a.defaultPrevented&&this.preventDefault()}}la(si,ri);si.prototype.stopPropagation=function(){si.kd.stopPropagation.call(this);this.Xb.stopPropagation?this.Xb.stopPropagation():this.Xb.cancelBubble=!0};
si.prototype.preventDefault=function(){si.kd.preventDefault.call(this);var a=this.Xb;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,qi)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var ti="closure_listenable_"+(1E6*Math.random()|0),ui=0;function vi(a,b,c,d,e){this.listener=a;this.bd=null;this.src=b;this.type=c;this.Sb=!!d;this.Jc=e;this.key=++ui;this.Gb=this.callOnce=!1}function wi(a){a.Gb=!0;a.listener=null;a.bd=null;a.src=null;a.Jc=null};function xi(a){this.src=a;this.G={};this.tc=0}xi.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.G[f];a||(a=this.G[f]=[],this.tc++);var g=yi(a,b,d,e);-1<g?(b=a[g],c||(b.callOnce=!1)):(b=new vi(b,this.src,f,!!d,e),b.callOnce=c,a.push(b));return b};xi.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.G))return!1;var e=this.G[a];b=yi(e,b,c,d);return-1<b?(wi(e[b]),Array.prototype.splice.call(e,b,1),0==e.length&&(delete this.G[a],this.tc--),!0):!1};
function zi(a,b){var c=b.type;if(c in a.G){var d=a.G[c],e=Zg(d,b),f;(f=0<=e)&&Array.prototype.splice.call(d,e,1);f&&(wi(b),0==a.G[c].length&&(delete a.G[c],a.tc--))}}xi.prototype.Xd=function(a,b,c,d){a=this.G[a.toString()];var e=-1;a&&(e=yi(a,b,c,d));return-1<e?a[e]:null};xi.prototype.hasListener=function(a,b){var c=void 0!==a,d=c?a.toString():"",e=void 0!==b;return hh(this.G,function(a){for(var g=0;g<a.length;++g)if(!(c&&a[g].type!=d||e&&a[g].Sb!=b))return!0;return!1})};
function yi(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.Gb&&f.listener==b&&f.Sb==!!c&&f.Jc==d)return e}return-1};var Ai="closure_lm_"+(1E6*Math.random()|0),Bi={},Ci=0;function Di(a,b,c,d,e){if(da(b))for(var f=0;f<b.length;f++)Di(a,b[f],c,d,e);else c=Ei(c),a&&a[ti]?a.ja.add(String(b),c,!1,d,e):Fi(a,b,c,!1,d,e)}
function Fi(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=!!e,h=Gi(a);h||(a[Ai]=h=new xi(a));c=h.add(b,c,d,e,f);if(c.bd)return;d=Hi();c.bd=d;d.src=a;d.listener=c;if(a.addEventListener)a.addEventListener(b.toString(),d,g);else if(a.attachEvent)a.attachEvent(Ii(b.toString()),d);else throw Error("addEventListener and attachEvent are unavailable.");Ci++}
function Hi(){var a=Ji,b=pi?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function Ki(a,b,c,d,e){if(da(b))for(var f=0;f<b.length;f++)Ki(a,b[f],c,d,e);else c=Ei(c),a&&a[ti]?a.ja.add(String(b),c,!0,d,e):Fi(a,b,c,!0,d,e)}function Li(a,b,c,d,e){if(da(b))for(var f=0;f<b.length;f++)Li(a,b[f],c,d,e);else c=Ei(c),a&&a[ti]?a.ja.remove(String(b),c,d,e):a&&(a=Gi(a))&&(b=a.Xd(b,c,!!d,e))&&Mi(b)}
function Mi(a){if("number"!=typeof a&&a&&!a.Gb){var b=a.src;if(b&&b[ti])zi(b.ja,a);else{var c=a.type,d=a.bd;b.removeEventListener?b.removeEventListener(c,d,a.Sb):b.detachEvent&&b.detachEvent(Ii(c),d);Ci--;(c=Gi(b))?(zi(c,a),0==c.tc&&(c.src=null,b[Ai]=null)):wi(a)}}}function Ii(a){return a in Bi?Bi[a]:Bi[a]="on"+a}function Ni(a,b,c,d){var e=!0;if(a=Gi(a))if(b=a.G[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.Sb==c&&!f.Gb&&(f=Oi(f,d),e=e&&!1!==f)}return e}
function Oi(a,b){var c=a.listener,d=a.Jc||a.src;a.callOnce&&Mi(a);return c.call(d,b)}
function Ji(a,b){if(a.Gb)return!0;if(!pi){var c;if(!(c=b))a:{c=["window","event"];for(var d=u,e;e=c.shift();)if(null!=d[e])d=d[e];else{c=null;break a}c=d}e=c;c=new si(e,this);d=!0;if(!(0>e.keyCode||void 0!=e.returnValue)){a:{var f=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(k){f=!0}if(f||void 0==e.returnValue)e.returnValue=!0}e=[];for(f=c.currentTarget;f;f=f.parentNode)e.push(f);for(var f=a.type,g=e.length-1;!c.kb&&0<=g;g--){c.currentTarget=e[g];var h=Ni(e[g],f,!0,c),d=d&&h}for(g=0;!c.kb&&g<
e.length;g++)c.currentTarget=e[g],h=Ni(e[g],f,!1,c),d=d&&h}return d}return Oi(a,new si(b,this))}function Gi(a){a=a[Ai];return a instanceof xi?a:null}var Pi="__closure_events_fn_"+(1E9*Math.random()>>>0);function Ei(a){if("function"==ca(a))return a;a[Pi]||(a[Pi]=function(b){return a.handleEvent(b)});return a[Pi]};function Qi(){mi.call(this);this.ja=new xi(this);this.cg=this;this.je=null}la(Qi,mi);Qi.prototype[ti]=!0;l=Qi.prototype;l.addEventListener=function(a,b,c,d){Di(this,a,b,c,d)};l.removeEventListener=function(a,b,c,d){Li(this,a,b,c,d)};
l.dispatchEvent=function(a){var b,c=this.je;if(c)for(b=[];c;c=c.je)b.push(c);var c=this.cg,d=a.type||a;if(y(a))a=new ri(a,c);else if(a instanceof ri)a.target=a.target||c;else{var e=a;a=new ri(d,c);mh(a,e)}var e=!0,f;if(b)for(var g=b.length-1;!a.kb&&0<=g;g--)f=a.currentTarget=b[g],e=Ri(f,d,!0,a)&&e;a.kb||(f=a.currentTarget=c,e=Ri(f,d,!0,a)&&e,a.kb||(e=Ri(f,d,!1,a)&&e));if(b)for(g=0;!a.kb&&g<b.length;g++)f=a.currentTarget=b[g],e=Ri(f,d,!1,a)&&e;return e};
l.l=function(){Qi.kd.l.call(this);if(this.ja){var a=this.ja,b=0,c;for(c in a.G){for(var d=a.G[c],e=0;e<d.length;e++)++b,wi(d[e]);delete a.G[c];a.tc--}}this.je=null};function Ri(a,b,c,d){b=a.ja.G[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.Gb&&g.Sb==c){var h=g.listener,k=g.Jc||g.src;g.callOnce&&zi(a.ja,g);e=!1!==h.call(k,d)&&e}}return e&&0!=d.Hf}l.Xd=function(a,b,c,d){return this.ja.Xd(String(a),b,c,d)};
l.hasListener=function(a,b){return this.ja.hasListener(void 0!==a?String(a):void 0,b)};function Si(a,b,c){if("function"==ca(a))c&&(a=F(a,c));else if(a&&"function"==typeof a.handleEvent)a=F(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:u.setTimeout(a,b||0)};function Ti(a){return/^\s*$/.test(a)?!1:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/(?:"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)[\s\u2028\u2029]*(?=:|,|]|}|$)/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""))}function Ui(a){a=String(a);if(Ti(a))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);};function Vi(a){Qi.call(this);this.headers=new Ih;this.Ed=a||null;this.Aa=!1;this.Dd=this.b=null;this.Pc=this.ee="";this.eb=this.ce=this.Kc=this.Td=!1;this.td=0;this.Pa=null;this.Gf=Wi;this.ze=this.Wh=this.Tf=!1}la(Vi,Qi);var Wi="",Xi=/^https?$/i,Yi=["POST","PUT"];l=Vi.prototype;
l.send=function(a,b,c,d){if(this.b)throw Error("[goog.net.XhrIo] Object is active with another request\x3d"+this.ee+"; newUri\x3d"+a);b=b?b.toUpperCase():"GET";this.ee=a;this.Pc="";this.Td=!1;this.Aa=!0;this.b=this.Ed?this.Ed.Od():gi.Od();this.Dd=this.Ed?fi(this.Ed):fi(gi);this.b.onreadystatechange=F(this.uf,this);this.Wh&&"onprogress"in this.b&&(this.b.onprogress=F(function(a){this.tf(a,!0)},this),this.b.upload&&(this.b.upload.onprogress=F(this.tf,this)));try{this.ce=!0,this.b.open(b,String(a),!0),
this.ce=!1}catch(f){Zi(this,f);return}a=c||"";var e=this.headers.clone();d&&Hh(d,function(a,b){e.set(b,a)});d=bh(e.fa());c=u.FormData&&a instanceof u.FormData;!(0<=Zg(Yi,b))||d||c||e.set("Content-Type","application/x-www-form-urlencoded;charset\x3dutf-8");e.forEach(function(a,b){this.b.setRequestHeader(b,a)},this);this.Gf&&(this.b.responseType=this.Gf);"withCredentials"in this.b&&this.b.withCredentials!==this.Tf&&(this.b.withCredentials=this.Tf);try{$i(this),0<this.td&&((this.ze=aj(this.b))?(this.b.timeout=
this.td,this.b.ontimeout=F(this.ud,this)):this.Pa=Si(this.ud,this.td,this)),this.Kc=!0,this.b.send(a),this.Kc=!1}catch(f){Zi(this,f)}};function aj(a){return rh&&Ah(9)&&"number"==typeof a.timeout&&void 0!==a.ontimeout}function ch(a){return"content-type"==a.toLowerCase()}l.ud=function(){"undefined"!=typeof aa&&this.b&&(this.Pc="Timed out after "+this.td+"ms, aborting",this.dispatchEvent("timeout"),this.abort(8))};function Zi(a,b){a.Aa=!1;a.b&&(a.eb=!0,a.b.abort(),a.eb=!1);a.Pc=b;bj(a);cj(a)}
function bj(a){a.Td||(a.Td=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}l.abort=function(){this.b&&this.Aa&&(this.Aa=!1,this.eb=!0,this.b.abort(),this.eb=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),cj(this))};l.l=function(){this.b&&(this.Aa&&(this.Aa=!1,this.eb=!0,this.b.abort(),this.eb=!1),cj(this,!0));Vi.kd.l.call(this)};l.uf=function(){this.Fa||(this.ce||this.Kc||this.eb?dj(this):this.Kh())};l.Kh=function(){dj(this)};
function dj(a){if(a.Aa&&"undefined"!=typeof aa&&(!a.Dd[1]||4!=ej(a)||2!=fj(a)))if(a.Kc&&4==ej(a))Si(a.uf,0,a);else if(a.dispatchEvent("readystatechange"),4==ej(a)){a.Aa=!1;try{if(gj(a))a.dispatchEvent("complete"),a.dispatchEvent("success");else{var b;try{b=2<ej(a)?a.b.statusText:""}catch(c){b=""}a.Pc=b+" ["+fj(a)+"]";bj(a)}}finally{cj(a)}}}l.tf=function(a,b){this.dispatchEvent(hj(a,"progress"));this.dispatchEvent(hj(a,b?"downloadprogress":"uploadprogress"))};
function hj(a,b){return{type:b,lengthComputable:a.lengthComputable,loaded:a.loaded,total:a.total}}function cj(a,b){if(a.b){$i(a);var c=a.b,d=a.Dd[0]?ba:null;a.b=null;a.Dd=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){}}}function $i(a){a.b&&a.ze&&(a.b.ontimeout=null);"number"==typeof a.Pa&&(u.clearTimeout(a.Pa),a.Pa=null)}
function gj(a){var b=fj(a),c;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:c=!0;break a;default:c=!1}if(!c){if(b=0===b)a=String(a.ee).match(Mh)[1]||null,!a&&u.self&&u.self.location&&(a=u.self.location.protocol,a=a.substr(0,a.length-1)),b=!Xi.test(a?a.toLowerCase():"");c=b}return c}function ej(a){return a.b?a.b.readyState:0}function fj(a){try{return 2<ej(a)?a.b.status:-1}catch(b){return-1}}
l.getResponseHeader=function(a){if(this.b&&4==ej(this))return a=this.b.getResponseHeader(a),null===a?void 0:a};l.getAllResponseHeaders=function(){return this.b&&4==ej(this)?this.b.getAllResponseHeaders():""};function ij(a){for(var b=a.mg,c=a.zg||"jpg",d=a.Zh||"default",e=a.width,f=a.height,g=a.tileSize||256,h=Math.max(Math.ceil(Math.log(e/g)/Math.LN2),Math.ceil(Math.log(f/g)/Math.LN2)),k=[],n=0;n<=h;n++){var m=Math.pow(2,h-n);k.push([Math.ceil(Math.ceil(e/m)/g),Math.ceil(Math.ceil(f/m)/g)])}var p=Math.min(window.devicePixelRatio||1,4),n=g/p,m=1==p?a.resolutions:ah(a.resolutions,function(a){return a*p});Tg.call(this,{tilePixelRatio:p,tileGrid:new Fg({resolutions:m.reverse(),origin:[0,0],tileSize:n}),tileUrlFunction:function(a){var m=
a[0];if(!(h<m)){var n=k[m];if(n){var p=a[1];a=-a[2]-1;if(!(0>p||n[0]<=p||0>a||n[1]<=a)){var n=Math.pow(2,h-m),x=g*n,D=p*x,z=a*x,E=Math.min(D+x,e),x=Math.min(z+x,f),E=n*Math.floor(E/n),x=n*Math.floor(x/n),n="/"+D+","+z+","+(E-D)+","+(x-z)+"/pct:"+100/n+"/0/"+d+"."+c;da(b)?(D=b.length,m=((p<<m)+a)%D,m=b[0>m*D?m+D:m]):m=b;return m+n}}}},crossOrigin:a.crossOrigin});$a&&Sg(this,function(a,b){var c=a.va();Ki(c,"load",function(){if(0<c.naturalWidth&&(c.naturalWidth!=g||c.naturalHeight!=g)){var b=document.createElement("CANVAS");
b.width=g;b.height=g;b.getContext("2d").drawImage(c,0,0);var d=kh(a,function(a){return a==c});d&&(a[d]=b)}},!0);c.src=b})}la(ij,Tg);function jj(a,b,c,d,e,f){a=Dh(a);if(!a)throw Error("Invalid element");this.sh=a;this.Rd=this.a=null;this.Pe=d;this.Sf=1==e;this.ie=f||null;this.ff=c||null;this.Gg=y(b)?b.substring(0,b.lastIndexOf("/")):null;this.La(b)}jj.prototype.Fc=function(){return this.a};
function kj(a,b){var c=b["@id"];if(!c){var d=b.image_host,e=b.identifier;d&&e&&(c=d+e)}c||(c=a.Gg);if(!c)throw Error("Unable to determine base url");if((d=b.domains)&&0<d.length){var f=new Oh(c),c=[];$g(d,function(a){Rh(f,a);c.push(f.toString())})}var g=(b.tiles||[{}])[0],d=b.width,e=b.height,h=g.width||b.tile_width||256,k=g.scaleFactors||b.scale_factors||[];if(0==k.length)for(g=1;Math.max(d,e)/g>h;)k.push(g),g*=2;var n=!b["@context"]||b["@context"].match(/\/1\.1\/context\.json$/i)?"native":"default",
g=new Ac({code:"IIIF",units:"pixels",extent:[0,-e,d,0]}),h=new ij({mg:c,width:d,height:e,resolutions:k,zg:"jpg",tileSize:h,projection:g,Zh:n,crossOrigin:y(a.Pe)?a.Pe:a.Sf?"":void 0}),h=new qg({source:h});a.a=new Hf({layers:[h],target:a.sh,renderer:a.Sf?"webgl":void 0,view:new bd({projection:g,extent:[0,-e,d,0]}),interactions:Ee({mouseWheelZoom:null==a.ie}),controls:[],logo:!1});a.ie&&a.a.dc.push(a.ie);e=window.location.hash;if(0<e.length&&(0<e.indexOf("lat\x3d")||0<e.indexOf("x\x3d"))){d={};e=e.split("\x26");
e[0]=e[0].substring(1);for(g=0;g<e.length;g++)h=e[g].split("\x3d"),d[h[0]]=h[1];void 0!==d.zoom?(nd(W(a.a),[parseFloat(d.lon),parseFloat(d.lat)-a.Rd.height]),lj(a,parseFloat(d.zoom))):(nd(W(a.a),[parseFloat(d.y),-parseFloat(d.x)]),md(W(a.a),d.res))}else ld(W(a.a),g.A());a.ff&&a.ff(a)}jj.prototype.La=function(a){if(y(a)){var b=new Vi(new ji);Di(b,"complete",function(){if(gj(b)){var a;a=b.b?Ui(b.b.responseText):void 0;this.La(a)}},!1,this);b.send(a)}else this.Rd=a,kj(this,a)};
function lj(a,b){var c=W(a.a),d=c.constrainResolution(c.jb,b-c.ic,0);md(c,d)}
jj.prototype.fg=function(a){if(!1!==a){var b=null!=a.accuracy?a.accuracy:2,c=this.Rd.height;Da(this.a,function(){var d=W(this.a),e=cd(d),f=parseFloat(e[1]);if(null!=a.geoFormat&&!1===a.geoFormat)e="res\x3d"+d.h()+"\x26x\x3d"+Math.abs(f.toFixed(b))+"\x26y\x3d"+e[0].toFixed(b);else{f+=c;a:{var g=W(this.a),h,d=g.h();if(void 0!==d&&d>=g.pf&&d<=g.jb){h=g.ic||0;var k;if(g.U){var n=vb(g.U,d,1);h+=n;if(n==g.U.length-1){d=h;break a}k=g.U[n];g=k/g.U[n+1]}else k=g.jb,g=g.Ci;h+=Math.log(k/d)/Math.log(g)}d=h}e=
"zoom\x3d"+d.toFixed(b)+"\x26lat\x3d"+f.toFixed(b)+"\x26lon\x3d"+e[0].toFixed(b)}null!=a.addToEnd&&(e+="\x26"+a.addToEnd);window.location.hash=e},this)}};function mj(){X.call(this,{handleEvent:F(this.Kg,this)});this.v=0;this.P=null;this.md=0;this.Mc=null}la(mj,X);mj.prototype.Kg=function(a){var b=!1;if("wheel"==a.type){b=a.originalEvent;this.P=a.coordinate;var c=b.deltaY/12;this.v=0<this.v==0<b.deltaY?this.v+c:c;this.v=Math.min(Math.max(this.v,-.5),.5);null==this.Mc&&(this.Mc=u.setInterval(F(this.wg,this),100));a.preventDefault();b=!0}return!b};
mj.prototype.wg=function(){var a=W(this.a);ed(a)&&gd(a);var b=Math.pow(2,this.v)*(this.md||a.o().resolution),c=a.vb()||0,d=a.ub()||Infinity;this.md=Math.min(Math.max(b,c),d);a.animate({anchor:this.P,resolution:this.md,duration:100,easing:ic});this.v/=2;.01>Math.abs(this.v)&&(this.v=0,this.P=null,this.md=0,u.clearInterval(this.Mc),this.Mc=null)};function nj(a,b,c,d){jj.call(this,a,b,c,d,void 0,new mj)}la(nj,jj);ka("IiifViewer",nj);ka("IiifViewer.prototype.getMap",jj.prototype.Fc);ka("IiifViewer.prototype.addPermalink",jj.prototype.fg);})();
